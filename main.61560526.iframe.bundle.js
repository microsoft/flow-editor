(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1:function(module,__webpack_exports__,__webpack_require__){"use strict";var GraphNodeEvent,GraphEdgeEvent,GraphPortEvent,GraphCanvasEvent,GraphScrollBarEvent,GraphMinimapEvent,GraphContextMenuEvent;__webpack_require__.d(__webpack_exports__,"e",(function(){return GraphNodeEvent})),__webpack_require__.d(__webpack_exports__,"c",(function(){return GraphEdgeEvent})),__webpack_require__.d(__webpack_exports__,"f",(function(){return GraphPortEvent})),__webpack_require__.d(__webpack_exports__,"a",(function(){return GraphCanvasEvent})),__webpack_require__.d(__webpack_exports__,"g",(function(){return GraphScrollBarEvent})),__webpack_require__.d(__webpack_exports__,"d",(function(){return GraphMinimapEvent})),__webpack_require__.d(__webpack_exports__,"b",(function(){return GraphContextMenuEvent})),function(GraphNodeEvent){GraphNodeEvent.Click="[Node]Click",GraphNodeEvent.DoubleClick="[Node]DoubleClick",GraphNodeEvent.MouseDown="[Node]MouseDown",GraphNodeEvent.MouseUp="[Node]MouseUp",GraphNodeEvent.MouseEnter="[Node]MouseEnter",GraphNodeEvent.MouseLeave="[Node]MouseLeave",GraphNodeEvent.MouseOver="[Node]MouseOver",GraphNodeEvent.MouseOut="[Node]MouseOut",GraphNodeEvent.MouseMove="[Node]MouseMove",GraphNodeEvent.ContextMenu="[Node]ContextMenu",GraphNodeEvent.Drag="[Node]Drag",GraphNodeEvent.DragStart="[Node]DragStart",GraphNodeEvent.DragEnd="[Node]DragEnd",GraphNodeEvent.PointerDown="[Node]PointerDown",GraphNodeEvent.PointerEnter="[Node]PointerEnter",GraphNodeEvent.PointerMove="[Node]PointerMove",GraphNodeEvent.PointerLeave="[Node]PointerLeave",GraphNodeEvent.PointerUp="[Node]PointerUp",GraphNodeEvent.Resizing="[Node]Resizing",GraphNodeEvent.ResizingStart="[Node]ResizingStart",GraphNodeEvent.ResizingEnd="[Node]ResizingEnd",GraphNodeEvent.KeyDown="[Node]KeyDown",GraphNodeEvent.Select="[Node]Select",GraphNodeEvent.SelectAll="[Node]SelectAll",GraphNodeEvent.Centralize="[Node]Centralize",GraphNodeEvent.Locate="[Node]Locate",GraphNodeEvent.Add="[Node]Add"}(GraphNodeEvent||(GraphNodeEvent={})),function(GraphEdgeEvent){GraphEdgeEvent.Click="[Edge]Click",GraphEdgeEvent.DoubleClick="[Edge]DoubleClick",GraphEdgeEvent.MouseEnter="[Edge]MouseEnter",GraphEdgeEvent.MouseLeave="[Edge]MouseLeave",GraphEdgeEvent.MouseOver="[Edge]MouseOver",GraphEdgeEvent.MouseOut="[Edge]MouseOut",GraphEdgeEvent.MouseMove="[Edge]MouseMove",GraphEdgeEvent.MouseDown="[Edge]MouseDown",GraphEdgeEvent.MouseUp="[Edge]MouseUp",GraphEdgeEvent.ContextMenu="[Edge]ContextMenu",GraphEdgeEvent.ConnectStart="[Edge]ConnectStart",GraphEdgeEvent.ConnectMove="[Edge]ConnectMove",GraphEdgeEvent.ConnectEnd="[Edge]ConnectEnd",GraphEdgeEvent.ConnectNavigate="[Edge]ConnectNavigate",GraphEdgeEvent.Add="[Edge]Add"}(GraphEdgeEvent||(GraphEdgeEvent={})),function(GraphPortEvent){GraphPortEvent.Click="[Port]Click",GraphPortEvent.DoubleClick="[Port]DoubleClick",GraphPortEvent.MouseDown="[Port]MouseDown",GraphPortEvent.PointerDown="[Port]PointerDown",GraphPortEvent.PointerUp="[Port]PointerUp",GraphPortEvent.PointerEnter="[Port]PointerEnter",GraphPortEvent.PointerLeave="[Port]PointerLeave",GraphPortEvent.MouseUp="[Port]MouseUp",GraphPortEvent.MouseEnter="[Port]MouseEnter",GraphPortEvent.MouseLeave="[Port]MouseLeave",GraphPortEvent.MouseOver="[Port]MouseOver",GraphPortEvent.MouseOut="[Port]MouseOut",GraphPortEvent.MouseMove="[Port]MouseMove",GraphPortEvent.ContextMenu="[Port]ContextMenu",GraphPortEvent.KeyDown="[Port]KeyDown",GraphPortEvent.Focus="[Port]Focus",GraphPortEvent.Blur="[Port]Blur"}(GraphPortEvent||(GraphPortEvent={})),function(GraphCanvasEvent){GraphCanvasEvent.Click="[Canvas]Click",GraphCanvasEvent.DoubleClick="[Canvas]DoubleClick",GraphCanvasEvent.MouseDown="[Canvas]MouseDown",GraphCanvasEvent.MouseUp="[Canvas]MouseUp",GraphCanvasEvent.MouseEnter="[Canvas]MouseEnter",GraphCanvasEvent.MouseLeave="[Canvas]MouseLeave",GraphCanvasEvent.MouseOver="[Canvas]MouseOver",GraphCanvasEvent.MouseOut="[Canvas]MouseOut",GraphCanvasEvent.MouseMove="[Canvas]MouseMove",GraphCanvasEvent.ContextMenu="[Canvas]ContextMenu",GraphCanvasEvent.DragStart="[Canvas]DragStart",GraphCanvasEvent.Drag="[Canvas]Drag",GraphCanvasEvent.DragEnd="[Canvas]DragEnd",GraphCanvasEvent.Pan="[Canvas]Pan",GraphCanvasEvent.Focus="[Canvas]Focus",GraphCanvasEvent.Blur="[Canvas]Blur",GraphCanvasEvent.Zoom="[Canvas]Zoom",GraphCanvasEvent.Pinch="[Canvas]Pinch",GraphCanvasEvent.KeyDown="[Canvas]KeyDown",GraphCanvasEvent.KeyUp="[Canvas]KeyUp",GraphCanvasEvent.SelectStart="[Canvas]SelectStart",GraphCanvasEvent.SelectMove="[Canvas]SelectMove",GraphCanvasEvent.SelectEnd="[Canvas]SelectEnd",GraphCanvasEvent.UpdateNodeSelectionBySelectBox="[Canvas]UpdateNodeSelectionBySelectBox",GraphCanvasEvent.MouseWheelScroll="[Canvas]MouseWheelScroll",GraphCanvasEvent.DraggingNodeFromItemPanel="[Canvas]DraggingNodeFromItemPanel",GraphCanvasEvent.DraggingNodeFromItemPanelStart="[Canvas]DraggingNodeFromItemPanelStart",GraphCanvasEvent.DraggingNodeFromItemPanelEnd="[Canvas]DraggingNodeFromItemPanelEnd",GraphCanvasEvent.ViewportResize="[Canvas]ViewportResize",GraphCanvasEvent.Navigate="[Canvas]Navigate",GraphCanvasEvent.VirtualizationRecalculated="[Canvas]VirtualizationRecalculated",GraphCanvasEvent.ResetSelection="[Canvas]ResetSelection",GraphCanvasEvent.Copy="[Canvas]Copy",GraphCanvasEvent.Paste="[Canvas]Paste",GraphCanvasEvent.Delete="[Canvas]Delete",GraphCanvasEvent.Undo="[Canvas]Undo",GraphCanvasEvent.Redo="[Canvas]Redo",GraphCanvasEvent.ScrollIntoView="[Canvas]ScrollIntoView",GraphCanvasEvent.ResetUndoStack="[Canvas]ResetUndoStack",GraphCanvasEvent.ResetViewport="[Canvas]ResetViewport",GraphCanvasEvent.ZoomTo="[Canvas]ZoomTo",GraphCanvasEvent.ZoomToFit="[Canvas]ZoomToFit",GraphCanvasEvent.SetData="[Canvas]SetData",GraphCanvasEvent.UpdateData="[Canvas]UpdateData",GraphCanvasEvent.ScrollTo="[Canvas]ScrollTo",GraphCanvasEvent.UpdateSettings="[Canvas]UpdateSettings"}(GraphCanvasEvent||(GraphCanvasEvent={})),function(GraphScrollBarEvent){GraphScrollBarEvent.ScrollStart="[ScrollBar]ScrollStart",GraphScrollBarEvent.Scroll="[ScrollBar]Scroll",GraphScrollBarEvent.ScrollEnd="[ScrollBar]ScrollEnd"}(GraphScrollBarEvent||(GraphScrollBarEvent={})),function(GraphMinimapEvent){GraphMinimapEvent.PanStart="[Minimap]PanStart",GraphMinimapEvent.Pan="[Minimap]Pan",GraphMinimapEvent.PanEnd="[Minimap]PanEnd",GraphMinimapEvent.Click="[Minimap]Click"}(GraphMinimapEvent||(GraphMinimapEvent={})),function(GraphContextMenuEvent){GraphContextMenuEvent.Open="[ContextMenu]Open",GraphContextMenuEvent.Close="[ContextMenu]Close"}(GraphContextMenuEvent||(GraphContextMenuEvent={}))},106:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"j",(function(){return markEdgeDirty})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getNearestConnectablePort})),__webpack_require__.d(__webpack_exports__,"i",(function(){return isConnectable})),__webpack_require__.d(__webpack_exports__,"a",(function(){return filterSelectedItems})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getNeighborPorts})),__webpack_require__.d(__webpack_exports__,"l",(function(){return unSelectAllEntity})),__webpack_require__.d(__webpack_exports__,"k",(function(){return nodeSelection})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getNodeAutomationId})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getPortAutomationId})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getNodeUid})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getPortUid})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getEdgeUid}));__webpack_require__(34),__webpack_require__(12),__webpack_require__(92),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(19),__webpack_require__(20),__webpack_require__(11);var _common_constants__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(21),_models_element_state__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(18),_getPortPosition__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(181),_identical__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(70),_keyboard__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(99),_state__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(28),_transformMatrix__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(72);function markEdgeDirty(edges,id){edges.update(id,(function(edge){return edge.shallow()}))}var getNearestConnectablePort=function getNearestConnectablePort(params){var nearestPort,node=params.parentNode,clientX=params.clientX,clientY=params.clientY,graphConfig=params.graphConfig,viewport=params.viewport,minDistance=1/0;if(node.ports){var point=Object(_transformMatrix__WEBPACK_IMPORTED_MODULE_16__.d)(clientX,clientY,viewport);return node.ports.forEach((function(port){if(isConnectable(graphConfig,Object.assign({},params,{model:port}))){var portPos=Object(_getPortPosition__WEBPACK_IMPORTED_MODULE_12__.a)(node,port.id,graphConfig);if(!portPos)return;var diffX=point.x-portPos.x,diffY=point.y-portPos.y,distance=diffX*diffX+diffY*diffY;distance<minDistance&&(minDistance=distance,nearestPort=port)}})),nearestPort}},isConnectable=function isConnectable(graphConfig,params){var portConfig=graphConfig.getPortConfigByName(params.model.shape);return!!portConfig&&portConfig.getIsConnectable(params)};var filterSelectedItems=function filterSelectedItems(data){var nodes=new Map,edges=[];return data.nodes.forEach((function(_ref){var inner=_ref.inner;Object(_state__WEBPACK_IMPORTED_MODULE_15__.d)(inner)&&nodes.set(inner.id,inner)})),data.edges.forEach((function(_ref2){var inner=_ref2.inner;(Object(_state__WEBPACK_IMPORTED_MODULE_15__.d)(inner)||nodes.has(inner.source)&&nodes.has(inner.target))&&edges.push(inner)})),{nodes:Array.from(nodes.values()),edges:edges}},getNeighborPorts=function getNeighborPorts(data,nodeId,portId){var neighbors=[],edgesBySource=data.getEdgesBySource(nodeId,portId),edgesByTarget=data.getEdgesByTarget(nodeId,portId);return null==edgesBySource||edgesBySource.forEach((function(edgeId){var edge=data.edges.get(edgeId);edge&&neighbors.push({nodeId:edge.target,portId:edge.targetPortId})})),null==edgesByTarget||edgesByTarget.forEach((function(edgeId){var edge=data.edges.get(edgeId);edge&&neighbors.push({nodeId:edge.source,portId:edge.sourcePortId})})),neighbors},unSelectAllEntity=function unSelectAllEntity(){return function(data){return data.mapNodes((function(n){return n.update((function(curNode){var _curNode$ports,nextNode=Object.assign({},curNode,{ports:null===(_curNode$ports=curNode.ports)||void 0===_curNode$ports?void 0:_curNode$ports.map(Object(_state__WEBPACK_IMPORTED_MODULE_15__.i)(Object(_state__WEBPACK_IMPORTED_MODULE_15__.h)(_models_element_state__WEBPACK_IMPORTED_MODULE_11__.c.default)))});return Object(_state__WEBPACK_IMPORTED_MODULE_15__.i)(Object(_state__WEBPACK_IMPORTED_MODULE_15__.h)(_models_element_state__WEBPACK_IMPORTED_MODULE_11__.b.default))(nextNode)}))})).mapEdges((function(e){return e.update(Object(_state__WEBPACK_IMPORTED_MODULE_15__.i)(Object(_state__WEBPACK_IMPORTED_MODULE_15__.h)(_models_element_state__WEBPACK_IMPORTED_MODULE_11__.a.default)))}))}},nodeSelection=function nodeSelection(e,target){if(Object(_state__WEBPACK_IMPORTED_MODULE_15__.c)(target))return _identical__WEBPACK_IMPORTED_MODULE_13__.a;var isMultiSelect=Object(_keyboard__WEBPACK_IMPORTED_MODULE_14__.a)(e);return Object(_state__WEBPACK_IMPORTED_MODULE_15__.d)(target)&&!isMultiSelect?_identical__WEBPACK_IMPORTED_MODULE_13__.a:function(data){var predicate=isMultiSelect?function(node){return node.id!==target.id?Object(_state__WEBPACK_IMPORTED_MODULE_15__.d)(node):e.button===_common_constants__WEBPACK_IMPORTED_MODULE_10__.c.Secondary||!Object(_state__WEBPACK_IMPORTED_MODULE_15__.d)(target)}:function(node){return node.id===target.id};return data.selectNodes(predicate,target.id)}},getNodeAutomationId=function getNodeAutomationId(node){var _node$name;return"node-container-"+(null!==(_node$name=node.name)&&void 0!==_node$name?_node$name:"unnamed")+"-"+node.id},getPortAutomationId=function getPortAutomationId(port,parentNode){return"port-"+parentNode.name+"-"+parentNode.id+"-"+port.name+"-"+port.id},getNodeUid=function getNodeUid(graphId,node){return"node:"+graphId+":"+node.id},getPortUid=function getPortUid(graphId,node,port){return"port:"+graphId+":"+node.id+":"+port.id},getEdgeUid=function getEdgeUid(graphId,edge){return"edge:"+graphId+":"+edge.id}},108:function(module,__webpack_exports__,__webpack_require__){"use strict";function stopPropagation(e){e.stopPropagation()}__webpack_require__.d(__webpack_exports__,"a",(function(){return stopPropagation}))},114:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return EMPTY_CONNECT_STATE})),__webpack_require__.d(__webpack_exports__,"c",(function(){return GraphValueContext})),__webpack_require__.d(__webpack_exports__,"b",(function(){return GraphStateContext}));__webpack_require__(12);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_createGraphState__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(63),_models_GraphModel__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(180),_utils_debug__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(58);function warnGraphStateContext(){_utils_debug__WEBPACK_IMPORTED_MODULE_4__.a.warn("Missing GraphStateContext, GraphStateContext must be used as child of GraphStateStore")}var defaultGraphStateContext={get state(){return warnGraphStateContext(),_createGraphState__WEBPACK_IMPORTED_MODULE_2__.a},dispatch:function dispatch(){warnGraphStateContext()}},EMPTY_CONNECT_STATE={sourceNode:void 0,sourcePort:void 0,targetNode:void 0,targetPort:void 0,movingPoint:{x:0,y:0}},GraphValueContext=react__WEBPACK_IMPORTED_MODULE_1__.createContext(new Proxy(_models_GraphModel__WEBPACK_IMPORTED_MODULE_3__.a.empty(),{get:function get(target,prop){return console.warn("Default graph data value is being used. Please check if you forget rendering Graph component"),target[prop]}})),GraphStateContext=react__WEBPACK_IMPORTED_MODULE_1__.createContext(defaultGraphStateContext)},115:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useConst}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);function useConst(init){var ref=Object(react__WEBPACK_IMPORTED_MODULE_0__.useRef)();return void 0===ref.current&&(ref.current=init()),ref.current}},117:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return NodeModel_NodeModel}));__webpack_require__(11),__webpack_require__(66),__webpack_require__(92),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(12);var is=__webpack_require__(283);var utils_getPortPosition=__webpack_require__(181),preventSpread=__webpack_require__(188),state=__webpack_require__(28);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var NodeModel_NodeModel=function(){function NodeModel(node,portPositionCache,prev,next){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NodeModel),this.inner=void 0,this.portPositionCache=void 0,this.prev=void 0,this.next=void 0,this.inner=node,this.portPositionCache=portPositionCache,this.prev=prev,this.next=next,Object(preventSpread.a)(this)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(NodeModel,[{key:"id",get:function get(){return this.inner.id}},{key:"state",get:function get(){return this.inner.state}},{key:"shape",get:function get(){return this.inner.shape}},{key:"ports",get:function get(){return this.inner.ports}},{key:"ariaLabel",get:function get(){return this.inner.ariaLabel}},{key:"name",get:function get(){return this.inner.name}},{key:"x",get:function get(){return this.inner.x}},{key:"y",get:function get(){return this.inner.y}},{key:"automationId",get:function get(){return this.inner.automationId}},{key:"isInSearchResults",get:function get(){return this.inner.isInSearchResults}},{key:"isCurrentSearchResult",get:function get(){return this.inner.isCurrentSearchResult}},{key:"data",get:function get(){return this.inner.data}},{key:"height",get:function get(){return this.inner.height}},{key:"width",get:function get(){return this.inner.width}},{key:"getPort",value:function getPort(id){var _this$ports;return null===(_this$ports=this.ports)||void 0===_this$ports?void 0:_this$ports.find((function(port){return port.id===id}))}},{key:"link",value:function link(_ref){var prev=_ref.prev,next=_ref.next;return prev===this.prev&&next===this.next?this:new NodeModel(this.inner,this.portPositionCache,null!=prev?prev:this.prev,null!=next?next:this.next)}},{key:"updateState",value:function updateState(f){return this.update(Object(state.i)(f))}},{key:"update",value:function update(f){var node=f(this.inner);return node===this.inner?this:new NodeModel(node,new Map,this.prev,this.next)}},{key:"updateData",value:function updateData(f){return this.data?this.update((function(inner){var data=f(inner.data);return data===inner.data?inner:Object.assign({},inner,{data:data})})):this}},{key:"getPortPosition",value:function getPortPosition(portId,graphConfig){var point=this.portPositionCache.get(portId);return point||(point=Object(utils_getPortPosition.a)(this.inner,portId,graphConfig),this.portPositionCache.set(portId,point)),point}},{key:"hasPort",value:function hasPort(id){var _this$inner$ports;return Boolean(null===(_this$inner$ports=this.inner.ports)||void 0===_this$inner$ports?void 0:_this$inner$ports.find((function(port){return port.id===id})))}},{key:"updatePositionAndSize",value:function updatePositionAndSize(dummy){var x=dummy.x,y=dummy.y,width=dummy.width,height=dummy.height;return new NodeModel(Object.assign({},this.inner,{x:x,y:y,width:null!=width?width:this.inner.width,height:null!=height?height:this.inner.height}),new Map,this.prev,this.next)}},{key:"updatePorts",value:function updatePorts(f){if(!this.inner.ports)return this;var ports=function mapCow(list,f){for(var values=[],same=!0,i=0;i<list.length;i+=1){var value0=list[i],_value=f(value0,i);same=same&&Object(is.a)(value0,_value),values.push(_value)}return same?list:values}(this.inner.ports,f),node=this.inner.ports===ports?this.inner:Object.assign({},this.inner,{ports:ports});return node===this.inner?this:new NodeModel(node,new Map,this.prev,this.next)}},{key:"invalidCache",value:function invalidCache(){return new NodeModel(this.inner,new Map,this.prev,this.next)}},{key:"toJSON",value:function toJSON(){return this.inner}}],[{key:"fromJSON",value:function fromJSON(node,prev,next){return new NodeModel(node,new Map,prev,next)}}]),NodeModel}()},130:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DragController})),__webpack_require__.d(__webpack_exports__,"b",(function(){return defaultGetPositionFromEvent}));var _utils_noop__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86),_utils_scheduling__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(98);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var DragController=function(){function DragController(eventProvider,getPositionFromEvent){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DragController),this.onMove=_utils_noop__WEBPACK_IMPORTED_MODULE_0__.a,this.onEnd=_utils_noop__WEBPACK_IMPORTED_MODULE_0__.a,this.mouseMove=void 0,this.lastEvent=null,this.getPositionFromEvent=void 0,this.startX=0,this.startY=0,this.prevClientX=0,this.prevClientY=0,this.eventProvider=void 0,this.onMouseUp=function(e){_this.lastEvent=e,_this.doOnMouseUp(e),_this.lastEvent=null},this.onMouseMove=function(e){_this.lastEvent=e,e.preventDefault(),_this.mouseMove(e)},this.eventProvider=eventProvider,this.getPositionFromEvent=getPositionFromEvent,this.mouseMove=Object(_utils_scheduling__WEBPACK_IMPORTED_MODULE_1__.a)((function(e){_this.doOnMouseMove(e)}))}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(DragController,[{key:"start",value:function start(e){this.lastEvent=e;var _this$getPositionFrom=this.getPositionFromEvent(e),x=_this$getPositionFrom.x,y=_this$getPositionFrom.y;this.startX=x,this.startY=y,this.prevClientX=x,this.prevClientY=y,this.eventProvider.on("move",this.onMouseMove),this.eventProvider.on("end",this.onMouseUp)}},{key:"stop",value:function stop(){this.mouseMove.cancel(),this.eventProvider.off("move",this.onMouseMove),this.eventProvider.off("end",this.onMouseUp)}},{key:"getDelta",value:function getDelta(x,y){var clientDX=x-this.prevClientX,clientDY=y-this.prevClientY;return this.prevClientX=x,this.prevClientY=y,{x:clientDX,y:clientDY}}},{key:"getTotalDelta",value:function getTotalDelta(e){return{x:e.clientX-this.startX,y:e.clientY-this.startY}}},{key:"doOnMouseMove",value:function doOnMouseMove(e){var _this$getPositionFrom2=this.getPositionFromEvent(e),x=_this$getPositionFrom2.x,y=_this$getPositionFrom2.y,_this$getDelta=this.getDelta(x,y),dx=_this$getDelta.x,dy=_this$getDelta.y,_this$getTotalDelta=this.getTotalDelta(e),totalDX=_this$getTotalDelta.x,totalDY=_this$getTotalDelta.y;this.onMove({clientX:x,clientY:y,dx:dx,dy:dy,totalDX:totalDX,totalDY:totalDY,e:e})}},{key:"doOnMouseUp",value:function doOnMouseUp(e){e.preventDefault();var _this$getTotalDelta2=this.getTotalDelta(e),totalDX=_this$getTotalDelta2.x,totalDY=_this$getTotalDelta2.y;this.onEnd({totalDX:totalDX,totalDY:totalDY,e:e}),this.stop()}}]),DragController}();function defaultGetPositionFromEvent(e){return{x:e.clientX,y:e.clientY}}},132:function(module,__webpack_exports__,__webpack_require__){"use strict";var _hash_map__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(491);__webpack_require__.d(__webpack_exports__,"HashMap",(function(){return _hash_map__WEBPACK_IMPORTED_MODULE_0__.a})),__webpack_require__.d(__webpack_exports__,"HashMapBuilder",(function(){return _hash_map__WEBPACK_IMPORTED_MODULE_0__.b}));__webpack_require__(492);var _ordered_map__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(493);__webpack_require__.d(__webpack_exports__,"OrderedMap",(function(){return _ordered_map__WEBPACK_IMPORTED_MODULE_2__.a}));__webpack_require__(494)},142:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return checkRectIntersect})),__webpack_require__.d(__webpack_exports__,"d",(function(){return isPointInRect})),__webpack_require__.d(__webpack_exports__,"b",(function(){return distance})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getLinearFunction}));__webpack_require__(495),__webpack_require__(151);var checkRectIntersect=function checkRectIntersect(rectA,rectB){var isALeftOfB=rectA.maxX<rectB.minX,isARightOfB=rectA.minX>rectB.maxX,isABelowB=rectA.minY>rectB.maxY,isAAboveB=rectA.maxY<rectB.minY;return!(isALeftOfB||isARightOfB||isABelowB||isAAboveB)},isPointInRect=function isPointInRect(rect,point){var minX=rect.minX,minY=rect.minY,maxX=rect.maxX,maxY=rect.maxY,x=point.x,y=point.y;return x>minX&&x<maxX&&y>minY&&y<maxY},square=function square(x){return Math.pow(x,2)},distance=function distance(x1,y1,x2,y2){return Math.sqrt(square(x2-x1)+square(y2-y1))},getLinearFunction=function getLinearFunction(x1,y1,x2,y2){return x1===x2?function(){return Number.MAX_SAFE_INTEGER}:function(x){return(y2-y1)/(x2-x1)*x+(y1*x2-y2*x1)/(x2-x1)}}},144:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return MenuType})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ContextMenuConfig})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ContextMenuConfigContext}));__webpack_require__(12);var MenuType,react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}!function(MenuType){MenuType.Node="node",MenuType.Edge="edge",MenuType.Port="port",MenuType.Canvas="canvas",MenuType.Multi="multi"}(MenuType||(MenuType={}));var ContextMenuConfig=function(){function ContextMenuConfig(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ContextMenuConfig),this.contextMenu={},this.contextMenuProps=void 0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ContextMenuConfig,[{key:"registerContextMenu",value:function registerContextMenu(props){this.contextMenuProps=Object.assign({},props)}},{key:"registerMenu",value:function registerMenu(element,menuType){this.contextMenu[menuType]=element}},{key:"getMenu",value:function getMenu(menuType){if(this.contextMenuProps&&this.contextMenu[menuType]){var _this$contextMenuProp=this.contextMenuProps,className=_this$contextMenuProp.className,styles=_this$contextMenuProp.styles;return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:className,style:styles},this.contextMenu[menuType])}return null}}]),ContextMenuConfig}(),ContextMenuConfigContext=react__WEBPACK_IMPORTED_MODULE_1__.createContext(new ContextMenuConfig)},145:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return pushHistory})),__webpack_require__.d(__webpack_exports__,"d",(function(){return undo})),__webpack_require__.d(__webpack_exports__,"b",(function(){return redo})),__webpack_require__.d(__webpack_exports__,"c",(function(){return resetUndoStack}));var _identical__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(70),pushHistory=function pushHistory(history,data){var mapPresent=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_identical__WEBPACK_IMPORTED_MODULE_0__.a;return{present:data,past:{next:history.past,value:mapPresent(history.present)},future:null}},undo=function undo(history){return history.past?{present:history.past.value,past:history.past.next,future:{next:history.future,value:history.present}}:history},redo=function redo(history){return history.future?{present:history.future.value,past:{next:history.past,value:history.present},future:history.future.next}:history},resetUndoStack=function resetUndoStack(data){return{present:data,future:null,past:null}}},147:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return rect})),__webpack_require__.d(__webpack_exports__,"d",(function(){return line})),__webpack_require__.d(__webpack_exports__,"c",(function(){return defaultPort})),__webpack_require__.d(__webpack_exports__,"a",(function(){return defaultClipboard_DefaultClipboard})),__webpack_require__.d(__webpack_exports__,"b",(function(){return DefaultStorage}));__webpack_require__(0);var element_state=__webpack_require__(18),state=__webpack_require__(28),layout=__webpack_require__(69),constants=__webpack_require__(21),jsx_runtime=(__webpack_require__(11),__webpack_require__(2)),RectComponent_RectComponent=function RectComponent(props){var style=props.style,node=props.node,width=props.width,height=props.height,textY=props.textY,comment=node.data&&node.data.comment?node.data.comment:"",isEditing=Object(state.c)(node);return Object(jsx_runtime.jsxs)("g",{children:[Object(jsx_runtime.jsx)("rect",{width:width,height:height,x:node.x,y:node.y,style:style,rx:style.borderRadius}),Object(jsx_runtime.jsx)("text",{x:node.x,y:textY,fontSize:12,children:node.name}),node.data&&node.data.comment&&!isEditing&&Object(jsx_runtime.jsx)("text",{x:node.x,y:textY+20,fontSize:12,className:"comment-"+node.id,children:node.data.comment}),isEditing&&Object(jsx_runtime.jsx)("foreignObject",{x:node.x,y:textY,height:height/2.5,width:width-5,children:Object(jsx_runtime.jsx)("input",{value:comment,placeholder:"Input your comment here"})})]},node.id)};RectComponent_RectComponent.displayName="RectComponent";try{RectComponent_RectComponent.displayName="RectComponent",RectComponent_RectComponent.__docgenInfo={description:"",displayName:"RectComponent",props:{style:{defaultValue:null,description:"",name:"style",required:!0,type:{name:"CSSProperties"}},node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"ICanvasNode<any, unknown>"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},textY:{defaultValue:null,description:"",name:"textY",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/built-in/RectComponent.tsx#RectComponent"]={docgenInfo:RectComponent_RectComponent.__docgenInfo,name:"RectComponent",path:"src/built-in/RectComponent.tsx#RectComponent"})}catch(__react_docgen_typescript_loader_error){}var rect={getMinHeight:function getMinHeight(){return 150},getMinWidth:function getMinWidth(){return 150},render:function render(args){var node=args.model,width=Object(layout.d)(rect,node),height=Object(layout.c)(rect,node),style=Object(state.b)(element_state.b.selected|element_state.b.activated)(node.state)?{fill:constants.f.nodeActivateFill,stroke:constants.f.nodeActivateStroke}:{fill:constants.f.nodeFill,fillOpacity:.1,stroke:constants.f.nodeStroke,borderRadius:"5"},textY=node.y+height/3;return Object(jsx_runtime.jsx)(RectComponent_RectComponent,{style:style,node:node,width:width,height:height,textY:textY})}},getCurvePathD=__webpack_require__(267),line={render:function render(args){var edge=args.model,style={cursor:"crosshair",stroke:Object(state.b)(element_state.a.selected)(edge.state)?constants.f.edgeColorSelected:constants.f.edgeColor,strokeWidth:"2"};return Object(jsx_runtime.jsx)("path",{d:Object(getCurvePathD.a)(args.x2,args.x1,args.y2,args.y1),fill:"none",style:style,id:"edge"+edge.id},edge.id)}};function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var defaultPort=new(function(){function DefaultPort(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultPort)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(DefaultPort,[{key:"getStyle",value:function getStyle(port,parentNode,data,connectedAsSource,connectedAsTarget){var stroke=constants.f.portStroke,fill=constants.f.portFill;return(connectedAsSource||connectedAsTarget)&&(fill=constants.f.connectedPortColor),Object(state.b)(element_state.c.activated)(port.state)&&(fill=constants.f.primaryColor),{stroke:stroke,fill:fill}}},{key:"getIsConnectable",value:function getIsConnectable(){return!0}},{key:"render",value:function render(args){var port=args.model,data=args.data,parentNode=args.parentNode,connectedAsSource=data.isPortConnectedAsSource(parentNode.id,port.id),connectedAsTarget=data.isPortConnectedAsTarget(parentNode.id,port.id),style=this.getStyle(port,parentNode,data,connectedAsSource,connectedAsTarget),x=args.x,y=args.y,polygonPoints=x-5+" "+y+", "+(x+7)+" "+y+", "+(x+1)+" "+(y+8);return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:connectedAsTarget?Object(jsx_runtime.jsx)("polygon",{points:polygonPoints,style:style}):Object(jsx_runtime.jsx)("circle",{r:5,cx:x,cy:y,style:style},args.parentNode.id+"-"+args.model.id)})}}]),DefaultPort}()),v4=(__webpack_require__(20),__webpack_require__(12),__webpack_require__(92),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(934));function defaultClipboard_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var defaultClipboard_DefaultClipboard=function(){function DefaultClipboard(storage){!function defaultClipboard_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultClipboard),this.storage=void 0,this.storage=storage}return function defaultClipboard_createClass(Constructor,protoProps,staticProps){return protoProps&&defaultClipboard_defineProperties(Constructor.prototype,protoProps),staticProps&&defaultClipboard_defineProperties(Constructor,staticProps),Constructor}(DefaultClipboard,[{key:"write",value:function write(data){this.storage.setItem("graph-clipboard",JSON.stringify({nodes:data.nodes.map((function(n){return Object.assign({},n,{data:{}})})),edges:data.edges.map((function(e){return Object.assign({},e,{data:{}})}))}))}},{key:"read",value:function read(){var str=this.storage.getItem("graph-clipboard");if(!str)return null;try{var _data=JSON.parse(str),nodeIdHash=new Map;return{nodes:_data.nodes.map((function(n){var newId=v4.a();return nodeIdHash.set(n.id,newId),Object.assign({},n,{x:n.x+constants.a,y:n.y+constants.a,id:newId})})),edges:_data.edges.map((function(e){return Object.assign({},e,{id:v4.a(),source:nodeIdHash.get(e.source)||"",target:nodeIdHash.get(e.target)||""})}))}}catch(error){return null}}}]),DefaultClipboard}();__webpack_require__(27);function defaultStorage_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var DefaultStorage=function(){function DefaultStorage(){!function defaultStorage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultStorage),this.items=void 0,this.key=function(){return"DefaultLocalStorage"},this.items={}}return function defaultStorage_createClass(Constructor,protoProps,staticProps){return protoProps&&defaultStorage_defineProperties(Constructor.prototype,protoProps),staticProps&&defaultStorage_defineProperties(Constructor,staticProps),Constructor}(DefaultStorage,[{key:"length",get:function get(){return Object.keys(this.items||{}).length}},{key:"clear",value:function clear(){this.items={}}},{key:"setItem",value:function setItem(key,data){this.items[key]=data}},{key:"getItem",value:function getItem(key){return this.items[key]}},{key:"removeItem",value:function removeItem(key){this.items[key]=void 0}}]),DefaultStorage}();__webpack_require__(47)},148:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return emptyDummyNodes}));var emptyDummyNodes=function emptyDummyNodes(){return{dx:0,dy:0,dWidth:0,dHeight:0,alignedDX:void 0,alignedDY:void 0,nodes:[],isVisible:!1}}},149:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getAlignmentLines})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getAutoAlignDisplacement}));__webpack_require__(34),__webpack_require__(20),__webpack_require__(12),__webpack_require__(66),__webpack_require__(30),__webpack_require__(7),__webpack_require__(14),__webpack_require__(6),__webpack_require__(16),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(19),__webpack_require__(15),__webpack_require__(11);var uuid__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(934),_layout__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(69);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var getAlignmentLines=function getAlignmentLines(draggingNodes,nodes,graphConfig){var threshold=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,dummyDraggingNodeHW=getDummyDraggingNode(draggingNodes),closestNodes=getClosestNodes(dummyDraggingNodeHW,draggingNodes,nodes,graphConfig,threshold);return getLines(dummyDraggingNodeHW,closestNodes,draggingNodes.length)},getAutoAlignDisplacement=function getAutoAlignDisplacement(alignmentLines,nodes,graphConfig,alignDirection){var min=1/0,res=0,nodeHW=getDummyDraggingNode(nodes),widthOrHeight="x"===alignDirection?nodeHW.width||0:nodeHW.height||0;return alignmentLines.forEach((function(item){var alignLine;if("x"===alignDirection&&item.x1===item.x2)alignLine=item.x1;else{if("y"!==alignDirection||item.y1!==item.y2)return;alignLine=item.y1}var distance1=nodeHW[alignDirection]-alignLine,distanceMiddle=nodeHW[alignDirection]+(widthOrHeight||0)/2-alignLine,distance2=nodeHW[alignDirection]+(widthOrHeight||0)-alignLine;Math.abs(distance1)<min&&(min=Math.abs(distance1),res=distance1>0?-min:min),Math.abs(distanceMiddle)<min&&(min=Math.abs(distanceMiddle),res=distanceMiddle>0?-min:min),Math.abs(distance2)<min&&(min=Math.abs(distance2),res=distance2>0?-min:min)})),res},getMinCoordinate=function getMinCoordinate(nodes,field){if(nodes.length)return Math.min.apply(Math,_toConsumableArray(nodes.map((function(n){return n[field]}))))},getMaxCoordinate=function getMaxCoordinate(nodes,field){if(nodes.length)return Math.max.apply(Math,_toConsumableArray(nodes.map((function(n){return n[field]+("y"===field?n.height||0:n.width||0)}))))},setSizeForNode=function setSizeForNode(node,graphConfig){return Object.assign({},node,Object(_layout__WEBPACK_IMPORTED_MODULE_16__.b)(node,graphConfig))},getDummyDraggingNode=function getDummyDraggingNode(draggingNodes){var _getBoundingBoxOfNode=function getBoundingBoxOfNodes(nodes){var minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0;return nodes.forEach((function(n){var tempMinX=n.x,tempMinY=n.y,tempMaxX=n.x+(n.width||0),tempMaxY=n.y+(n.height||0);tempMinX<minX&&(minX=tempMinX),tempMinY<minY&&(minY=tempMinY),tempMaxX>maxX&&(maxX=tempMaxX),tempMaxY>maxY&&(maxY=tempMaxY)})),{x:minX,y:minY,width:maxX-minX,height:maxY-minY}}(draggingNodes),x=_getBoundingBoxOfNode.x,y=_getBoundingBoxOfNode.y,width=_getBoundingBoxOfNode.width,height=_getBoundingBoxOfNode.height;return{id:Object(uuid__WEBPACK_IMPORTED_MODULE_15__.a)(),x:x,y:y,width:width,height:height}},getClosestNodes=function getClosestNodes(dummyDraggingNode,draggingNodes,nodes,graphConfig){var threshold=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,resX=[],resY=[],draggingNodeX=dummyDraggingNode.x,draggingNodeY=dummyDraggingNode.y,_dummyDraggingNode$wi=dummyDraggingNode.width,draggingNodeWidth=void 0===_dummyDraggingNode$wi?0:_dummyDraggingNode$wi,_dummyDraggingNode$he=dummyDraggingNode.height,draggingNodeHeight=void 0===_dummyDraggingNode$he?0:_dummyDraggingNode$he,minDistanceX=threshold,minDistanceY=threshold;return nodes.forEach((function(node){if(!draggingNodes.find((function(dn){return dn.id===node.id}))){var nodeHW=setSizeForNode(node,graphConfig),_nodeHW$width=nodeHW.width,nodeWidth=void 0===_nodeHW$width?0:_nodeHW$width,_nodeHW$height=nodeHW.height,nodeHeight=void 0===_nodeHW$height?0:_nodeHW$height;[draggingNodeX,draggingNodeX+draggingNodeWidth/2,draggingNodeX+draggingNodeWidth].forEach((function(draggingNodeValue,alignPos){resX[alignPos]||(resX[alignPos]={}),resX[alignPos].closestNodes||(resX[alignPos].closestNodes=[]),[nodeHW.x,nodeHW.x+nodeWidth/2,nodeHW.x+nodeWidth].forEach((function(comparedValue){var _resX$alignPos$closes,distance=Math.abs(draggingNodeValue-comparedValue);distance<=minDistanceX&&(null===(_resX$alignPos$closes=resX[alignPos].closestNodes)||void 0===_resX$alignPos$closes||_resX$alignPos$closes.push(nodeHW),resX[alignPos].alignCoordinateValue=comparedValue,minDistanceX=distance)}))})),[draggingNodeY,draggingNodeY+draggingNodeHeight/2,draggingNodeY+draggingNodeHeight].forEach((function(draggingNodeValue,alignPos){resY[alignPos]||(resY[alignPos]={}),resY[alignPos].closestNodes||(resY[alignPos].closestNodes=[]),[nodeHW.y,nodeHW.y+nodeHeight/2,nodeHW.y+nodeHeight].forEach((function(comparedValue){var _resY$alignPos$closes,distance=Math.abs(draggingNodeValue-comparedValue);distance<=minDistanceY&&(null===(_resY$alignPos$closes=resY[alignPos].closestNodes)||void 0===_resY$alignPos$closes||_resY$alignPos$closes.push(nodeHW),resY[alignPos].alignCoordinateValue=comparedValue,minDistanceY=distance)}))}))}})),{closestX:resX,closestY:resY}},getLines=function getLines(draggingNode,closestNodes){var numberOfDraggingNodes=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,xLines=[],yLines=[],closestXNodes=closestNodes.closestX,closestYNodes=closestNodes.closestY;return closestXNodes.forEach((function(item,alignPos){var _item$closestNodes;if(!(void 0===item.alignCoordinateValue||1===alignPos&&(xLines.length||numberOfDraggingNodes>1))){var sameXNodes=[],x=item.alignCoordinateValue;null===(_item$closestNodes=item.closestNodes)||void 0===_item$closestNodes||_item$closestNodes.forEach((function(node){node.x!==x&&node.x+(node.width||0)/2!==x&&node.x+(node.width||0)!==x||sameXNodes.push(node)}));var y1=getMinCoordinate([draggingNode].concat(sameXNodes),"y"),y2=getMaxCoordinate([draggingNode].concat(sameXNodes),"y");void 0!==y1&&void 0!==y2&&xLines.push({x1:x,y1:y1,x2:x,y2:y2,visible:!0})}})),closestYNodes.forEach((function(item,alignPos){var _item$closestNodes2;if(!(void 0===item.alignCoordinateValue||1===alignPos&&(yLines.length||numberOfDraggingNodes>1))){var sameYNodes=[],y=item.alignCoordinateValue;null===(_item$closestNodes2=item.closestNodes)||void 0===_item$closestNodes2||_item$closestNodes2.forEach((function(node){node.y!==y&&node.y+(node.height||0)/2!==y&&node.y+(node.height||0)!==y||sameYNodes.push(node)}));var x1=getMinCoordinate([draggingNode].concat(sameYNodes),"x"),x2=getMaxCoordinate([draggingNode].concat(sameYNodes),"x");void 0!==x1&&void 0!==x2&&yLines.push({x1:x1,y1:y,x2:x2,y2:y,visible:!0})}})),[].concat(xLines,yLines)}},162:function(module,__webpack_exports__,__webpack_require__){"use strict";function clamp(min,max,value){return min>value?min:max<value?max:value}__webpack_require__.d(__webpack_exports__,"a",(function(){return clamp}))},178:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GraphConfigBuilder}));__webpack_require__(92),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9);var _built_in__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(147),_built_in_defaultGroup__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(282),_GraphConfig__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(268);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var GraphConfigBuilder=function(){function GraphConfigBuilder(defaultEdgeShape,defaultNodeShape,defaultPortShape,defaultGroupShape,nodeConfigMap,edgeConfigMap,portConfigMap,groupConfigMap,clipboard){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GraphConfigBuilder),this.defaultEdgeShape=void 0,this.defaultNodeShape=void 0,this.defaultPortShape=void 0,this.defaultGroupShape=void 0,this.nodeConfigMap=void 0,this.edgeConfigMap=void 0,this.portConfigMap=void 0,this.groupConfigMap=void 0,this.clipboard=void 0,this.defaultEdgeShape=defaultEdgeShape,this.defaultNodeShape=defaultNodeShape,this.defaultPortShape=defaultPortShape,this.defaultGroupShape=defaultGroupShape,this.nodeConfigMap=nodeConfigMap,this.edgeConfigMap=edgeConfigMap,this.portConfigMap=portConfigMap,this.groupConfigMap=groupConfigMap,this.clipboard=clipboard}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(GraphConfigBuilder,[{key:"withDefaultEdgeShape",value:function withDefaultEdgeShape(shape){return this.defaultEdgeShape=shape,this}},{key:"withDefaultNodeShape",value:function withDefaultNodeShape(shape){return this.defaultNodeShape=shape,this}},{key:"withDefaultPortShape",value:function withDefaultPortShape(shape){return this.defaultPortShape=shape,this}},{key:"withDefaultGroupShape",value:function withDefaultGroupShape(shape){return this.defaultGroupShape=shape,this}},{key:"withClipboard",value:function withClipboard(clipboard){return this.clipboard=clipboard,this}},{key:"registerNode",value:function registerNode(name,config){return this.nodeConfigMap.set(name,config),this}},{key:"registerEdge",value:function registerEdge(name,config){return this.edgeConfigMap.set(name,config),this}},{key:"registerPort",value:function registerPort(name,config){return this.portConfigMap.set(name,config),this}},{key:"registerGroup",value:function registerGroup(name,config){return this.groupConfigMap.set(name,config),this}},{key:"build",value:function build(){return new _GraphConfig__WEBPACK_IMPORTED_MODULE_7__.a(this.defaultEdgeShape,this.defaultNodeShape,this.defaultPortShape,this.defaultGroupShape,new Map(this.nodeConfigMap),new Map(this.edgeConfigMap),new Map(this.portConfigMap),new Map(this.groupConfigMap),this.clipboard)}}],[{key:"default",value:function _default(){return new GraphConfigBuilder("default","default","default","default",(new Map).set("default",_built_in__WEBPACK_IMPORTED_MODULE_5__.e),(new Map).set("default",_built_in__WEBPACK_IMPORTED_MODULE_5__.d),(new Map).set("default",_built_in__WEBPACK_IMPORTED_MODULE_5__.c),(new Map).set("default",_built_in_defaultGroup__WEBPACK_IMPORTED_MODULE_6__.a),new _built_in__WEBPACK_IMPORTED_MODULE_5__.a(new _built_in__WEBPACK_IMPORTED_MODULE_5__.b))}},{key:"from",value:function from(graphConfig){return new GraphConfigBuilder(graphConfig.defaultEdgeShape,graphConfig.defaultNodeShape,graphConfig.defaultPortShape,graphConfig.defaultGroupShape,new Map(graphConfig.nodeConfigMap),new Map(graphConfig.edgeConfigMap),new Map(graphConfig.portConfigMap),new Map(graphConfig.groupConfigMap),graphConfig.clipboard)}}]),GraphConfigBuilder}()},179:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getNodeConfig}));var _debug__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(58),getNodeConfig=function getNodeConfig(node,graphConfig){var nodeConfig=graphConfig.getNodeConfigByName(node.shape);if(nodeConfig)return nodeConfig;_debug__WEBPACK_IMPORTED_MODULE_0__.a.warn("invalid shape in node "+JSON.stringify(node))}},18:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return SELECTED})),__webpack_require__.d(__webpack_exports__,"a",(function(){return GraphEdgeState})),__webpack_require__.d(__webpack_exports__,"b",(function(){return GraphNodeState})),__webpack_require__.d(__webpack_exports__,"c",(function(){return GraphPortState}));var GraphEdgeState,GraphNodeState,GraphNodeStateConst,GraphPortState,SELECTED=1;!function(GraphEdgeState){GraphEdgeState[GraphEdgeState.default=0]="default",GraphEdgeState[GraphEdgeState.selected=SELECTED]="selected",GraphEdgeState[GraphEdgeState.activated=2]="activated",GraphEdgeState[GraphEdgeState.connectedToSelected=4]="connectedToSelected",GraphEdgeState[GraphEdgeState.unconnectedToSelected=8]="unconnectedToSelected",GraphEdgeState[GraphEdgeState.editing=16]="editing"}(GraphEdgeState||(GraphEdgeState={})),function(GraphNodeState){GraphNodeState[GraphNodeState.default=0]="default",GraphNodeState[GraphNodeState.selected=SELECTED]="selected",GraphNodeState[GraphNodeState.activated=2]="activated",GraphNodeState[GraphNodeState.editing=4]="editing",GraphNodeState[GraphNodeState.connectedToSelected=8]="connectedToSelected",GraphNodeState[GraphNodeState.unconnectedToSelected=16]="unconnectedToSelected"}(GraphNodeState||(GraphNodeState={})),function(GraphNodeStateConst){GraphNodeStateConst.default="default",GraphNodeStateConst.selected="selected",GraphNodeStateConst.activated="activated",GraphNodeStateConst.editing="editing",GraphNodeStateConst.connectedToSelected="connectedToSelected",GraphNodeStateConst.unconnectedToSelected="unconnectedToSelected"}(GraphNodeStateConst||(GraphNodeStateConst={})),function(GraphPortState){GraphPortState[GraphPortState.default=0]="default",GraphPortState[GraphPortState.selected=SELECTED]="selected",GraphPortState[GraphPortState.activated=2]="activated",GraphPortState[GraphPortState.connecting=4]="connecting",GraphPortState[GraphPortState.connectingAsTarget=8]="connectingAsTarget"}(GraphPortState||(GraphPortState={}))},180:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GraphModel}));__webpack_require__(34),__webpack_require__(923),__webpack_require__(56),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(12),__webpack_require__(20),__webpack_require__(19),__webpack_require__(92),__webpack_require__(15),__webpack_require__(11),__webpack_require__(7),__webpack_require__(14),__webpack_require__(16);var _collections__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(132),_utils_graphDataUtils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(106),_utils_preventSpread__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(188),_utils_state__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(28),_EdgeModel__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(215),_element_state__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(18),_NodeModel__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(117);function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var GraphModel=function(){function GraphModel(init){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GraphModel),this.nodes=void 0,this.edges=void 0,this.groups=void 0,this.head=void 0,this.tail=void 0,this.edgesBySource=void 0,this.edgesByTarget=void 0,this.selectedNodes=void 0,this.nodes=init.nodes,this.edges=init.edges,this.groups=init.groups,this.head=init.head,this.tail=init.tail,this.edgesBySource=init.edgesBySource,this.edgesByTarget=init.edgesByTarget,this.selectedNodes=init.selectedNodes,Object(_utils_preventSpread__WEBPACK_IMPORTED_MODULE_18__.a)(this)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(GraphModel,[{key:"getNavigationFirstNode",value:function getNavigationFirstNode(){if(void 0!==this.head)return this.nodes.get(this.head)}},{key:"updateNode",value:function updateNode(id,f){var _this$edgesBySource$g,_this$edgesByTarget$g,nodes=this.nodes.update(id,(function(node){return node.update(f)}));if(nodes===this.nodes)return this;var edges=this.edges.mutate();return null===(_this$edgesBySource$g=this.edgesBySource.get(id))||void 0===_this$edgesBySource$g||_this$edgesBySource$g.forEach((function(edgeIds){edgeIds.forEach((function(edgeId){Object(_utils_graphDataUtils__WEBPACK_IMPORTED_MODULE_17__.j)(edges,edgeId)}))})),null===(_this$edgesByTarget$g=this.edgesByTarget.get(id))||void 0===_this$edgesByTarget$g||_this$edgesByTarget$g.forEach((function(edgeIds){edgeIds.forEach((function(edgeId){Object(_utils_graphDataUtils__WEBPACK_IMPORTED_MODULE_17__.j)(edges,edgeId)}))})),this.merge({nodes:nodes,edges:edges.finish()})}},{key:"updateNodeData",value:function updateNodeData(id,f){return this.merge({nodes:this.nodes.update(id,(function(node){return node.updateData(f)}))})}},{key:"updatePort",value:function updatePort(nodeId,portId,f){var nodes=this.nodes.update(nodeId,(function(node){return node.updatePorts((function(port){return port.id===portId?f(port):port}))}));return this.merge({nodes:nodes})}},{key:"insertNode",value:function insertNode(node){var nodes=this.nodes.mutate().set(node.id,_NodeModel__WEBPACK_IMPORTED_MODULE_22__.a.fromJSON(node,this.tail,void 0));return this.tail&&!this.nodes.has(node.id)&&nodes.update(this.tail,(function(tail){return tail.link({next:node.id})})),this.merge({nodes:nodes.finish(),head:0===this.nodes.size?node.id:this.head,tail:node.id})}},{key:"deleteItems",value:function deleteItems(predicate){for(var _first,_prev3,prev,deleted=new Set,nodes=this.nodes.mutate(),first=void 0===this.head?void 0:this.nodes.get(this.head),node=first,edgesBySource=this.edgesBySource.mutate(),edgesByTarget=this.edgesByTarget.mutate();void 0!==node;){var _predicate$node,next=node.next?this.nodes.get(node.next):void 0;null!==(_predicate$node=predicate.node)&&void 0!==_predicate$node&&_predicate$node.call(predicate,node.inner)?(nodes.update(node.id,(function(current){var _prev2;return current.link({prev:null===(_prev2=prev)||void 0===_prev2?void 0:_prev2.id}).update((function(n){return Object(_utils_state__WEBPACK_IMPORTED_MODULE_19__.b)(_element_state__WEBPACK_IMPORTED_MODULE_21__.b.editing)(n.state)?n:Object.assign({},n,{state:_element_state__WEBPACK_IMPORTED_MODULE_21__.b.default})}))})),prev=node):(nodes.delete(node.id),edgesBySource.delete(node.id),edgesByTarget.delete(node.id),deleted.add(node.id),prev&&nodes.update(prev.id,(function(prevNode){var _node;return prevNode.link({next:null===(_node=node)||void 0===_node?void 0:_node.next})})),next&&nodes.update(next.id,(function(nextNode){var _prev;return nextNode.link({prev:null===(_prev=prev)||void 0===_prev?void 0:_prev.id})})),node===first&&(first=next)),node=next}var edges=this.edges.mutate();return this.edges.forEach((function(edge){var _predicate$edge,_predicate$edge2;deleted.has(edge.source)||deleted.has(edge.target)||null!==(_predicate$edge=null===(_predicate$edge2=predicate.edge)||void 0===_predicate$edge2?void 0:_predicate$edge2.call(predicate,edge))&&void 0!==_predicate$edge&&!_predicate$edge?(edges.delete(edge.id),deleteEdgeByPort(edgesBySource,edge.id,edge.source,edge.sourcePortId),deleteEdgeByPort(edgesByTarget,edge.id,edge.target,edge.targetPortId)):edges.update(edge.id,(function(e){return e.update(Object(_utils_state__WEBPACK_IMPORTED_MODULE_19__.i)(Object(_utils_state__WEBPACK_IMPORTED_MODULE_19__.h)(_element_state__WEBPACK_IMPORTED_MODULE_21__.a.default)))}))})),this.merge({nodes:nodes.finish(),edges:edges.finish(),head:null===(_first=first)||void 0===_first?void 0:_first.id,tail:null===(_prev3=prev)||void 0===_prev3?void 0:_prev3.id,edgesBySource:edgesBySource.finish(),edgesByTarget:edgesByTarget.finish()})}},{key:"insertEdge",value:function insertEdge(edge){if(this.isEdgeExist(edge.source,edge.sourcePortId,edge.target,edge.targetPortId)||!this.nodes.has(edge.source)||!this.nodes.has(edge.target))return this;var edgesBySource=setEdgeByPort(this.edgesBySource,edge.id,edge.source,edge.sourcePortId),edgesByTarget=setEdgeByPort(this.edgesByTarget,edge.id,edge.target,edge.targetPortId);return this.merge({nodes:this.nodes.update(edge.source,(function(node){return node.invalidCache()})).update(edge.target,(function(node){return node.invalidCache()})),edges:this.edges.set(edge.id,_EdgeModel__WEBPACK_IMPORTED_MODULE_20__.a.fromJSON(edge)).map((function(e){return e.updateState(Object(_utils_state__WEBPACK_IMPORTED_MODULE_19__.h)(_element_state__WEBPACK_IMPORTED_MODULE_21__.a.default))})),edgesBySource:edgesBySource,edgesByTarget:edgesByTarget})}},{key:"updateEdge",value:function updateEdge(id,f){return this.merge({edges:this.edges.update(id,(function(e){return e.update(f)}))})}},{key:"deleteEdge",value:function deleteEdge(id){var edge=this.edges.get(id);return edge?this.merge({edges:this.edges.delete(id),edgesBySource:deleteEdgeByPort(this.edgesBySource,edge.id,edge.source,edge.sourcePortId),edgesByTarget:deleteEdgeByPort(this.edgesByTarget,edge.id,edge.target,edge.targetPortId)}):this}},{key:"updateNodesPositionAndSize",value:function updateNodesPositionAndSize(dummies){var _this=this,updates=new Set,nodes=this.nodes.mutate(),edges=this.edges.mutate();return dummies.forEach((function(dummy){var _this$edgesBySource$g2,_this$edgesByTarget$g2;updates.add(dummy.id),nodes.update(dummy.id,(function(node){return node.updatePositionAndSize(dummy)})),null===(_this$edgesBySource$g2=_this.edgesBySource.get(dummy.id))||void 0===_this$edgesBySource$g2||_this$edgesBySource$g2.forEach((function(ids){ids.forEach((function(id){Object(_utils_graphDataUtils__WEBPACK_IMPORTED_MODULE_17__.j)(edges,id)}))})),null===(_this$edgesByTarget$g2=_this.edgesByTarget.get(dummy.id))||void 0===_this$edgesByTarget$g2||_this$edgesByTarget$g2.forEach((function(ids){ids.forEach((function(id){Object(_utils_graphDataUtils__WEBPACK_IMPORTED_MODULE_17__.j)(edges,id)}))}))})),this.merge({nodes:nodes.finish(),edges:edges.finish()})}},{key:"mapNodes",value:function mapNodes(f){return this.merge({nodes:this.nodes.map(f)})}},{key:"mapEdges",value:function mapEdges(f){return this.merge({edges:this.edges.map(f)})}},{key:"selectNodes",value:function selectNodes(predicate,topNode){var selected=new Set,nodes=this.nodes.map((function(node){var isNodeSelected=predicate(node.inner);return isNodeSelected&&selected.add(node.id),node.updatePorts(Object(_utils_state__WEBPACK_IMPORTED_MODULE_19__.i)(Object(_utils_state__WEBPACK_IMPORTED_MODULE_19__.h)(_element_state__WEBPACK_IMPORTED_MODULE_21__.c.default))).updateState(Object(_utils_state__WEBPACK_IMPORTED_MODULE_19__.g)(isNodeSelected?_element_state__WEBPACK_IMPORTED_MODULE_21__.b.selected:_element_state__WEBPACK_IMPORTED_MODULE_21__.b.unconnectedToSelected))})).mutate();if(0===selected.size)this.nodes.forEach((function(n){return nodes.update(n.id,(function(it){return it.updateState(Object(_utils_state__WEBPACK_IMPORTED_MODULE_19__.h)(_element_state__WEBPACK_IMPORTED_MODULE_21__.b.default))}))}));else if(topNode){var n=nodes.get(topNode);n&&(nodes.delete(topNode),nodes.set(n.id,n))}var setConnected=function setConnected(id){nodes.update(id,(function(node){return node.update(Object(_utils_state__WEBPACK_IMPORTED_MODULE_19__.i)(Object(_utils_state__WEBPACK_IMPORTED_MODULE_19__.h)(Object(_utils_state__WEBPACK_IMPORTED_MODULE_19__.d)(node)?_element_state__WEBPACK_IMPORTED_MODULE_21__.b.selected:_element_state__WEBPACK_IMPORTED_MODULE_21__.b.connectedToSelected)))}))},edges=selected.size?this.edges.map((function(edge){var state=_element_state__WEBPACK_IMPORTED_MODULE_21__.a.unconnectedToSelected;return selected.has(edge.source)&&(setConnected(edge.target),state=_element_state__WEBPACK_IMPORTED_MODULE_21__.a.connectedToSelected),selected.has(edge.target)&&(setConnected(edge.source),state=_element_state__WEBPACK_IMPORTED_MODULE_21__.a.connectedToSelected),edge.update(Object(_utils_state__WEBPACK_IMPORTED_MODULE_19__.i)(Object(_utils_state__WEBPACK_IMPORTED_MODULE_19__.h)(state)))})):this.edges.map((function(edge){return edge.updateState(Object(_utils_state__WEBPACK_IMPORTED_MODULE_19__.h)(_element_state__WEBPACK_IMPORTED_MODULE_21__.a.default))}));return this.merge({nodes:nodes.finish(),edges:edges,selectedNodes:selected})}},{key:"getEdgesBySource",value:function getEdgesBySource(nodeId,portId){var _this$edgesBySource$g3;return null===(_this$edgesBySource$g3=this.edgesBySource.get(nodeId))||void 0===_this$edgesBySource$g3?void 0:_this$edgesBySource$g3.get(portId)}},{key:"getEdgesByTarget",value:function getEdgesByTarget(nodeId,portId){var _this$edgesByTarget$g3;return null===(_this$edgesByTarget$g3=this.edgesByTarget.get(nodeId))||void 0===_this$edgesByTarget$g3?void 0:_this$edgesByTarget$g3.get(portId)}},{key:"isPortConnectedAsSource",value:function isPortConnectedAsSource(nodeId,portId){var _this$getEdgesBySourc,_this$getEdgesBySourc2;return(null!==(_this$getEdgesBySourc=null===(_this$getEdgesBySourc2=this.getEdgesBySource(nodeId,portId))||void 0===_this$getEdgesBySourc2?void 0:_this$getEdgesBySourc2.size)&&void 0!==_this$getEdgesBySourc?_this$getEdgesBySourc:0)>0}},{key:"isPortConnectedAsTarget",value:function isPortConnectedAsTarget(nodeId,portId){var _this$getEdgesByTarge,_this$getEdgesByTarge2;return(null!==(_this$getEdgesByTarge=null===(_this$getEdgesByTarge2=this.getEdgesByTarget(nodeId,portId))||void 0===_this$getEdgesByTarge2?void 0:_this$getEdgesByTarge2.size)&&void 0!==_this$getEdgesByTarge?_this$getEdgesByTarge:0)>0}},{key:"shallow",value:function shallow(){return this.merge({})}},{key:"toJSON",value:function toJSON(){for(var nodes=[],current=this.head&&this.nodes.get(this.head);current;)nodes.push(current.inner),current=current.next&&this.nodes.get(current.next);return{nodes:nodes,edges:Array.from(this.edges.values()).map((function(it){return it.inner}))}}},{key:"isEdgeExist",value:function isEdgeExist(source,sourcePortId,target,targetPortId){var sources=this.getEdgesBySource(source,sourcePortId),targets=this.getEdgesByTarget(target,targetPortId);if(!sources||!targets)return!1;var exist=!1;return sources.forEach((function(id){targets.has(id)&&(exist=!0)})),exist}},{key:"merge",value:function merge(partial){var _partial$nodes,_partial$edges,_partial$groups,_partial$head,_partial$tail,_partial$edgesBySourc,_partial$edgesByTarge,_partial$selectedNode;return new GraphModel({nodes:null!==(_partial$nodes=partial.nodes)&&void 0!==_partial$nodes?_partial$nodes:this.nodes,edges:null!==(_partial$edges=partial.edges)&&void 0!==_partial$edges?_partial$edges:this.edges,groups:null!==(_partial$groups=partial.groups)&&void 0!==_partial$groups?_partial$groups:this.groups,head:null!==(_partial$head=partial.head)&&void 0!==_partial$head?_partial$head:this.head,tail:null!==(_partial$tail=partial.tail)&&void 0!==_partial$tail?_partial$tail:this.tail,edgesBySource:null!==(_partial$edgesBySourc=partial.edgesBySource)&&void 0!==_partial$edgesBySourc?_partial$edgesBySourc:this.edgesBySource,edgesByTarget:null!==(_partial$edgesByTarge=partial.edgesByTarget)&&void 0!==_partial$edgesByTarge?_partial$edgesByTarge:this.edgesByTarget,selectedNodes:null!==(_partial$selectedNode=partial.selectedNodes)&&void 0!==_partial$selectedNode?_partial$selectedNode:this.selectedNodes})}}],[{key:"empty",value:function empty(){return new GraphModel({nodes:_collections__WEBPACK_IMPORTED_MODULE_16__.OrderedMap.empty(),edges:_collections__WEBPACK_IMPORTED_MODULE_16__.HashMap.empty(),groups:[],head:void 0,tail:void 0,edgesBySource:_collections__WEBPACK_IMPORTED_MODULE_16__.HashMap.empty(),edgesByTarget:_collections__WEBPACK_IMPORTED_MODULE_16__.HashMap.empty(),selectedNodes:new Set})}},{key:"fromJSON",value:function fromJSON(init){var _init$groups,head,tail,nodes=_collections__WEBPACK_IMPORTED_MODULE_16__.OrderedMap.empty().mutate(),edges=_collections__WEBPACK_IMPORTED_MODULE_16__.HashMap.empty().mutate();if(0===init.nodes.length)head=void 0,tail=void 0;else if(1===init.nodes.length){var _node2=init.nodes[0];nodes.set(_node2.id,_NodeModel__WEBPACK_IMPORTED_MODULE_22__.a.fromJSON(_node2,void 0,void 0)),head=_node2.id,tail=_node2.id}else{var first=init.nodes[0],second=init.nodes[1],last=init.nodes[init.nodes.length-1];head=first.id,tail=last.id,nodes.set(first.id,_NodeModel__WEBPACK_IMPORTED_MODULE_22__.a.fromJSON(first,void 0,second.id));var prev=init.nodes[0];if(init.nodes.length>2)for(var i=1;i<init.nodes.length-1;i+=1){var _node3=init.nodes[i],next=init.nodes[i+1];nodes.set(_node3.id,_NodeModel__WEBPACK_IMPORTED_MODULE_22__.a.fromJSON(_node3,prev.id,next.id)),prev=_node3}nodes.set(last.id,_NodeModel__WEBPACK_IMPORTED_MODULE_22__.a.fromJSON(last,prev.id,void 0))}var _step,edgesBySource=_collections__WEBPACK_IMPORTED_MODULE_16__.HashMapBuilder.empty(),edgesByTarget=_collections__WEBPACK_IMPORTED_MODULE_16__.HashMapBuilder.empty(),_iterator=_createForOfIteratorHelper(init.edges);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _edge=_step.value;edges.set(_edge.id,_EdgeModel__WEBPACK_IMPORTED_MODULE_20__.a.fromJSON(_edge)),setEdgeByPortMutable(edgesBySource,_edge.id,_edge.source,_edge.sourcePortId),setEdgeByPortMutable(edgesByTarget,_edge.id,_edge.target,_edge.targetPortId)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return new GraphModel({nodes:nodes.finish(),edges:edges.finish(),groups:null!==(_init$groups=init.groups)&&void 0!==_init$groups?_init$groups:[],head:head,tail:tail,edgesBySource:edgesBySource.finish(),edgesByTarget:edgesByTarget.finish(),selectedNodes:new Set})}}]),GraphModel}();function setEdgeByPort(edgesByPort,edgeId,nodeId,portId){return edgesByPort.has(nodeId)?edgesByPort.update(nodeId,(function(map){var edges=map.get(portId);return new Map(map).set(portId,(edges?new Set(edges):new Set).add(edgeId))})):edgesByPort.set(nodeId,new Map([[portId,new Set([edgeId])]]))}function setEdgeByPortMutable(edgesByPort,edgeId,nodeId,portId){edgesByPort.has(nodeId)?edgesByPort.update(nodeId,(function(map){var set=map.get(portId);return set||(set=new Set,map.set(portId,set)),set.add(edgeId),map})):edgesByPort.set(nodeId,new Map([[portId,new Set([edgeId])]]))}function deleteEdgeByPort(edgesByPort,edgeId,nodeId,portId){return edgesByPort.has(nodeId)?edgesByPort.update(nodeId,(function(edgeByPortsMap){var edgeIds=edgeByPortsMap.get(portId);if(!edgeIds)return edgeByPortsMap;var set=new Set(edgeIds);return set.delete(edgeId),new Map(edgeByPortsMap).set(portId,set)})):edgesByPort}},181:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getPortPositionByPortId}));__webpack_require__(66);var _debug__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(58),_getNodeConfig__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(179),_layout__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(69),getPortPositionByPortId=function getPortPositionByPortId(node,portId,graphConfig){var nodeConfig=Object(_getNodeConfig__WEBPACK_IMPORTED_MODULE_2__.a)(node,graphConfig);if(nodeConfig){var port=(node.ports||[]).find((function(p){return p.id===portId}));if(port)return function getPortPosition(node,port,nodeConfig){var width=Object(_layout__WEBPACK_IMPORTED_MODULE_3__.d)(nodeConfig,node),height=Object(_layout__WEBPACK_IMPORTED_MODULE_3__.c)(nodeConfig,node),xOffset=port.position?port.position[0]*width:.5*width,x=node.x+xOffset,yOffset=port.position?port.position[1]*height:height;return{x:x,y:node.y+yOffset}}(node,port,nodeConfig);_debug__WEBPACK_IMPORTED_MODULE_1__.a.warn("invalid port id "+JSON.stringify(port))}}},185:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return emptySelectBoxPosition})),__webpack_require__.d(__webpack_exports__,"a",(function(){return SelectBox}));__webpack_require__(0);var _common_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(21),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),emptySelectBoxPosition=function emptySelectBoxPosition(){return{startX:0,startY:0,height:0,width:0}},SelectBox=function SelectBox(props){var selectBoxPosition=props.selectBoxPosition,style=props.style,selectBoxD="m"+selectBoxPosition.startX+" "+selectBoxPosition.startY+" v "+selectBoxPosition.height+" h "+selectBoxPosition.width+" v"+-selectBoxPosition.height+" h "+-selectBoxPosition.width,pathStyle=null!=style?style:{fill:"none",stroke:_common_constants__WEBPACK_IMPORTED_MODULE_1__.f.defaultColor};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("path",{style:pathStyle,d:selectBoxD})};SelectBox.displayName="SelectBox";try{SelectBox.displayName="SelectBox",SelectBox.__docgenInfo={description:"",displayName:"SelectBox",props:{selectBoxPosition:{defaultValue:null,description:"",name:"selectBoxPosition",required:!0,type:{name:"ISelectBoxPosition"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Graph/SelectBox.tsx#SelectBox"]={docgenInfo:SelectBox.__docgenInfo,name:"SelectBox",path:"src/components/Graph/SelectBox.tsx#SelectBox"})}catch(__react_docgen_typescript_loader_error){}},186:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return NodeType})),__webpack_require__.d(__webpack_exports__,"a",(function(){return BitmapIndexedNode}));__webpack_require__(6),__webpack_require__(8),__webpack_require__(9),__webpack_require__(15),__webpack_require__(20),__webpack_require__(34),__webpack_require__(66),__webpack_require__(255),__webpack_require__(83),__webpack_require__(93),__webpack_require__(348),__webpack_require__(47),__webpack_require__(16),__webpack_require__(10),__webpack_require__(7),__webpack_require__(14),__webpack_require__(11),__webpack_require__(19);var NodeType,_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(39);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}!function(NodeType){NodeType[NodeType.Bitmap=0]="Bitmap",NodeType[NodeType.Collision=1]="Collision"}(NodeType||(NodeType={}));function bitPosFrom(mask){return 1<<mask}function indexFrom(bitmap,mask,bitPos){return 1073741823===bitmap?mask:bitCount(bitmap&bitPos-1)}function maskFrom(hash,shift){return hash>>>shift&31}function bitCount(x){return x|=0,x=(x=(858993459&(x-=x>>>1&1431655765))+(x>>>2&858993459))+(x>>>4)&252645135,x+=x>>>8,127&(x+=x>>>16)}var BitmapIndexedNode=function(){function BitmapIndexedNode(owner,dataMap,nodeMap,keys,values,children,hashes,size){_classCallCheck(this,BitmapIndexedNode),this.type=NodeType.Bitmap,this.dataMap=void 0,this.nodeMap=void 0,this.size=void 0,this.keys=void 0,this.values=void 0,this.children=void 0,this.owner=void 0,this.hashes=void 0,this.owner=owner,this.dataMap=dataMap,this.nodeMap=nodeMap,this.keys=keys,this.values=values,this.children=children,this.hashes=hashes,this.size=size}return _createClass(BitmapIndexedNode,[{key:"valueCount",get:function get(){return this.values.length}},{key:"nodeCount",get:function get(){return this.children.length}},{key:"getKey",value:function getKey(index){return this.keys[index]}},{key:"getValue",value:function getValue(index){return this.values[index]}},{key:"getHash",value:function getHash(index){return this.hashes[index]}},{key:"getNode",value:function getNode(index){return this.children[index]}},{key:"contains",value:function contains(key,keyHash,shift){var mask=maskFrom(keyHash,shift),bitPos=bitPosFrom(mask),dataMap=this.dataMap,nodeMap=this.nodeMap;if(0!=(dataMap&bitPos)){var _index=indexFrom(dataMap,mask,bitPos),key0=this.getKey(_index);return Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(key0,key)}if(0!=(nodeMap&bitPos)){var _index2=indexFrom(nodeMap,mask,bitPos);return this.getNode(_index2).contains(key,keyHash,shift+5)}return!1}},{key:"get",value:function get(key,keyHash,shift){var mask=maskFrom(keyHash,shift),bitPos=bitPosFrom(mask),dataMap=this.dataMap,nodeMap=this.nodeMap;if(0!=(dataMap&bitPos)){var _index3=indexFrom(dataMap,mask,bitPos),key0=this.getKey(_index3);return Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(key0,key)?this.getValue(_index3):void 0}if(0!=(nodeMap&bitPos)){var _index4=indexFrom(nodeMap,mask,bitPos);return this.getNode(_index4).get(key,keyHash,shift+5)}}},{key:"insert",value:function insert(owner,key,value,hash,shift){var mask=maskFrom(hash,shift),bitPos=bitPosFrom(mask),dataMap=this.dataMap,nodeMap=this.nodeMap;if(0!=(dataMap&bitPos)){var _index5=indexFrom(dataMap,mask,bitPos),key0=this.getKey(_index5),value0=this.getValue(_index5),key0Hash=this.getHash(_index5);if(key0Hash===hash&&Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(key0,key))return Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(value0,value)?this:this.setValue(owner,value,_index5);var subNodeNew=mergeTwoKeyValPairs(owner,key0,value0,key0Hash,key,value,hash,shift+5);return this.migrateInlineToNode(owner,bitPos,subNodeNew)}if(0!=(nodeMap&bitPos)){var _index6=indexFrom(nodeMap,mask,bitPos),_subNodeNew=this.getNode(_index6).insert(owner,key,value,hash,shift+5);return this.setNode(owner,1,_subNodeNew,bitPos)}return this.insertValue(owner,bitPos,key,hash,value)}},{key:"update",value:function update(owner,key,updater,hash,shift){var mask=maskFrom(hash,shift),bitPos=bitPosFrom(mask),dataMap=this.dataMap,nodeMap=this.nodeMap;if(0!=(dataMap&bitPos)){var _index7=indexFrom(dataMap,mask,bitPos),key0=this.getKey(_index7);if(this.getHash(_index7)===hash&&Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(key0,key)){var value0=this.getValue(_index7),_value=updater(value0);return Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(value0,_value)?this:this.setValue(owner,_value,_index7)}}else if(0!=(nodeMap&bitPos)){var _index8=indexFrom(nodeMap,mask,bitPos),subNode=this.getNode(_index8),subNodeNew=subNode.update(owner,key,updater,hash,shift+5);return subNodeNew===subNode?this:this.setNode(owner,0,subNodeNew,bitPos)}return this}},{key:"remove",value:function remove(owner,key,keyHash,shift){var mask=maskFrom(keyHash,shift),bitPos=bitPosFrom(mask);if(0!=(this.dataMap&bitPos)){var _index9=indexFrom(this.dataMap,mask,bitPos),key0=this.getKey(_index9);return Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(key0,key)?this.removeValue(owner,bitPos):void 0}if(0!=(this.nodeMap&bitPos)){var _index10=indexFrom(this.nodeMap,mask,bitPos),subNode=this.getNode(_index10),_remove=subNode.remove(owner,key,keyHash,shift+5);if(void 0===_remove)return;var _remove2=_slicedToArray(_remove,2),subNodeNew=_remove2[0],removedValue=_remove2[1];return 1===subNodeNew.size?this.size===subNode.size?[new BitmapIndexedNode(owner,bitPos,0,[subNodeNew.getKey(0)],[subNodeNew.getValue(0)],[],[subNodeNew.getHash(0)],1),removedValue]:[this.migrateNodeToInline(owner,bitPos,subNodeNew),removedValue]:[this.setNode(owner,-1,subNodeNew,bitPos),removedValue]}}},{key:"toOwned",value:function toOwned(owner){return this.owner===owner?this:new BitmapIndexedNode(owner,this.dataMap,this.nodeMap,this.keys.slice(),this.values.slice(),this.children.slice(),this.hashes.slice(),this.size)}},{key:"iter",value:function iter(){return new BitmapIndexedNodeIterator(this)}},{key:"map",value:function map(owner,f){for(var valueCount=this.valueCount,keys=[],values=[],children=[],same=!0,i=0;i<valueCount;i+=1){var _key=this.getKey(i),value0=this.getValue(i),_value2=f(value0,_key);same=same&&Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(value0,_value2),keys.push(_key),values.push(_value2)}for(var _i2=0;_i2<this.children.length;_i2+=1){var node0=this.getNode(_i2),node=node0.map(owner,f);same=same&&node===node0,children.push(node)}return same?this:new BitmapIndexedNode(owner,this.dataMap,this.nodeMap,keys,values,children,this.hashes,this.size)}},{key:"forEach",value:function forEach(f){for(var i=0;i<this.values.length;i+=1){var _key2=this.getKey(i);f(this.getValue(i),_key2)}for(var _i3=0;_i3<this.children.length;_i3+=1){this.getNode(_i3).forEach(f)}}},{key:"find",value:function find(predicate){for(var i=0;i<this.values.length;i+=1){var _value4=this.getValue(i);if(predicate(_value4))return _value4}for(var _i4=0;_i4<this.children.length;_i4+=1){var found=this.getNode(_i4).find(predicate);if(found)return found}}},{key:"dataIndex",value:function dataIndex(bitPos){return bitCount(this.dataMap&bitPos-1)}},{key:"nodeIndex",value:function nodeIndex(bitPos){return bitCount(this.nodeMap&bitPos-1)}},{key:"setValue",value:function setValue(owner,value,index){var next=this.toOwned(owner);return next.values[index]=value,next}},{key:"insertValue",value:function insertValue(owner,bitPos,key,originalHash,value){var index=this.dataIndex(bitPos),next=this.toOwned(owner);return next.size+=1,next.dataMap|=bitPos,next.keys.splice(index,0,key),next.values.splice(index,0,value),next.hashes.splice(index,0,originalHash),next}},{key:"migrateInlineToNode",value:function migrateInlineToNode(owner,bitPos,child){var indexOld=this.dataIndex(bitPos),indexNew=this.nodeIndex(bitPos),next=this.toOwned(owner);return next.dataMap^=bitPos,next.nodeMap|=bitPos,next.keys.splice(indexOld,1),next.values.splice(indexOld,1),next.children.splice(indexNew,0,child),next.hashes.splice(indexOld,1),next.size+=1,next}},{key:"migrateNodeToInline",value:function migrateNodeToInline(owner,bitPos,node){var indexOld=this.nodeIndex(bitPos),indexNew=this.dataIndex(bitPos),key=node.getKey(0),value=node.getValue(0),hash=node.getHash(0),next=this.toOwned(owner);return next.dataMap=next.dataMap|bitPos,next.nodeMap=next.nodeMap^bitPos,next.children.splice(indexOld,1),next.keys.splice(indexNew,0,key),next.values.splice(indexNew,0,value),next.size-=1,next.hashes.splice(indexNew,0,hash),next}},{key:"setNode",value:function setNode(owner,sizeDelta,newNode,bitPos){var index=this.nodeIndex(bitPos),next=this.toOwned(owner);return next.children[index]=newNode,next.size=next.size+sizeDelta,next}},{key:"removeValue",value:function removeValue(owner,bitPos){var index=this.dataIndex(bitPos),value=this.getValue(index),next=this.toOwned(owner);return next.dataMap^=bitPos,next.keys.splice(index,1),next.values.splice(index,1),next.hashes.splice(index,1),next.size-=1,[next,value]}}],[{key:"empty",value:function empty(owner){return new BitmapIndexedNode(owner,0,0,[],[],[],[],0)}}]),BitmapIndexedNode}();function mergeTwoKeyValPairs(owner,key0,value0,keyHash0,key1,value1,keyHash1,shift){if(shift>=30)return new HashCollisionNode(owner,keyHash0,[key0,key1],[value0,value1]);var mask0=maskFrom(keyHash0,shift),mask1=maskFrom(keyHash1,shift);if(mask0!==mask1){var dataMap=bitPosFrom(mask0)|bitPosFrom(mask1);return mask0<mask1?new BitmapIndexedNode(owner,dataMap,0,[key0,key1],[value0,value1],[],[keyHash0,keyHash1],2):new BitmapIndexedNode(owner,dataMap,0,[key1,key0],[value1,value0],[],[keyHash1,keyHash0],2)}var nodeMap=bitPosFrom(mask0),node=mergeTwoKeyValPairs(owner,key0,value0,keyHash0,key1,value1,keyHash1,shift+5);return new BitmapIndexedNode(owner,0,nodeMap,[],[],[node],[],node.size)}var HashCollisionNode=function(){function HashCollisionNode(owner,hash,keys,values){_classCallCheck(this,HashCollisionNode),this.type=NodeType.Collision,this.owner=void 0,this.hash=void 0,this.keys=void 0,this.values=void 0,this.owner=owner,this.hash=hash,this.keys=keys,this.values=values}return _createClass(HashCollisionNode,[{key:"size",get:function get(){return this.keys.length}},{key:"toOwned",value:function toOwned(owner){return this.owner===owner?this:new HashCollisionNode(owner,this.hash,this.keys.slice(),this.values.slice())}},{key:"contains",value:function contains(key){return this.keys.includes(key)}},{key:"get",value:function get(key){var index=this.keys.findIndex((function(it){return Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(it,key)}));return index>=0?this.values[index]:void 0}},{key:"insert",value:function insert(owner,key,value){var index=this.keys.findIndex((function(it){return Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(it,key)}));if(index>=0){var value0=this.values[index];if(Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(value0,value))return this;var next=this.toOwned(owner);return next.values[index]=value,next}var _next=this.toOwned(owner);return _next.keys.push(key),_next.values.push(value),_next}},{key:"update",value:function update(owner,key,updater){var index=this.keys.findIndex((function(it){return Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(it,key)}));if(index>=0){var value0=this.values[index],_value5=updater(value0);if(Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(value0,_value5))return this;var next=this.toOwned(owner);return next.values[index]=_value5,next}return this}},{key:"remove",value:function remove(owner,key){var index=this.keys.findIndex((function(it){return Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(it,key)}));if(-1!==index){var value=this.getValue(index);return[new HashCollisionNode(owner,this.hash,this.keys.filter((function(_,i){return i!==index})),this.values.filter((function(_,i){return i!==index}))),value]}}},{key:"getKey",value:function getKey(index){return this.keys[index]}},{key:"getValue",value:function getValue(index){return this.values[index]}},{key:"getHash",value:function getHash(){return this.hash}},{key:"iter",value:function iter(){return new HashCollisionNodeIterator(this)}},{key:"map",value:function map(owner,f){for(var len=this.size,values=[],update=!1,i=0;i<len;i+=1){var _key3=this.getKey(i),value0=this.getValue(i),_value6=f(value0,_key3);values.push(_value6),update=Object(_utils__WEBPACK_IMPORTED_MODULE_18__.b)(value0,_value6)}return update?new HashCollisionNode(owner,this.hash,this.keys,values):this}},{key:"forEach",value:function forEach(f){for(var len=this.size,i=0;i<len;i+=1){var _key4=this.getKey(i);f(this.getValue(i),_key4)}}},{key:"find",value:function find(predicate){return this.values.find(predicate)}}]),HashCollisionNode}(),BitmapIndexedNodeIterator=function(_Symbol$iterator2){function BitmapIndexedNodeIterator(node){_classCallCheck(this,BitmapIndexedNodeIterator),this.valueCount=void 0,this.nodeCount=void 0,this.size=void 0,this.index=0,this.delegate=null,this.done=!1,this.node=void 0,this.node=node,this.valueCount=node.valueCount,this.nodeCount=node.nodeCount,this.size=this.valueCount+this.nodeCount}return _createClass(BitmapIndexedNodeIterator,[{key:_Symbol$iterator2,value:function value(){return this.clone()}},{key:"next",value:function next(){if(this.done)return{done:!0,value:void 0};if(this.index<this.valueCount){var _key5=this.node.getKey(this.index),_value7=this.node.getValue(this.index);return this.index+=1,{done:!1,value:[_key5,_value7]}}if(this.index<this.size){null===this.delegate&&(this.delegate=this.node.getNode(this.index-this.valueCount).iter());var next=this.delegate.next();return next.done?(this.index+=1,this.delegate=null,this.next()):next}return this.done=!0,{done:!0,value:void 0}}},{key:"clone",value:function clone(){var iter=new BitmapIndexedNodeIterator(this.node);return iter.index=this.index,iter.delegate=this.delegate,iter.done=this.done,iter}}]),BitmapIndexedNodeIterator}(Symbol.iterator),HashCollisionNodeIterator=function(_Symbol$iterator4){function HashCollisionNodeIterator(node){_classCallCheck(this,HashCollisionNodeIterator),this.index=0,this.node=void 0,this.node=node}return _createClass(HashCollisionNodeIterator,[{key:_Symbol$iterator4,value:function value(){return this.clone()}},{key:"next",value:function next(){if(this.index>=this.node.size)return{done:!0,value:void 0};var key=this.node.getKey(this.index),value=this.node.getValue(this.index);return this.index+=1,{done:!1,value:[key,value]}}},{key:"clone",value:function clone(){var iter=new HashCollisionNodeIterator(this.node);return iter.index=this.index,iter}}]),HashCollisionNodeIterator}(Symbol.iterator)},187:function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__.d(__webpack_exports__,"a",(function(){return Uid}));var Uid=function(){function Uid(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Uid),this.id=0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Uid,[{key:"take",value:function take(){return this.id+=1,this.id}},{key:"peek",value:function peek(){return this.id+1}}]),Uid}()},188:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return preventSpread}));__webpack_require__(11);var _debug__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(58);function preventSpread(obj){Object.defineProperty(obj,"__preventSpread",{enumerable:!0,configurable:!1,get:function get(){document.currentScript&&_debug__WEBPACK_IMPORTED_MODULE_1__.a.error(obj.constructor.name+" is a class, which should not be used in the spread syntax or argument of Object.assign")}})}},189:function(module,__webpack_exports__,__webpack_require__){"use strict";var react_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(85);__webpack_require__.d(__webpack_exports__,"a",(function(){return react_dom__WEBPACK_IMPORTED_MODULE_0__.unstable_batchedUpdates}))},21:function(module,__webpack_exports__,__webpack_require__){"use strict";var MouseEventButton,MouseEventButtons;__webpack_require__.d(__webpack_exports__,"c",(function(){return MouseEventButton})),__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULT_AUTO_ALIGN_THRESHOLD})),__webpack_require__.d(__webpack_exports__,"a",(function(){return COPIED_NODE_SPACING})),__webpack_require__.d(__webpack_exports__,"e",(function(){return NODE_MIN_VISIBLE_LENGTH})),__webpack_require__.d(__webpack_exports__,"d",(function(){return NODE_MAX_VISIBLE_LENGTH})),__webpack_require__.d(__webpack_exports__,"f",(function(){return defaultColors})),function(MouseEventButton){MouseEventButton[MouseEventButton.Primary=0]="Primary",MouseEventButton[MouseEventButton.Auxiliary=1]="Auxiliary",MouseEventButton[MouseEventButton.Secondary=2]="Secondary",MouseEventButton[MouseEventButton.Fourth=4]="Fourth",MouseEventButton[MouseEventButton.Fifth=5]="Fifth"}(MouseEventButton||(MouseEventButton={})),function(MouseEventButtons){MouseEventButtons[MouseEventButtons.None=0]="None",MouseEventButtons[MouseEventButtons.Left=1]="Left",MouseEventButtons[MouseEventButtons.Right=2]="Right",MouseEventButtons[MouseEventButtons.Middle=4]="Middle"}(MouseEventButtons||(MouseEventButtons={}));var DEFAULT_AUTO_ALIGN_THRESHOLD=50,COPIED_NODE_SPACING=50,NODE_MIN_VISIBLE_LENGTH=5,NODE_MAX_VISIBLE_LENGTH=500,defaultColors={controlPointColor:"#333333",primaryColor:"#0078D4",defaultColor:"#CCCCCC",borderColor:"#B3B0AD",defaultBorderColor:"#FFFFFF",unConnectableBgColor:"#E1DFDD",defaultBackgroundColor:"#FFFFFF",portStroke:"#ccc",portFill:"#fff",connectedPortColor:"gray",nodeActivateFill:"#ffffff",nodeActivateStroke:"#0078D4",nodeFill:"#ffffff",nodeStroke:"#cccccc",contextMenuBackground:"#FFFFFF",contextMenuBorder:"#E1DFDD",contextMenuHoverBackground:"rgba(0, 120, 212, 0.05)",fontColor:"#000000",canvasBackground:"#EDEDED",minimapBackground:"#EDEDED",edgeColor:"#ccc",edgeColorSelected:"#015cda",minimapShadow:"#000000",outlineStyle:"none",focusOutlineColor:"#000000",dummyNodeStroke:"#015cda",inputFocusBorderAlt:"#0078d4",buttonBorder:"#797775",scrollbarColor:"#c8c8c8"}},215:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return EdgeModel}));var _utils_preventSpread__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(188),_utils_state__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(28);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var EdgeModel=function(){function EdgeModel(edge){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EdgeModel),this.inner=void 0,this.inner=edge,Object(_utils_preventSpread__WEBPACK_IMPORTED_MODULE_0__.a)(this)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(EdgeModel,[{key:"id",get:function get(){return this.inner.id}},{key:"shape",get:function get(){return this.inner.shape}},{key:"automationId",get:function get(){return this.inner.automationId}},{key:"source",get:function get(){return this.inner.source}},{key:"target",get:function get(){return this.inner.target}},{key:"sourcePortId",get:function get(){return this.inner.sourcePortId}},{key:"targetPortId",get:function get(){return this.inner.targetPortId}},{key:"state",get:function get(){return this.inner.state}},{key:"data",get:function get(){return this.inner.data}},{key:"updateState",value:function updateState(f){return this.update(Object(_utils_state__WEBPACK_IMPORTED_MODULE_1__.i)(f))}},{key:"update",value:function update(f){var edge=f(this.inner);return edge===this.inner?this:new EdgeModel(edge)}},{key:"shallow",value:function shallow(){return new EdgeModel(this.inner)}},{key:"toJSON",value:function toJSON(){return this.inner}}],[{key:"fromJSON",value:function fromJSON(inner){return new EdgeModel(inner)}}]),EdgeModel}()},216:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return composeReducers}));__webpack_require__(506);function composeReducers(reducers){return function(next){return reducers.reduceRight((function(prev,current){return current(prev)}),next)}}},266:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GraphConfigContext}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_models_config_GraphConfigBuilder__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(178),GraphConfigContext=Object(react__WEBPACK_IMPORTED_MODULE_0__.createContext)(_models_config_GraphConfigBuilder__WEBPACK_IMPORTED_MODULE_1__.a.default().build())},267:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getCurvePathD}));var getCurvePathD=function getCurvePathD(x1,x2,y1,y2){return"M"+x1+","+y1+"C"+x1+","+(y1-getControlPointDistance(y1,y2))+","+x2+","+(y2+5+getControlPointDistance(y1,y2))+","+x2+","+(y2+5)},getControlPointDistance=function getControlPointDistance(y1,y2){return Math.min(75,Math.max(15,Math.abs((y1-(y2+5))/2)))}},268:function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__.d(__webpack_exports__,"a",(function(){return GraphConfig}));var GraphConfig=function(){function GraphConfig(defaultEdgeShape,defaultNodeShape,defaultPortShape,defaultGroupShape,nodeConfigMap,edgeConfigMap,portConfigMap,groupConfigMap,clipboard){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GraphConfig),this.defaultEdgeShape=void 0,this.defaultNodeShape=void 0,this.defaultPortShape=void 0,this.defaultGroupShape=void 0,this.nodeConfigMap=void 0,this.edgeConfigMap=void 0,this.portConfigMap=void 0,this.groupConfigMap=void 0,this.clipboard=void 0,this.defaultEdgeShape=defaultEdgeShape,this.defaultNodeShape=defaultNodeShape,this.defaultPortShape=defaultPortShape,this.defaultGroupShape=defaultGroupShape,this.nodeConfigMap=nodeConfigMap,this.edgeConfigMap=edgeConfigMap,this.portConfigMap=portConfigMap,this.groupConfigMap=groupConfigMap,this.clipboard=clipboard}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(GraphConfig,[{key:"getClipboard",value:function getClipboard(){return this.clipboard}},{key:"getEdgeConfigByName",value:function getEdgeConfigByName(name){return this.edgeConfigMap.get(name||this.defaultEdgeShape)}},{key:"getGroupConfigByName",value:function getGroupConfigByName(name){return this.groupConfigMap.get(name||this.defaultGroupShape)}},{key:"getNodeConfigByName",value:function getNodeConfigByName(name){return this.nodeConfigMap.get(name||this.defaultNodeShape)}},{key:"getPortConfigByName",value:function getPortConfigByName(name){return this.portConfigMap.get(name||this.defaultPortShape)}}]),GraphConfig}()},269:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return isMobile})),__webpack_require__.d(__webpack_exports__,"a",(function(){return BrowserType})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getBrowser})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isSupported})),__webpack_require__.d(__webpack_exports__,"c",(function(){return isMacOs}));__webpack_require__(133),__webpack_require__(36),__webpack_require__(212),__webpack_require__(83),__webpack_require__(93);var BrowserType,isMobile=function isMobile(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some((function(toMatchItem){return navigator.userAgent.match(toMatchItem)}))};!function(BrowserType){BrowserType.unknown="unknown",BrowserType.edge="edge",BrowserType.edgeChromium="edgeChromium",BrowserType.opera="opera",BrowserType.chrome="chrome",BrowserType.ie="ie",BrowserType.firefox="firefox",BrowserType.safari="safari",BrowserType.electron="electron"}(BrowserType||(BrowserType={}));var getBrowser=function getBrowser(){var agent=navigator.userAgent.toLowerCase();if(agent.indexOf("electron")>-1)return BrowserType.electron;switch(!0){case agent.indexOf("edge")>-1:return BrowserType.edge;case agent.indexOf("edg")>-1:return BrowserType.edgeChromium;case agent.indexOf("opr")>-1&&!!window.opr:return BrowserType.opera;case agent.indexOf("chrome")>-1&&!!window.chrome:return BrowserType.chrome;case agent.indexOf("trident")>-1:return BrowserType.ie;case agent.indexOf("firefox")>-1:return BrowserType.firefox;case agent.indexOf("safari")>-1:return BrowserType.safari;default:return BrowserType.unknown}},isSupported=function isSupported(){if(isMobile())return!1;var browser=getBrowser();return[BrowserType.chrome,BrowserType.edgeChromium,BrowserType.firefox,BrowserType.safari,BrowserType.electron].indexOf(browser)>-1},isMacOs=navigator.userAgent.includes("Macintosh")},270:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return isWithinThreshold}));var isWithinThreshold=function isWithinThreshold(dx,dy,threshold){return Math.abs(dx)<threshold&&Math.abs(dy)<threshold}},271:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"l",(function(){return isViewportComplete})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getNodeRect})),__webpack_require__.d(__webpack_exports__,"k",(function(){return isRectVisible})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getRenderedNodes})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getVisibleArea})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getRenderedArea})),__webpack_require__.d(__webpack_exports__,"q",(function(){return zoomTo})),__webpack_require__.d(__webpack_exports__,"p",(function(){return zoom})),__webpack_require__.d(__webpack_exports__,"n",(function(){return pan})),__webpack_require__.d(__webpack_exports__,"m",(function(){return minimapPan})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getContentArea})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getZoomFitMatrix})),__webpack_require__.d(__webpack_exports__,"a",(function(){return focusArea})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getContainerCenter})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getRelativePoint})),__webpack_require__.d(__webpack_exports__,"o",(function(){return scrollIntoView})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getScaleLimit}));__webpack_require__(34),__webpack_require__(12),__webpack_require__(500),__webpack_require__(7),__webpack_require__(14),__webpack_require__(6),__webpack_require__(16),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(15),__webpack_require__(11),__webpack_require__(19);var _models_geometry__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(87),_geometric__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(142),_identical__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(70),_layout__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(69),_transformMatrix__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(72);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var isViewportComplete=function isViewportComplete(viewport){return!!viewport.rect},getNodeRect=function getNodeRect(node,graphConfig){var x=node.x,y=node.y,_getNodeSize=Object(_layout__WEBPACK_IMPORTED_MODULE_16__.b)(node,graphConfig);return{x:x,y:y,width:_getNodeSize.width,height:_getNodeSize.height}},isRectVisible=function isRectVisible(shapeRect,viewport){var x=shapeRect.x,y=shapeRect.y,width=shapeRect.width,height=shapeRect.height;return isPointVisible({x:x,y:y},viewport)||isPointVisible({x:x+width,y:y},viewport)||isPointVisible({x:x+width,y:y+height},viewport)||isPointVisible({x:x,y:y+height},viewport)},isPointVisible=function isPointVisible(point,viewport){var _getContainerClientPo=Object(_transformMatrix__WEBPACK_IMPORTED_MODULE_17__.b)(point.x,point.y,viewport),x=_getContainerClientPo.x,y=_getContainerClientPo.y,_viewport$rect=viewport.rect,height=_viewport$rect.height,width=_viewport$rect.width;return x>0&&x<width&&y>0&&y<height},getVisibleNodes=function getVisibleNodes(nodes,viewport,graphConfig){var result=[];return nodes.forEach((function(n){(function isNodeVisible(node,viewport,graphConfig){return isRectVisible(getNodeRect(node,graphConfig),viewport)})(n,viewport,graphConfig)&&result.push(n.inner)})),result},getRenderedNodes=function getRenderedNodes(nodes,viewport){var result=[],renderedArea=getRenderedArea(viewport);return nodes.forEach((function(n){isNodeInRenderedArea(n,renderedArea)&&result.push(n.inner)})),result},isNodeInRenderedArea=function isNodeInRenderedArea(node,renderedArea){return Object(_geometric__WEBPACK_IMPORTED_MODULE_14__.d)(renderedArea,node)},getVisibleArea=function getVisibleArea(viewport){if(!isViewportComplete(viewport))return{minX:0,minY:0,maxX:0,maxY:0};var rect=viewport.rect,transformMatrix=viewport.transformMatrix,maxX=rect.width,maxY=rect.height,min=Object(_transformMatrix__WEBPACK_IMPORTED_MODULE_17__.e)(0,0,transformMatrix),max=Object(_transformMatrix__WEBPACK_IMPORTED_MODULE_17__.e)(maxX,maxY,transformMatrix);return{minX:min.x,minY:min.y,maxX:max.x,maxY:max.y}},getRenderedArea=function getRenderedArea(viewport){if(!isViewportComplete(viewport))return{minX:0,minY:0,maxX:0,maxY:0};var rect=viewport.rect,transformMatrix=viewport.transformMatrix,maxX=rect.width,maxY=rect.height,min=Object(_transformMatrix__WEBPACK_IMPORTED_MODULE_17__.e)(0-rect.width,0-rect.height,transformMatrix),max=Object(_transformMatrix__WEBPACK_IMPORTED_MODULE_17__.e)(maxX+rect.width,maxY+rect.height,transformMatrix);return{minX:min.x,minY:min.y,maxX:max.x,maxY:max.y}},zoomTo=function zoomTo(_ref){var scale=_ref.scale,anchor=_ref.anchor,direction=_ref.direction,limitScale=_ref.limitScale;return function(prevState){var transformMatrix,scaleX=limitScale(scale)/prevState.transformMatrix[0],scaleY=limitScale(scale)/prevState.transformMatrix[3],dx=anchor.x*(1-scaleX),dy=anchor.y*(1-scaleY);switch(direction){case _models_geometry__WEBPACK_IMPORTED_MODULE_13__.a.X:transformMatrix=[scale,0,0,prevState.transformMatrix[3],prevState.transformMatrix[4]*scaleX+dx,prevState.transformMatrix[5]];break;case _models_geometry__WEBPACK_IMPORTED_MODULE_13__.a.Y:transformMatrix=[prevState.transformMatrix[0],0,0,scale,prevState.transformMatrix[4],prevState.transformMatrix[5]*scaleY+dy];break;case _models_geometry__WEBPACK_IMPORTED_MODULE_13__.a.XY:default:transformMatrix=[scale,0,0,scale,prevState.transformMatrix[4]*scaleX+dx,prevState.transformMatrix[5]*scaleY+dy]}return Object.assign({},prevState,{transformMatrix:transformMatrix})}},zoom=function zoom(_ref2){var scale=_ref2.scale,anchor=_ref2.anchor,direction=_ref2.direction,limitScale=_ref2.limitScale;return 1===scale?_identical__WEBPACK_IMPORTED_MODULE_15__.a:function(prevState){var transformMatrix;switch(direction){case _models_geometry__WEBPACK_IMPORTED_MODULE_13__.a.X:return zoomTo({anchor:anchor,direction:direction,limitScale:limitScale,scale:prevState.transformMatrix[0]*scale})(prevState);case _models_geometry__WEBPACK_IMPORTED_MODULE_13__.a.Y:return zoomTo({anchor:anchor,direction:direction,limitScale:limitScale,scale:prevState.transformMatrix[3]*scale})(prevState);case _models_geometry__WEBPACK_IMPORTED_MODULE_13__.a.XY:default:var resultX=limitScale(prevState.transformMatrix[0]*scale),resultY=limitScale(prevState.transformMatrix[3]*scale),scaleX=resultX/prevState.transformMatrix[0],scaleY=resultY/prevState.transformMatrix[3],dx=anchor.x*(1-scaleX),dy=anchor.y*(1-scaleY);transformMatrix=[resultX,0,0,resultY,prevState.transformMatrix[4]*scaleX+dx,prevState.transformMatrix[5]*scaleY+dy]}return Object.assign({},prevState,{transformMatrix:transformMatrix})}},pan=function pan(dx,dy){return 0===dx&&0===dy?_identical__WEBPACK_IMPORTED_MODULE_15__.a:function(prevState){return Object.assign({},prevState,{transformMatrix:[prevState.transformMatrix[0],prevState.transformMatrix[1],prevState.transformMatrix[2],prevState.transformMatrix[3],prevState.transformMatrix[4]+dx,prevState.transformMatrix[5]+dy]})}},minimapPan=function minimapPan(dx,dy){return 0===dx&&0===dy?_identical__WEBPACK_IMPORTED_MODULE_15__.a:function(prevState){var _prevState$transformM=_slicedToArray(prevState.transformMatrix,4),a=_prevState$transformM[0],b=_prevState$transformM[1],c=_prevState$transformM[2],d=_prevState$transformM[3];return Object.assign({},prevState,{transformMatrix:[a,b,c,d,prevState.transformMatrix[4]+a*dx+b*dy,prevState.transformMatrix[5]+c*dx+d*dy]})}},getContentArea=function getContentArea(data,graphConfig,nodeIds){var minNodeWidth=1/0,minNodeHeight=1/0,minNodeX=1/0,minNodeY=1/0,maxNodeX=-1/0,maxNodeY=-1/0;return(void 0===nodeIds?function forEachNode(fn){return data.nodes.forEach(fn)}:function forEachByIds(fn){return null==nodeIds?void 0:nodeIds.forEach((function(id){var node=data.nodes.get(id);node&&fn(node)}))})((function(node){var _getNodeSize2=Object(_layout__WEBPACK_IMPORTED_MODULE_16__.b)(node,graphConfig),nodeWidth=_getNodeSize2.width,nodeHeight=_getNodeSize2.height;node.x<minNodeX&&(minNodeX=node.x),node.y<minNodeY&&(minNodeY=node.y),node.x+nodeWidth>maxNodeX&&(maxNodeX=node.x+nodeWidth),node.y+nodeHeight>maxNodeY&&(maxNodeY=node.y+nodeHeight),nodeWidth<minNodeWidth&&(minNodeWidth=nodeWidth),nodeHeight<minNodeHeight&&(minNodeHeight=nodeHeight)})),{minNodeWidth:minNodeWidth,minNodeHeight:minNodeHeight,minNodeX:minNodeX,minNodeY:minNodeY,maxNodeX:maxNodeX,maxNodeY:maxNodeY}},getScaleRange=function getScaleRange(params,_ref4){var minNodeWidth=_ref4.width,minNodeHeight=_ref4.height,_normalizeNodeVisible=function normalizeNodeVisibleMinMax(_ref3){var nodeMinVisibleSize=_ref3.nodeMinVisibleSize,nodeMaxVisibleSize=_ref3.nodeMaxVisibleSize,nodeMinVisibleWidth=nodeMinVisibleSize.width,nodeMinVisibleHeight=nodeMinVisibleSize.height,nodeMaxVisibleWidth=nodeMaxVisibleSize.width,nodeMaxVisibleHeight=nodeMaxVisibleSize.height;if(nodeMinVisibleWidth>nodeMaxVisibleWidth){var temp=nodeMinVisibleWidth;nodeMinVisibleWidth=nodeMaxVisibleWidth,nodeMaxVisibleWidth=temp}if(nodeMinVisibleHeight>nodeMaxVisibleHeight){var _temp=nodeMinVisibleHeight;nodeMinVisibleHeight=nodeMaxVisibleHeight,nodeMaxVisibleHeight=_temp}return{nodeMinVisibleWidth:nodeMinVisibleWidth,nodeMinVisibleHeight:nodeMinVisibleHeight,nodeMaxVisibleWidth:nodeMaxVisibleWidth,nodeMaxVisibleHeight:nodeMaxVisibleHeight}}(params),nodeMinVisibleWidth=_normalizeNodeVisible.nodeMinVisibleWidth,nodeMinVisibleHeight=_normalizeNodeVisible.nodeMinVisibleHeight,nodeMaxVisibleWidth=_normalizeNodeVisible.nodeMaxVisibleWidth,nodeMaxVisibleHeight=_normalizeNodeVisible.nodeMaxVisibleHeight,minScaleX=0,minScaleY=0,maxScaleX=1/0,maxScaleY=1/0;return minNodeWidth&&(minScaleX=nodeMinVisibleWidth/minNodeWidth,maxScaleX=nodeMaxVisibleWidth/minNodeWidth),minNodeHeight&&(minScaleY=nodeMinVisibleHeight/minNodeHeight,maxScaleY=nodeMaxVisibleHeight/minNodeHeight),{minScaleX:minScaleX,minScaleY:minScaleY,maxScaleX:maxScaleX,maxScaleY:maxScaleY}},getZoomFitMatrix=function getZoomFitMatrix(args){var data=args.data,graphConfig=args.graphConfig,disablePan=args.disablePan,direction=args.direction,rect=args.rect;if(0===data.nodes.size)return[1,0,0,1,0,0];var _getContentArea=getContentArea(data,graphConfig),minNodeWidth=_getContentArea.minNodeWidth,minNodeHeight=_getContentArea.minNodeHeight,minNodeX=_getContentArea.minNodeX,minNodeY=_getContentArea.minNodeY,maxNodeX=_getContentArea.maxNodeX,maxNodeY=_getContentArea.maxNodeY,_getScaleRange=getScaleRange(args,{width:minNodeWidth,height:minNodeHeight}),minScaleX=_getScaleRange.minScaleX,minScaleY=_getScaleRange.minScaleY,maxScaleX=_getScaleRange.maxScaleX,maxScaleY=_getScaleRange.maxScaleY,spacing=function normalizeSpacing(spacing){return spacing?"number"==typeof spacing?{top:spacing,right:spacing,bottom:spacing,left:spacing}:Object.assign({top:0,right:0,bottom:0,left:0},spacing):{top:0,right:0,bottom:0,left:0}}(args.spacing),width=rect.width,height=rect.height,scaleX=width/(maxNodeX-minNodeX+spacing.left+spacing.right),scaleY=height/(maxNodeY-minNodeY+spacing.top+spacing.bottom),scaleCommon=direction===_models_geometry__WEBPACK_IMPORTED_MODULE_13__.a.Y?Math.min(Math.max(minScaleX,minScaleY,scaleY),maxScaleX,maxScaleY):Math.min(Math.max(minScaleX,minScaleY,Math.min(scaleX,scaleY)),maxScaleY,maxScaleY),newScaleX=direction===_models_geometry__WEBPACK_IMPORTED_MODULE_13__.a.XY?Math.min(Math.max(minScaleX,scaleX),maxScaleX):scaleCommon,newScaleY=direction===_models_geometry__WEBPACK_IMPORTED_MODULE_13__.a.XY?Math.min(Math.max(minScaleY,scaleY),maxScaleY):scaleCommon;if(disablePan)return[newScaleX,0,0,newScaleY,0,0];var dx=-newScaleX*(minNodeX-spacing.left),dy=-newScaleY*(minNodeY-spacing.top);if(getVisibleNodes(data.nodes,{rect:rect,transformMatrix:[newScaleX,0,0,newScaleY,dx,dy]},graphConfig).length>0)return[newScaleX,0,0,newScaleY,dx,dy];var focusNode=data.nodes.first();return focusNode&&data.nodes.forEach((function(node){focusNode.y>node.y&&(focusNode=node)})),[newScaleX,0,0,newScaleY,-newScaleX*(focusNode.x-spacing.left),-newScaleY*(focusNode.y-spacing.top)]},focusArea=function focusArea(minX,minY,maxX,maxY,viewport){var width=maxX-minX,height=maxY-minY,scale=Math.min(viewport.rect.width/width,viewport.rect.height/height),dx=-scale*(minX+width/2)+viewport.rect.width/2,dy=-scale*(minY+height/2)+viewport.rect.height/2;return Object.assign({},viewport,{transformMatrix:[scale,0,0,scale,dx,dy]})};function getContainerCenter(rectRef){var rect=rectRef.current;if(rect)return{x:rect.width/2,y:rect.height/2}}function getRelativePoint(rect,e){return{x:e.clientX-rect.left,y:e.clientY-rect.top}}var scrollIntoView=function scrollIntoView(x,y,rect,alwaysScroll,position){if(!rect)return _identical__WEBPACK_IMPORTED_MODULE_15__.a;var width=rect.width,height=rect.height;return x<0||x>width||y<0||y>height||alwaysScroll?function(prevState){var dx=position?position.x-x:width/2-x,dy=position?position.y-y:height/2-y;return Object.assign({},prevState,{transformMatrix:[prevState.transformMatrix[0],prevState.transformMatrix[1],prevState.transformMatrix[2],prevState.transformMatrix[3],prevState.transformMatrix[4]+dx,prevState.transformMatrix[5]+dy]})}:_identical__WEBPACK_IMPORTED_MODULE_15__.a},getScaleLimit=function getScaleLimit(data,settings){var _getContentArea2=getContentArea(data,settings.graphConfig),minNodeWidth=_getContentArea2.minNodeWidth,minNodeHeight=_getContentArea2.minNodeHeight,_getScaleRange2=getScaleRange(settings,{width:minNodeWidth,height:minNodeHeight}),minScaleX=_getScaleRange2.minScaleX,minScaleY=_getScaleRange2.minScaleY;return Math.max(minScaleX,minScaleY)}},272:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getTopoSortingNodes}));__webpack_require__(20),__webpack_require__(66),__webpack_require__(7),__webpack_require__(14),__webpack_require__(6),__webpack_require__(16),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(19),__webpack_require__(15),__webpack_require__(11);var toposort__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(540);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var getTopoSortingNodes=function getTopoSortingNodes(canvasData){var edges=canvasData.edges,nodes=canvasData.nodes;if(!nodes.length)return[];if(!edges.length)return _toConsumableArray(nodes);var edgesForTopo=edges.map((function(edge){return[edge.source,edge.target]})),nodesForTopo=nodes.map((function(node){return node.id})),orderOfNodeIds=toposort__WEBPACK_IMPORTED_MODULE_12__.array(nodesForTopo,edgesForTopo),newNodes=[];return orderOfNodeIds.map((function(id){var node=nodes.find((function(it){return it.id===id}));node&&newNodes.push(node)})),newNodes}},273:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return constantEmptyArray}));var emptyArrayInstance=[];function constantEmptyArray(){return emptyArrayInstance}},274:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useContextMenuConfigContext}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_contexts__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(54),useContextMenuConfigContext=function useContextMenuConfigContext(){return react__WEBPACK_IMPORTED_MODULE_0__.useContext(_contexts__WEBPACK_IMPORTED_MODULE_1__.b)}},275:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useGraphReducer}));__webpack_require__(20),__webpack_require__(34),__webpack_require__(7),__webpack_require__(14),__webpack_require__(6),__webpack_require__(16),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(15),__webpack_require__(11),__webpack_require__(19);var react=__webpack_require__(0),createGraphState=__webpack_require__(63),behaviorReducer=__webpack_require__(284),constants=(__webpack_require__(12),__webpack_require__(56),__webpack_require__(27),__webpack_require__(212),__webpack_require__(21)),Features=__webpack_require__(32),element_state=__webpack_require__(18),models_event=__webpack_require__(1),utils=__webpack_require__(3),utils_history=__webpack_require__(145),_excluded=["type"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var composeReducers=__webpack_require__(216),v4=__webpack_require__(934),GraphStateContext=__webpack_require__(114),a11yUtils=__webpack_require__(52);function attachPort(state,nodeId,portId){if(!state.connectState)return state;var data=state.data.present;return data=data.updatePort(nodeId,portId,Object(utils.updateState)(Object(utils.addState)(element_state.c.connectingAsTarget))),state.connectState.targetNode&&state.connectState.targetPort&&(data=data.updatePort(state.connectState.targetNode,state.connectState.targetPort,Object(utils.updateState)(Object(utils.removeState)(element_state.c.connectingAsTarget)))),Object.assign({},state,{connectState:Object.assign({},state.connectState,{targetNode:nodeId,targetPort:portId}),data:Object.assign({},state.data,{present:data})})}function clearAttach(state){if(!state.connectState)return state;var data=state.data.present,_state$connectState=state.connectState,targetPort=_state$connectState.targetPort,targetNode=_state$connectState.targetNode;return targetNode&&targetPort&&(data=data.updatePort(targetNode,targetPort,Object(utils.updateState)(Object(utils.removeState)(element_state.c.connectingAsTarget)))),Object.assign({},state,{connectState:Object.assign({},state.connectState,{targetNode:void 0,targetPort:void 0}),data:Object.assign({},state.data,{present:data})})}var dummy_node=__webpack_require__(148),geometry=__webpack_require__(87),models_state=__webpack_require__(35),autoAlign=__webpack_require__(149),identical=(__webpack_require__(506),__webpack_require__(70));function pipe(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return args.reduceRight((function(result,current){return function(value){return result(current(value))}}),identical.a)}var getDelta=function getDelta(start,end,value){return value<start?-10:value>end?10:0};function getSelectedNodes(data,graphConfig){var nodes=[];return data.nodes.forEach((function(node){Object(utils.isSelected)(node)&&nodes.push(Object.assign({id:node.id,x:node.x,y:node.y},Object(utils.getNodeSize)(node,graphConfig)))})),nodes}var SelectBox=__webpack_require__(185),geometric=__webpack_require__(142),layout=__webpack_require__(69),utils_transformMatrix=__webpack_require__(72),updateNodeBySelectBox_selectNodeBySelectBox=function selectNodeBySelectBox(graphConfig,transformMatrix,selectBox,data){if(!selectBox.width||!selectBox.height)return data;var selectAreaMinX=Math.min(selectBox.startX,selectBox.startX+selectBox.width),selectAreaMaxX=Math.max(selectBox.startX,selectBox.startX+selectBox.width),selectAreaMinY=Math.min(selectBox.startY,selectBox.startY+selectBox.height),selectAreaMaxY=Math.max(selectBox.startY,selectBox.startY+selectBox.height),primeSelectionMin=Object(utils_transformMatrix.e)(selectAreaMinX,selectAreaMinY,transformMatrix),primeSelectionMax=Object(utils_transformMatrix.e)(selectAreaMaxX,selectAreaMaxY,transformMatrix),primeRectSelectionBox={minX:primeSelectionMin.x,minY:primeSelectionMin.y,maxX:primeSelectionMax.x,maxY:primeSelectionMax.y};return data.selectNodes((function(n){var _getNodeSize=Object(layout.b)(n,graphConfig),width=_getNodeSize.width,height=_getNodeSize.height,rectNode={minX:n.x,minY:n.y,maxX:n.x+width,maxY:n.y+height};return Object(geometric.a)(primeRectSelectionBox,rectNode)}))};__webpack_require__(66),__webpack_require__(500);function getRectCenter(rect){return{x:rect.width/2,y:rect.height/2}}var viewportReducer_reducer=function reducer(viewport,action,data,settings){var _action$anchor,_action$anchor2,graphConfig=settings.graphConfig,canvasBoundaryPadding=settings.canvasBoundaryPadding,features=settings.features,limitScale=function limitScale(scale){return Math.max(scale,Object(utils.getScaleLimit)(data,settings))};switch(action.type){case models_event.a.ViewportResize:return Object.assign({},viewport,{rect:action.viewportRect});case models_event.a.Zoom:return Object(utils.isViewportComplete)(viewport)?Object(utils.zoom)({scale:action.scale,anchor:null!==(_action$anchor=action.anchor)&&void 0!==_action$anchor?_action$anchor:getRectCenter(viewport.rect),direction:action.direction,limitScale:limitScale})(viewport):viewport;case models_event.g.Scroll:case models_event.a.MouseWheelScroll:case models_event.a.Pan:case models_event.a.Drag:var _data$groups,_data$groups$;if(!Object(utils.isViewportComplete)(viewport))return viewport;var transformMatrix=viewport.transformMatrix,rect=viewport.rect,dx=action.dx,dy=action.dy,limitBoundary=features.has(Features.a.limitBoundary),groupPadding=null===(_data$groups=data.groups)||void 0===_data$groups||null===(_data$groups$=_data$groups[0])||void 0===_data$groups$?void 0:_data$groups$.padding;if(limitBoundary){var _getOffsetLimit=Object(utils.getOffsetLimit)({data:data,graphConfig:graphConfig,rect:rect,transformMatrix:transformMatrix,canvasBoundaryPadding:canvasBoundaryPadding,groupPadding:groupPadding}),minX=_getOffsetLimit.minX,maxX=_getOffsetLimit.maxX,minY=_getOffsetLimit.minY,maxY=_getOffsetLimit.maxY;dx=Object(utils.clamp)(minX-transformMatrix[4],maxX-transformMatrix[4],dx),dy=Object(utils.clamp)(minY-transformMatrix[5],maxY-transformMatrix[5],dy)}return Object(utils.pan)(dx,dy)(viewport);case models_event.a.Pinch:var _dx=action.dx,_dy=action.dy,scale=action.scale,anchor=action.anchor;return pipe(Object(utils.pan)(_dx,_dy),Object(utils.zoom)({scale:scale,anchor:anchor,limitScale:limitScale}))(viewport);case models_event.d.Pan:return Object(utils.minimapPan)(action.dx,action.dy)(viewport);case models_event.a.ResetViewport:return function resetViewport(viewport,data,graphConfig,action){if(!Object(utils.isViewportComplete)(viewport))return viewport;if(!action.ensureNodeVisible)return Object.assign({},viewport,{transformMatrix:createGraphState.b});var nodes=data.nodes,groups=data.groups;if(0===nodes.size)return Object.assign({},viewport,{transformMatrix:createGraphState.b});var isShapeRectInViewport=function isShapeRectInViewport(r){return Object(utils.isRectVisible)(r,viewport)},nodeRects=nodes.map((function(n){return Object(utils.getNodeRect)(n,graphConfig)}));if(nodeRects.find(isShapeRectInViewport))return Object.assign({},viewport,{transformMatrix:createGraphState.b});var groupRects=groups.map((function(g){return Object(utils.getGroupRect)(g,nodes,graphConfig)}));if(groupRects.find(isShapeRectInViewport))return Object.assign({},viewport,{transformMatrix:createGraphState.b});var focusNode=nodeRects.first(),findTopMostRect=function findTopMostRect(cur){focusNode.y>cur.y&&(focusNode=cur)};return nodeRects.forEach(findTopMostRect),groupRects.forEach(findTopMostRect),Object.assign({},viewport,{transformMatrix:[1,0,0,1,-focusNode.x,-focusNode.y]})}(viewport,data,graphConfig,action);case models_event.a.ZoomTo:return Object(utils.isViewportComplete)(viewport)?Object(utils.zoomTo)({scale:action.scale,anchor:null!==(_action$anchor2=action.anchor)&&void 0!==_action$anchor2?_action$anchor2:getRectCenter(viewport.rect),direction:action.direction,limitScale:limitScale})(viewport):viewport;case models_event.a.ZoomToFit:return function zoomToFit(viewport,data,settings,action){if(!Object(utils.isViewportComplete)(viewport))return viewport;var graphConfig=settings.graphConfig,nodeMaxVisibleSize=settings.nodeMaxVisibleSize,nodeMinVisibleSize=settings.nodeMinVisibleSize,transformMatrix=Object(utils.getZoomFitMatrix)(Object.assign({},action,{data:data,graphConfig:graphConfig,rect:viewport.rect,nodeMaxVisibleSize:nodeMaxVisibleSize,nodeMinVisibleSize:nodeMinVisibleSize}));return Object.assign({},viewport,{transformMatrix:transformMatrix})}(viewport,data,settings,action);case models_event.a.ScrollIntoView:if(viewport.rect){var _transformPoint=Object(utils.transformPoint)(action.x,action.y,viewport.transformMatrix),x=_transformPoint.x,y=_transformPoint.y;return Object(utils.scrollIntoView)(x,y,viewport.rect,!0)(viewport)}return viewport;default:return viewport}},batchedUpdates=__webpack_require__(189),useConst=__webpack_require__(115);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var builtinReducer=Object(composeReducers.a)([behaviorReducer.a,function viewportReducer(state,action){var viewport=viewportReducer_reducer(state.viewport,action,state.data.present,state.settings);return viewport===state.viewport?state:Object.assign({},state,{viewport:viewport})},function nodeReducer(state,action){var data=state.data.present;switch(action.type){case models_event.e.ResizingStart:return Object.assign({},state,{dummyNodes:Object.assign({},Object(dummy_node.a)(),{isVisible:!0,nodes:getSelectedNodes(data,state.settings.graphConfig)})});case models_event.e.Resizing:return Object.assign({},state,{dummyNodes:Object.assign({},state.dummyNodes,{dx:action.dx,dy:action.dy,dWidth:action.dWidth,dHeight:action.dHeight})});case models_event.e.ResizingEnd:var _state$dummyNodes2=state.dummyNodes,dx=_state$dummyNodes2.dx,dy=_state$dummyNodes2.dy,dWidth=_state$dummyNodes2.dWidth,dHeight=_state$dummyNodes2.dHeight;return Object.assign({},state,{dummyNodes:Object(dummy_node.a)(),data:Object(utils.pushHistory)(state.data,data.updateNodesPositionAndSize(state.dummyNodes.nodes.map((function(node){return Object.assign({},node,{x:node.x+dx,y:node.y+dy,width:node.width+dWidth,height:node.height+dHeight})}))),Object(utils.unSelectAllEntity)())});case models_event.e.DragStart:return function dragStart(state,action){var selectedNodes,data=state.data.present,targetNode=data.nodes.get(action.node.id);return targetNode?(selectedNodes=action.isMultiSelect?getSelectedNodes(data=data.selectNodes((function(node){return node.id===action.node.id||Object(utils.isSelected)(node)})),state.settings.graphConfig):Object(utils.isSelected)(targetNode)?getSelectedNodes(data,state.settings.graphConfig):[Object.assign({id:action.node.id,x:action.node.x,y:action.node.y},Object(utils.getNodeSize)(action.node,state.settings.graphConfig))],Object.assign({},state,{data:Object.assign({},state.data,{present:data}),dummyNodes:Object.assign({},Object(dummy_node.a)(),{isVisible:!1,nodes:selectedNodes})})):state}(state,action);case models_event.e.Drag:return function dragNodeHandler(state,event){if(!Object(utils.isViewportComplete)(state.viewport))return state;var e=event.rawEvent,rect=state.viewport.rect,nextState=Object.assign({},state),data=state.data.present,viewportDx=getDelta(rect.left,rect.right,e.clientX),viewportDy=getDelta(rect.top,rect.bottom,e.clientY),scale=0!==viewportDx||0!==viewportDy?.999:1,viewport=0!==viewportDx||0!==viewportDx?pipe(Object(utils.pan)(-viewportDx,-viewportDy),Object(utils.zoom)({scale:scale,anchor:Object(utils.getRelativePoint)(rect,e),direction:geometry.a.XY,limitScale:function limitScale(scale){return Math.max(scale,Object(utils.getScaleLimit)(data,state.settings))}}))(state.viewport):state.viewport,delta=Object(utils.getPointDeltaByClientDelta)(event.dx+viewportDx*scale,event.dy+viewportDy*scale,viewport.transformMatrix),dummyNodes=Object.assign({},state.dummyNodes,{dx:state.dummyNodes.dx+delta.x,dy:state.dummyNodes.dy+delta.y,isVisible:event.isVisible});if(event.isAutoAlignEnable){var renderedNodes=Object(utils.getRenderedNodes)(data.nodes,state.viewport);if(renderedNodes.length<event.autoAlignThreshold){var nodes=dummyNodes.nodes.map((function(it){return Object.assign({},it,{x:it.x+dummyNodes.dx,y:it.y+dummyNodes.dy})})),alignmentLines=Object(autoAlign.a)(nodes,renderedNodes,state.settings.graphConfig,state.viewport.transformMatrix[0]>.3?2:5);if(alignmentLines.length){var dxAligned=Object(autoAlign.b)(alignmentLines,nodes,state.settings.graphConfig,"x"),dyAligned=Object(autoAlign.b)(alignmentLines,nodes,state.settings.graphConfig,"y");dummyNodes.alignedDX=dummyNodes.dx+dxAligned,dummyNodes.alignedDY=dummyNodes.dy+dyAligned}else dummyNodes.alignedDX=void 0,dummyNodes.alignedDY=void 0;nextState.alignmentLines=alignmentLines}else dummyNodes.alignedDX=void 0,dummyNodes.alignedDY=void 0}return nextState.dummyNodes=dummyNodes,nextState.viewport=viewport,nextState}(state,action);case models_event.e.DragEnd:return function dragEnd(state,action){var data=state.data.present;if(action.isDragCanceled)return Object.assign({},state,{alignmentLines:[],dummyNodes:Object(dummy_node.a)()});var _state$dummyNodes=state.dummyNodes,dx=_state$dummyNodes.dx,dy=_state$dummyNodes.dy;return data=data.updateNodesPositionAndSize(state.dummyNodes.nodes.map((function(node){return Object.assign({},node,{x:node.x+dx,y:node.y+dy,width:void 0,height:void 0})}))),Object.assign({},state,{alignmentLines:[],dummyNodes:Object(dummy_node.a)(),data:Object(utils.pushHistory)(state.data,data,Object(utils.unSelectAllEntity)())})}(state,action);case models_event.e.PointerEnter:return state.behavior===models_state.b.default?Object.assign({},state,{data:Object.assign({},state.data,{present:data.updateNode(action.node.id,Object(utils.updateState)(Object(utils.addState)(element_state.b.activated)))})}):state;case models_event.e.PointerLeave:switch(state.behavior){case models_state.b.default:case models_state.b.connecting:return Object.assign({},state,{data:Object.assign({},state.data,{present:data.updateNode(action.node.id,Object(utils.updateState)(Object(utils.removeState)(element_state.b.activated)))})});default:return state}case models_event.a.DraggingNodeFromItemPanel:return function handleDraggingNewNode(state,action){if(!state.settings.features.has(Features.a.autoAlign))return state;var data=state.data.present,renderedNodes=Object(utils.getRenderedNodes)(data.nodes,state.viewport),alignmentLines=Object(autoAlign.a)([action.node],renderedNodes,state.settings.graphConfig,state.viewport.transformMatrix[0]>.3?2:5);return Object.assign({},state,{alignmentLines:alignmentLines})}(state,action);case models_event.a.DraggingNodeFromItemPanelEnd:return action.node?Object.assign({},state,{alignmentLines:[],data:Object(utils.pushHistory)(state.data,state.data.present.insertNode(Object.assign({},action.node,{state:element_state.b.selected})),Object(utils.unSelectAllEntity)())}):Object.assign({},state,{alignmentLines:[]});case models_event.e.Centralize:case models_event.e.Locate:return function locateNode(action,state){var data=state.data.present;if(!Object(utils.isViewportComplete)(state.viewport)||!action.nodes.length)return state;if(1===action.nodes.length){var nodeId=action.nodes[0],node=data.nodes.get(nodeId);if(!node)return state;var _getNodeSize=Object(utils.getNodeSize)(node,state.settings.graphConfig),width=_getNodeSize.width,height=_getNodeSize.height,nodeX=action.type===models_event.e.Centralize?node.x+width/2:node.x,nodeY=action.type===models_event.e.Centralize?node.y+height/2:node.y,_transformPoint=Object(utils.transformPoint)(nodeX,nodeY,state.viewport.transformMatrix),clientX=_transformPoint.x,clientY=_transformPoint.y,position=action.type===models_event.e.Locate?action.position:void 0;return Object.assign({},state,{viewport:Object(utils.scrollIntoView)(clientX,clientY,state.viewport.rect,!0,position)(state.viewport)})}var _getContentArea=Object(utils.getContentArea)(data,state.settings.graphConfig,new Set(action.nodes)),minNodeX=_getContentArea.minNodeX,minNodeY=_getContentArea.minNodeY,maxNodeX=_getContentArea.maxNodeX,maxNodeY=_getContentArea.maxNodeY;return Object.assign({},state,{viewport:Object(utils.focusArea)(minNodeX,minNodeY,maxNodeX,maxNodeY,state.viewport)})}(action,state);case models_event.e.Add:return Object.assign({},state,{data:Object(utils.pushHistory)(state.data,data.insertNode(action.node))});case models_event.e.DoubleClick:return Object.assign({},state,{data:Object.assign({},state.data,{present:state.data.present.updateNode(action.node.id,Object(utils.updateState)(Object(utils.addState)(element_state.b.editing)))})});default:return state}},function portReducer(state,action){switch(action.type){case models_event.f.Focus:case models_event.f.PointerEnter:return Object.assign({},state,{data:Object.assign({},state.data,{present:state.data.present.updatePort(action.node.id,action.port.id,Object(utils.updateState)(Object(utils.addState)(element_state.c.activated)))})});case models_event.f.Blur:case models_event.f.PointerLeave:return Object.assign({},state,{data:Object.assign({},state.data,{present:state.data.present.updatePort(action.node.id,action.port.id,Object(utils.updateState)(Object(utils.removeState)(element_state.c.activated)))})});case models_event.f.Click:case models_event.f.ContextMenu:return Object.assign({},state,{data:Object.assign({},state.data,{present:Object(utils.unSelectAllEntity)()(state.data.present).updatePort(action.node.id,action.port.id,Object(utils.updateState)(Object(utils.addState)(element_state.c.selected)))})});default:return state}},function edgeReducer(state,action){switch(action.type){case models_event.c.DoubleClick:return state.settings.features.has(Features.a.editEdge)?Object.assign({},state,{data:Object.assign({},state.data,{present:state.data.present.updateEdge(action.edge.id,Object(utils.updateState)(Object(utils.resetState)(element_state.a.editing)))})}):state;case models_event.c.MouseEnter:return Object.assign({},state,{data:Object.assign({},state.data,{present:state.data.present.updateEdge(action.edge.id,Object(utils.updateState)(Object(utils.addState)(element_state.a.activated)))})});case models_event.c.MouseLeave:return Object.assign({},state,{data:Object.assign({},state.data,{present:state.data.present.updateEdge(action.edge.id,Object(utils.updateState)(Object(utils.removeState)(element_state.a.activated)))})});case models_event.c.Click:case models_event.c.ContextMenu:return Object.assign({},state,{data:Object.assign({},state.data,{present:Object(utils.unSelectAllEntity)()(state.data.present).updateEdge(action.edge.id,Object(utils.updateState)(Object(utils.addState)(element_state.a.selected)))})});case models_event.c.Add:return Object.assign({},state,{data:Object(utils.pushHistory)(state.data,state.data.present.insertEdge(action.edge))});default:return state}},function canvasReducer(state,action){switch(action.type){case models_event.a.Paste:var position=action.position;if(!Object(utils.isViewportComplete)(state.viewport))return state;var rect=state.viewport.rect,pasteNodes=action.data.nodes;if(position&&rect){var dx,dy,realPoint=Object(utils.getRealPointFromClientPoint)(position.x,position.y,state.viewport);pasteNodes=pasteNodes.map((function(n,idx){return 0===idx&&(dx=realPoint.x-n.x,dy=realPoint.y-n.y),Object.assign({},n,{x:dx?n.x-constants.a+dx:n.x,y:dy?n.y-constants.a+dy:n.y,state:element_state.b.selected})}))}var next=Object(utils.unSelectAllEntity)()(state.data.present);return pasteNodes.forEach((function(node){next=next.insertNode(node)})),action.data.edges.forEach((function(edge){next=next.insertEdge(edge)})),Object.assign({},state,{data:Object(utils_history.a)(state.data,next)});case models_event.a.Delete:return state.settings.features.has(Features.a.delete)?Object.assign({},state,{data:Object(utils_history.a)(state.data,state.data.present.deleteItems({node:utils.notSelected,edge:utils.notSelected}),Object(utils.unSelectAllEntity)())}):state;case models_event.a.Undo:return Object.assign({},state,{data:Object(utils_history.d)(state.data)});case models_event.a.Redo:return Object.assign({},state,{data:Object(utils_history.b)(state.data)});case models_event.a.KeyDown:var key=action.rawEvent.key.toLowerCase();if(state.activeKeys.has(key))return state;var set=new Set(state.activeKeys);return set.add(key),Object.assign({},state,{activeKeys:set});case models_event.a.KeyUp:var _key=action.rawEvent.key.toLowerCase();if(!state.activeKeys.has(_key))return state;var _set=new Set(state.activeKeys);return _set.delete(_key),Object.assign({},state,{activeKeys:_set});case models_event.a.SetData:return Object.assign({},state,{data:Object(utils.resetUndoStack)(action.data)});case models_event.a.UpdateData:return Object.assign({},state,{data:action.shouldRecord?Object(utils_history.a)(state.data,action.updater(state.data.present)):Object.assign({},state.data,{present:action.updater(state.data.present)})});case models_event.a.ResetUndoStack:return Object.assign({},state,{data:Object(utils.resetUndoStack)(state.data.present)});case models_event.a.UpdateSettings:action.type;var settings=_objectWithoutProperties(action,_excluded);return Object.assign({},state,{settings:Object.assign({},state.settings,settings)});default:return state}},function connectingReducer(state,action){var _state$connectState5,_state$connectState6,_state$connectState7;if(!Object(utils.isViewportComplete)(state.viewport))return state;var rect=state.viewport.rect;switch(action.type){case models_event.c.ConnectStart:return Object.assign({},state,{connectState:Object.assign({},GraphStateContext.a,{sourceNode:action.nodeId,sourcePort:action.portId,movingPoint:action.clientPoint?{x:action.clientPoint.x-rect.left,y:action.clientPoint.y-rect.top}:void 0}),data:Object.assign({},state.data,{present:state.data.present.updatePort(action.nodeId,action.portId,Object(utils.updateState)(Object(utils.addState)(element_state.c.connecting)))})});case models_event.c.ConnectMove:return state.connectState?Object.assign({},state,{connectState:Object.assign({},state.connectState,{movingPoint:{x:action.clientX-rect.left,y:action.clientY-rect.top}})}):state;case models_event.c.ConnectEnd:if(state.connectState){var edgeWillAdd=action.edgeWillAdd,isCancel=action.isCancel,_state$connectState2=state.connectState,sourceNode=_state$connectState2.sourceNode,sourcePort=_state$connectState2.sourcePort,targetNode=_state$connectState2.targetNode,targetPort=_state$connectState2.targetPort,data=state.data.present;if(data=data.updatePort(sourceNode,sourcePort,Object(utils.updateState)(Object(utils.resetState)(element_state.c.default))),!isCancel&&targetNode&&targetPort){var edge={source:sourceNode,sourcePortId:sourcePort,target:targetNode,targetPortId:targetPort,id:Object(v4.a)(),shape:state.settings.graphConfig.defaultEdgeShape,state:element_state.a.default};return edgeWillAdd&&(edge=edgeWillAdd(edge,data)),data=data.insertEdge(edge).updatePort(targetNode,targetPort,Object(utils.updateState)(Object(utils.resetState)(element_state.c.default))),Object.assign({},state,{connectState:void 0,data:Object(utils.pushHistory)(state.data,data,Object(utils.unSelectAllEntity)())})}return Object.assign({},state,{connectState:void 0,data:Object.assign({},state.data,{present:data})})}return state;case models_event.c.ConnectNavigate:if(state.connectState){var _data=state.data.present,_sourceNode=_data.nodes.get(state.connectState.sourceNode),_sourcePort=null==_sourceNode?void 0:_sourceNode.getPort(state.connectState.sourcePort),_targetNode=state.connectState.targetNode?_data.nodes.get(state.connectState.targetNode):void 0,_targetPort=state.connectState.targetPort?null==_targetNode?void 0:_targetNode.getPort(state.connectState.targetPort):void 0;if(!_sourceNode||!_sourcePort)return state;var next=Object(a11yUtils.n)(state.settings.graphConfig,{anotherNode:_sourceNode,anotherPort:_sourcePort})(_data,_targetNode||_sourceNode,_targetPort);return!next.node||!next.port||next.node.id===_sourceNode.id&&next.port.id===_sourcePort.id?state:attachPort(state,next.node.id,next.port.id)}return state;case models_event.f.PointerEnter:if(state.connectState){var _state$connectState3=state.connectState,_sourceNode2=_state$connectState3.sourceNode,_sourcePort2=_state$connectState3.sourcePort,_data2=state.data.present,node=_data2.nodes.get(action.node.id),port=null==node?void 0:node.getPort(action.port.id),anotherNode=_data2.nodes.get(_sourceNode2),anotherPort=null==anotherNode?void 0:anotherNode.getPort(_sourcePort2);if(node&&port&&anotherNode&&anotherPort&&Object(utils.isConnectable)(state.settings.graphConfig,{parentNode:node,model:port,data:_data2,anotherPort:anotherPort,anotherNode:anotherNode}))return attachPort(state,node.id,port.id)}return state;case models_event.e.PointerEnter:case models_event.e.PointerMove:if(state.connectState){var _ref=action.rawEvent,clientX=_ref.clientX,clientY=_ref.clientY,_state$connectState4=state.connectState,_sourceNode3=_state$connectState4.sourceNode,_sourcePort3=_state$connectState4.sourcePort,_data3=state.data.present,_node=_data3.nodes.get(action.node.id),_anotherNode=_data3.nodes.get(_sourceNode3),_anotherPort=null==_anotherNode?void 0:_anotherNode.getPort(_sourcePort3);if(_node&&_anotherNode&&_anotherPort){var _targetPort2=Object(utils.getNearestConnectablePort)({parentNode:_node,clientX:clientX,clientY:clientY,graphConfig:state.settings.graphConfig,data:state.data.present,viewport:state.viewport,anotherPort:_anotherPort,anotherNode:_anotherNode});return _targetPort2?attachPort(state,_node.id,_targetPort2.id):state}}return state;case models_event.e.PointerLeave:return(null===(_state$connectState5=state.connectState)||void 0===_state$connectState5?void 0:_state$connectState5.targetNode)===action.node.id?clearAttach(state):state;case models_event.f.PointerLeave:return(null===(_state$connectState6=state.connectState)||void 0===_state$connectState6?void 0:_state$connectState6.targetNode)===action.node.id&&(null===(_state$connectState7=state.connectState)||void 0===_state$connectState7?void 0:_state$connectState7.targetPort)===action.port.id?clearAttach(state):state;default:return state}},function selectionReducer(state,action){var _state$viewport$rect$,_state$viewport$rect,data=state.data.present,isLassoSelectEnable=state.settings.features.has(Features.a.lassoSelect);switch(action.type){case models_event.a.Click:case models_event.a.ResetSelection:case models_event.a.ContextMenu:return Object.assign({},state,{data:Object.assign({},state.data,{present:Object(utils.unSelectAllEntity)()(data)})});case models_event.e.Click:case models_event.e.ContextMenu:return Object.assign({},state,{data:Object.assign({},state.data,{present:Object(utils.nodeSelection)(action.rawEvent,action.node)(data)})});case models_event.a.SelectStart:if(!Object(utils.isViewportComplete)(state.viewport))return state;var point=Object(utils.getRelativePoint)(state.viewport.rect,action.rawEvent);return Object.assign({},state,{data:Object.assign({},state.data,{present:Object(utils.unSelectAllEntity)()(data)}),selectBoxPosition:{startX:point.x,startY:isLassoSelectEnable?0:point.y,width:0,height:0}});case models_event.a.SelectMove:return state.behavior!==models_state.b.multiSelect?state:Object.assign({},state,{selectBoxPosition:Object.assign({},state.selectBoxPosition,{width:state.selectBoxPosition.width+action.dx,height:isLassoSelectEnable?null!==(_state$viewport$rect$=null===(_state$viewport$rect=state.viewport.rect)||void 0===_state$viewport$rect?void 0:_state$viewport$rect.height)&&void 0!==_state$viewport$rect$?_state$viewport$rect$:state.selectBoxPosition.height:state.selectBoxPosition.height+action.dy})});case models_event.a.SelectEnd:return Object.assign({},state,{selectBoxPosition:Object(SelectBox.b)(),data:Object.assign({},state.data,{present:updateNodeBySelectBox_selectNodeBySelectBox(state.settings.graphConfig,state.viewport.transformMatrix,state.selectBoxPosition,data)})});case models_event.a.UpdateNodeSelectionBySelectBox:return state.behavior!==models_state.b.multiSelect?state:Object.assign({},state,{data:Object.assign({},state.data,{present:updateNodeBySelectBox_selectNodeBySelectBox(state.settings.graphConfig,state.viewport.transformMatrix,state.selectBoxPosition,data)})});case models_event.a.Navigate:return function handleNavigate(state,action){var data=Object(utils.unSelectAllEntity)()(state.data.present);if(action.node&&action.port)data=data.updatePort(action.node.id,action.port.id,Object(utils.updateState)(Object(utils.addState)(element_state.c.selected)));else if(action.node){var nodeId=action.node.id;data=data.selectNodes((function(node){return node.id===nodeId}))}return Object.assign({},state,{data:Object.assign({},state.data,{present:data})})}(state,action);case models_event.e.SelectAll:return Object.assign({},state,{data:Object.assign({},state.data,{present:data.selectNodes((function(){return!0}))})});case models_event.e.Select:var nodes=new Set(action.nodes);return Object.assign({},state,{data:Object.assign({},state.data,{present:data.selectNodes((function(node){return nodes.has(node.id)}))})});default:return state}},function contextMenuReducer(prevState,action){var nextContextMenuPosition=prevState.contextMenuPosition;switch(action.type){case models_event.a.ContextMenu:case models_event.e.ContextMenu:case models_event.c.ContextMenu:case models_event.f.ContextMenu:var e=action.rawEvent;e.button===constants.c.Secondary&&(nextContextMenuPosition={x:e.clientX,y:e.clientY});break;case models_event.a.Click:case models_event.e.Click:case models_event.c.Click:case models_event.f.Click:nextContextMenuPosition=void 0;break;case models_event.b.Open:nextContextMenuPosition={x:action.x,y:action.y};break;case models_event.b.Close:nextContextMenuPosition=void 0}return prevState.contextMenuPosition===nextContextMenuPosition?prevState:Object.assign({},prevState,{contextMenuPosition:nextContextMenuPosition})}].map((function(reducer){return function(next){return function(state,action){return next(reducer(state,action),action)}}})));function useGraphReducer(params,middleware){var reducer=react.useMemo((function(){return function getGraphReducer(){var middleware=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,finalReducer=arguments.length>1&&void 0!==arguments[1]?arguments[1]:identical.a;return(middleware?Object(composeReducers.a)([middleware,builtinReducer]):builtinReducer)(finalReducer)}(middleware)}),[middleware]),_React$useReducer2=_slicedToArray(react.useReducer(reducer,params,createGraphState.d),2),state=_React$useReducer2[0],dispatchImpl=_React$useReducer2[1],sideEffects=Object(useConst.a)((function(){return[]})),prevStateRef=react.useRef(state),dispatch=react.useCallback((function(action,callback){callback&&sideEffects.push(callback),dispatchImpl(action)}),[sideEffects]);return react.useEffect((function(){var prevState=prevStateRef.current;prevState!==state&&(prevStateRef.current=state,Object(batchedUpdates.a)((function(){sideEffects.forEach((function(callback){try{callback(state,prevState)}catch(e){console.error(e)}})),sideEffects.length=0})))}),[state]),[state,dispatch]}},277:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getOffsetLimit_getOffsetLimit}));var is=__webpack_require__(283),memoize_shallowEqual=function shallowEqual(a,b){if(!a)return!1;if(a.length!==b.length)return!1;for(var i=0;i<a.length;i+=1)if(!Object(is.a)(a[i],b[i]))return!1;return!0};var utils_transformMatrix=__webpack_require__(72),getContentArea=function memoize(f){var prev,value;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return memoize_shallowEqual(prev,args)?value:(prev=args,value=f.apply(void 0,args))}}(__webpack_require__(271).c),getOffsetLimit_getOffsetLimit=function getOffsetLimit(_ref){var _canvasBoundaryPaddin,_canvasBoundaryPaddin2,_canvasBoundaryPaddin3,_canvasBoundaryPaddin4,data=_ref.data,graphConfig=_ref.graphConfig,rect=_ref.rect,transformMatrix=_ref.transformMatrix,canvasBoundaryPadding=_ref.canvasBoundaryPadding,groupPadding=_ref.groupPadding,contentArea=getContentArea(data,graphConfig),nodeMin=Object(utils_transformMatrix.a)(contentArea.minNodeX-((null==groupPadding?void 0:groupPadding.left)||0),contentArea.minNodeY-((null==groupPadding?void 0:groupPadding.top)||0),transformMatrix);nodeMin.x-=null!==(_canvasBoundaryPaddin=null==canvasBoundaryPadding?void 0:canvasBoundaryPadding.left)&&void 0!==_canvasBoundaryPaddin?_canvasBoundaryPaddin:0,nodeMin.y-=null!==(_canvasBoundaryPaddin2=null==canvasBoundaryPadding?void 0:canvasBoundaryPadding.top)&&void 0!==_canvasBoundaryPaddin2?_canvasBoundaryPaddin2:0;var nodeMax=Object(utils_transformMatrix.a)(contentArea.maxNodeX+((null==groupPadding?void 0:groupPadding.right)||0),contentArea.maxNodeY+((null==groupPadding?void 0:groupPadding.bottom)||0),transformMatrix);nodeMax.x+=null!==(_canvasBoundaryPaddin3=null==canvasBoundaryPadding?void 0:canvasBoundaryPadding.right)&&void 0!==_canvasBoundaryPaddin3?_canvasBoundaryPaddin3:0,nodeMax.y+=null!==(_canvasBoundaryPaddin4=null==canvasBoundaryPadding?void 0:canvasBoundaryPadding.bottom)&&void 0!==_canvasBoundaryPaddin4?_canvasBoundaryPaddin4:0;var minX=-nodeMin.x||0,minY=-nodeMin.y||0,maxX=rect.width-nodeMax.x||0,maxY=rect.height-nodeMax.y||0;if(maxX<minX){var temp=maxX;maxX=minX,minX=temp}if(maxY<minY){var _temp=maxY;maxY=minY,minY=_temp}return{minX:minX,minY:minY,maxX:maxX,maxY:maxY}}},28:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return hasState})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addState})),__webpack_require__.d(__webpack_exports__,"f",(function(){return removeState})),__webpack_require__.d(__webpack_exports__,"h",(function(){return resetState})),__webpack_require__.d(__webpack_exports__,"g",(function(){return resetConnectState})),__webpack_require__.d(__webpack_exports__,"i",(function(){return updateState})),__webpack_require__.d(__webpack_exports__,"c",(function(){return isNodeEditing})),__webpack_require__.d(__webpack_exports__,"d",(function(){return isSelected})),__webpack_require__.d(__webpack_exports__,"e",(function(){return notSelected}));__webpack_require__(89),__webpack_require__(34),__webpack_require__(27),__webpack_require__(12),__webpack_require__(15),__webpack_require__(6),__webpack_require__(11),__webpack_require__(19),__webpack_require__(10),__webpack_require__(7),__webpack_require__(14),__webpack_require__(16),__webpack_require__(8),__webpack_require__(9);var _models_element_state__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(18);var hasState=function hasState(mask){return function(state){return Boolean(pickState(mask)(state))}},addState=function addState(mask){return function(state){var t=state||0;return Array.isArray(mask)?mask.reduce((function(c,m){return c|m}),t):t|mask}},pickState=function pickState(mask){return function(state){return(state||0)&mask}},removeState=function removeState(mask){return function(state){var t=state||0;return Array.isArray(mask)?mask.reduce((function(c,m){return c&~m}),t):t&~mask}},resetState=function resetState(state){return function(){return state}},resetConnectState=function resetConnectState(state){return function(prevState){return prevState&_models_element_state__WEBPACK_IMPORTED_MODULE_14__.b.activated|state}},updateState=function updateState(updater){return function(value){return updater(value.state)===value.state?value:Object.assign({},value,{state:updater(value.state)})}},isNodeEditing=function isNodeEditing(node){return hasState(_models_element_state__WEBPACK_IMPORTED_MODULE_14__.b.editing)(node.state)},isSelected=function isSelected(node){return hasState(_models_element_state__WEBPACK_IMPORTED_MODULE_14__.d)(node.state)},notSelected=function notSelected(node){return!hasState(_models_element_state__WEBPACK_IMPORTED_MODULE_14__.d)(node.state)}},282:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return defaultGroup}));__webpack_require__(490),__webpack_require__(0);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),Renderer=function Renderer(props){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("rect",{height:props.height,width:props.width,fill:props.group.fill})};Renderer.displayName="Renderer";var defaultGroup={render:Renderer}},283:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return is}));__webpack_require__(352);var is=Object.is},284:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return handleBehaviorChange})),__webpack_require__.d(__webpack_exports__,"a",(function(){return behaviorReducer}));__webpack_require__(12);var _models_event__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_models_state__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(35),handleBehaviorChange=function handleBehaviorChange(prevBehavior,event){switch(event.type){case _models_event__WEBPACK_IMPORTED_MODULE_1__.e.DragStart:return _models_state__WEBPACK_IMPORTED_MODULE_2__.b.dragging;case _models_event__WEBPACK_IMPORTED_MODULE_1__.c.ConnectStart:return _models_state__WEBPACK_IMPORTED_MODULE_2__.b.connecting;case _models_event__WEBPACK_IMPORTED_MODULE_1__.a.SelectStart:return _models_state__WEBPACK_IMPORTED_MODULE_2__.b.multiSelect;case _models_event__WEBPACK_IMPORTED_MODULE_1__.a.DragStart:return _models_state__WEBPACK_IMPORTED_MODULE_2__.b.panning;case _models_event__WEBPACK_IMPORTED_MODULE_1__.a.DraggingNodeFromItemPanelStart:return _models_state__WEBPACK_IMPORTED_MODULE_2__.b.addingNode;case _models_event__WEBPACK_IMPORTED_MODULE_1__.e.DragEnd:case _models_event__WEBPACK_IMPORTED_MODULE_1__.c.ConnectEnd:case _models_event__WEBPACK_IMPORTED_MODULE_1__.a.SelectEnd:case _models_event__WEBPACK_IMPORTED_MODULE_1__.a.DragEnd:case _models_event__WEBPACK_IMPORTED_MODULE_1__.a.DraggingNodeFromItemPanelEnd:return _models_state__WEBPACK_IMPORTED_MODULE_2__.b.default;default:return prevBehavior}},behaviorReducer=function behaviorReducer(prevState,action){var nextBehavior=handleBehaviorChange(prevState.behavior,action);return nextBehavior===prevState.behavior?prevState:Object.assign({},prevState,{behavior:nextBehavior})}},3:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(181);var _getNodeConfig__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(179);__webpack_require__.d(__webpack_exports__,"getNodeConfig",(function(){return _getNodeConfig__WEBPACK_IMPORTED_MODULE_1__.a}));var _graphDataUtils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(106);__webpack_require__.d(__webpack_exports__,"filterSelectedItems",(function(){return _graphDataUtils__WEBPACK_IMPORTED_MODULE_2__.a})),__webpack_require__.d(__webpack_exports__,"getEdgeUid",(function(){return _graphDataUtils__WEBPACK_IMPORTED_MODULE_2__.b})),__webpack_require__.d(__webpack_exports__,"getNearestConnectablePort",(function(){return _graphDataUtils__WEBPACK_IMPORTED_MODULE_2__.c})),__webpack_require__.d(__webpack_exports__,"getNodeAutomationId",(function(){return _graphDataUtils__WEBPACK_IMPORTED_MODULE_2__.e})),__webpack_require__.d(__webpack_exports__,"getNodeUid",(function(){return _graphDataUtils__WEBPACK_IMPORTED_MODULE_2__.f})),__webpack_require__.d(__webpack_exports__,"getPortAutomationId",(function(){return _graphDataUtils__WEBPACK_IMPORTED_MODULE_2__.g})),__webpack_require__.d(__webpack_exports__,"getPortUid",(function(){return _graphDataUtils__WEBPACK_IMPORTED_MODULE_2__.h})),__webpack_require__.d(__webpack_exports__,"isConnectable",(function(){return _graphDataUtils__WEBPACK_IMPORTED_MODULE_2__.i})),__webpack_require__.d(__webpack_exports__,"nodeSelection",(function(){return _graphDataUtils__WEBPACK_IMPORTED_MODULE_2__.k})),__webpack_require__.d(__webpack_exports__,"unSelectAllEntity",(function(){return _graphDataUtils__WEBPACK_IMPORTED_MODULE_2__.l}));var _transformMatrix__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(72);__webpack_require__.d(__webpack_exports__,"getPointDeltaByClientDelta",(function(){return _transformMatrix__WEBPACK_IMPORTED_MODULE_3__.c})),__webpack_require__.d(__webpack_exports__,"getRealPointFromClientPoint",(function(){return _transformMatrix__WEBPACK_IMPORTED_MODULE_3__.d})),__webpack_require__.d(__webpack_exports__,"reverseTransformPoint",(function(){return _transformMatrix__WEBPACK_IMPORTED_MODULE_3__.e})),__webpack_require__.d(__webpack_exports__,"transformPoint",(function(){return _transformMatrix__WEBPACK_IMPORTED_MODULE_3__.f}));var _getCurvePathD__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(267);__webpack_require__.d(__webpack_exports__,"getCurvePathD",(function(){return _getCurvePathD__WEBPACK_IMPORTED_MODULE_4__.a}));var _layout__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(69);__webpack_require__.d(__webpack_exports__,"getGroupRect",(function(){return _layout__WEBPACK_IMPORTED_MODULE_5__.a})),__webpack_require__.d(__webpack_exports__,"getNodeSize",(function(){return _layout__WEBPACK_IMPORTED_MODULE_5__.b})),__webpack_require__.d(__webpack_exports__,"getRectHeight",(function(){return _layout__WEBPACK_IMPORTED_MODULE_5__.c})),__webpack_require__.d(__webpack_exports__,"getRectWidth",(function(){return _layout__WEBPACK_IMPORTED_MODULE_5__.d}));var _browsers__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(269);__webpack_require__.d(__webpack_exports__,"BrowserType",(function(){return _browsers__WEBPACK_IMPORTED_MODULE_6__.a})),__webpack_require__.d(__webpack_exports__,"getBrowser",(function(){return _browsers__WEBPACK_IMPORTED_MODULE_6__.b})),__webpack_require__.d(__webpack_exports__,"isMobile",(function(){return _browsers__WEBPACK_IMPORTED_MODULE_6__.d})),__webpack_require__.d(__webpack_exports__,"isSupported",(function(){return _browsers__WEBPACK_IMPORTED_MODULE_6__.e}));var _isWithinThreshold__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(270);__webpack_require__.d(__webpack_exports__,"isWithinThreshold",(function(){return _isWithinThreshold__WEBPACK_IMPORTED_MODULE_7__.a}));var _geometric__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(142);__webpack_require__.d(__webpack_exports__,"distance",(function(){return _geometric__WEBPACK_IMPORTED_MODULE_8__.b})),__webpack_require__.d(__webpack_exports__,"getLinearFunction",(function(){return _geometric__WEBPACK_IMPORTED_MODULE_8__.c})),__webpack_require__.d(__webpack_exports__,"isPointInRect",(function(){return _geometric__WEBPACK_IMPORTED_MODULE_8__.d}));var _deepClone__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(496);__webpack_require__.d(__webpack_exports__,"deepClone",(function(){return _deepClone__WEBPACK_IMPORTED_MODULE_9__.a}));__webpack_require__(497),__webpack_require__(498),__webpack_require__(499);var _viewport__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(271);__webpack_require__.d(__webpack_exports__,"focusArea",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.a})),__webpack_require__.d(__webpack_exports__,"getContainerCenter",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.b})),__webpack_require__.d(__webpack_exports__,"getContentArea",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.c})),__webpack_require__.d(__webpack_exports__,"getNodeRect",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.d})),__webpack_require__.d(__webpack_exports__,"getRelativePoint",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.e})),__webpack_require__.d(__webpack_exports__,"getRenderedArea",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.f})),__webpack_require__.d(__webpack_exports__,"getRenderedNodes",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.g})),__webpack_require__.d(__webpack_exports__,"getScaleLimit",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.h})),__webpack_require__.d(__webpack_exports__,"getVisibleArea",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.i})),__webpack_require__.d(__webpack_exports__,"getZoomFitMatrix",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.j})),__webpack_require__.d(__webpack_exports__,"isRectVisible",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.k})),__webpack_require__.d(__webpack_exports__,"isViewportComplete",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.l})),__webpack_require__.d(__webpack_exports__,"minimapPan",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.m})),__webpack_require__.d(__webpack_exports__,"pan",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.n})),__webpack_require__.d(__webpack_exports__,"scrollIntoView",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.o})),__webpack_require__.d(__webpack_exports__,"zoom",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.p})),__webpack_require__.d(__webpack_exports__,"zoomTo",(function(){return _viewport__WEBPACK_IMPORTED_MODULE_13__.q}));var _state__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(28);__webpack_require__.d(__webpack_exports__,"addState",(function(){return _state__WEBPACK_IMPORTED_MODULE_14__.a})),__webpack_require__.d(__webpack_exports__,"hasState",(function(){return _state__WEBPACK_IMPORTED_MODULE_14__.b})),__webpack_require__.d(__webpack_exports__,"isNodeEditing",(function(){return _state__WEBPACK_IMPORTED_MODULE_14__.c})),__webpack_require__.d(__webpack_exports__,"isSelected",(function(){return _state__WEBPACK_IMPORTED_MODULE_14__.d})),__webpack_require__.d(__webpack_exports__,"notSelected",(function(){return _state__WEBPACK_IMPORTED_MODULE_14__.e})),__webpack_require__.d(__webpack_exports__,"removeState",(function(){return _state__WEBPACK_IMPORTED_MODULE_14__.f})),__webpack_require__.d(__webpack_exports__,"resetState",(function(){return _state__WEBPACK_IMPORTED_MODULE_14__.h})),__webpack_require__.d(__webpack_exports__,"updateState",(function(){return _state__WEBPACK_IMPORTED_MODULE_14__.i}));var _Writable__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(501);__webpack_require__.o(_Writable__WEBPACK_IMPORTED_MODULE_15__,"GraphConfigBuilder")&&__webpack_require__.d(__webpack_exports__,"GraphConfigBuilder",(function(){return _Writable__WEBPACK_IMPORTED_MODULE_15__.GraphConfigBuilder})),__webpack_require__.o(_Writable__WEBPACK_IMPORTED_MODULE_15__,"GraphModel")&&__webpack_require__.d(__webpack_exports__,"GraphModel",(function(){return _Writable__WEBPACK_IMPORTED_MODULE_15__.GraphModel})),__webpack_require__.o(_Writable__WEBPACK_IMPORTED_MODULE_15__,"GraphNodeState")&&__webpack_require__.d(__webpack_exports__,"GraphNodeState",(function(){return _Writable__WEBPACK_IMPORTED_MODULE_15__.GraphNodeState})),__webpack_require__.o(_Writable__WEBPACK_IMPORTED_MODULE_15__,"GraphPortState")&&__webpack_require__.d(__webpack_exports__,"GraphPortState",(function(){return _Writable__WEBPACK_IMPORTED_MODULE_15__.GraphPortState})),__webpack_require__.o(_Writable__WEBPACK_IMPORTED_MODULE_15__,"clamp")&&__webpack_require__.d(__webpack_exports__,"clamp",(function(){return _Writable__WEBPACK_IMPORTED_MODULE_15__.clamp})),__webpack_require__.o(_Writable__WEBPACK_IMPORTED_MODULE_15__,"debounce")&&__webpack_require__.d(__webpack_exports__,"debounce",(function(){return _Writable__WEBPACK_IMPORTED_MODULE_15__.debounce})),__webpack_require__.o(_Writable__WEBPACK_IMPORTED_MODULE_15__,"getOffsetLimit")&&__webpack_require__.d(__webpack_exports__,"getOffsetLimit",(function(){return _Writable__WEBPACK_IMPORTED_MODULE_15__.getOffsetLimit})),__webpack_require__.o(_Writable__WEBPACK_IMPORTED_MODULE_15__,"pushHistory")&&__webpack_require__.d(__webpack_exports__,"pushHistory",(function(){return _Writable__WEBPACK_IMPORTED_MODULE_15__.pushHistory})),__webpack_require__.o(_Writable__WEBPACK_IMPORTED_MODULE_15__,"resetUndoStack")&&__webpack_require__.d(__webpack_exports__,"resetUndoStack",(function(){return _Writable__WEBPACK_IMPORTED_MODULE_15__.resetUndoStack}));__webpack_require__(518),__webpack_require__(272);var _getOffsetLimit__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(277);__webpack_require__.d(__webpack_exports__,"getOffsetLimit",(function(){return _getOffsetLimit__WEBPACK_IMPORTED_MODULE_18__.a}));__webpack_require__(503),__webpack_require__(504),__webpack_require__(58);var _debounce__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(519);__webpack_require__.d(__webpack_exports__,"debounce",(function(){return _debounce__WEBPACK_IMPORTED_MODULE_22__.a}));__webpack_require__(505),__webpack_require__(273),__webpack_require__(108);var _clamp__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(162);__webpack_require__.d(__webpack_exports__,"clamp",(function(){return _clamp__WEBPACK_IMPORTED_MODULE_26__.a}));var _history__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(145);__webpack_require__.d(__webpack_exports__,"pushHistory",(function(){return _history__WEBPACK_IMPORTED_MODULE_27__.a})),__webpack_require__.d(__webpack_exports__,"resetUndoStack",(function(){return _history__WEBPACK_IMPORTED_MODULE_27__.c}))},32:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GraphFeatures})),__webpack_require__.d(__webpack_exports__,"b",(function(){return defaultFeatures}));var GraphFeatures;__webpack_require__(56),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9);!function(GraphFeatures){GraphFeatures.nodeDraggable="nodeDraggable",GraphFeatures.nodeResizable="nodeResizable",GraphFeatures.clickNodeToSelect="clickNodeToSelect",GraphFeatures.panCanvas="panCanvas",GraphFeatures.multipleSelect="multipleSelect",GraphFeatures.lassoSelect="lassoSelect",GraphFeatures.delete="delete",GraphFeatures.addNewNodes="addNewNodes",GraphFeatures.addNewEdges="addNewEdges",GraphFeatures.addNewPorts="addNewPorts",GraphFeatures.autoFit="autoFit",GraphFeatures.canvasHorizontalScrollable="canvasHorizontalScrollable",GraphFeatures.canvasVerticalScrollable="canvasVerticalScrollable",GraphFeatures.nodeHoverView="nodeHoverView",GraphFeatures.portHoverView="portHoverView",GraphFeatures.addEdgesByKeyboard="addEdgesByKeyboard",GraphFeatures.a11yFeatures="a11yFeatures",GraphFeatures.editNode="editNode",GraphFeatures.autoAlign="autoAlign",GraphFeatures.undoStack="undoStack",GraphFeatures.ctrlKeyZoom="ctrlKeyZoom",GraphFeatures.limitBoundary="limitBoundary",GraphFeatures.editEdge="editEdge"}(GraphFeatures||(GraphFeatures={}));new Set([GraphFeatures.nodeDraggable,GraphFeatures.nodeResizable,GraphFeatures.clickNodeToSelect,GraphFeatures.panCanvas,GraphFeatures.multipleSelect,GraphFeatures.lassoSelect,GraphFeatures.delete,GraphFeatures.addNewNodes,GraphFeatures.addNewEdges,GraphFeatures.addNewPorts,GraphFeatures.canvasHorizontalScrollable,GraphFeatures.canvasVerticalScrollable,GraphFeatures.nodeHoverView,GraphFeatures.portHoverView,GraphFeatures.addEdgesByKeyboard,GraphFeatures.a11yFeatures,GraphFeatures.autoFit,GraphFeatures.editNode,GraphFeatures.autoAlign,GraphFeatures.undoStack,GraphFeatures.ctrlKeyZoom,GraphFeatures.limitBoundary,GraphFeatures.editEdge]);var defaultFeatures=new Set([GraphFeatures.nodeDraggable,GraphFeatures.nodeResizable,GraphFeatures.clickNodeToSelect,GraphFeatures.panCanvas,GraphFeatures.multipleSelect,GraphFeatures.delete,GraphFeatures.addNewNodes,GraphFeatures.addNewEdges,GraphFeatures.addNewPorts,GraphFeatures.canvasHorizontalScrollable,GraphFeatures.canvasVerticalScrollable,GraphFeatures.nodeHoverView,GraphFeatures.portHoverView,GraphFeatures.addEdgesByKeyboard,GraphFeatures.a11yFeatures,GraphFeatures.editNode,GraphFeatures.autoAlign,GraphFeatures.undoStack,GraphFeatures.ctrlKeyZoom,GraphFeatures.limitBoundary]);new Set([GraphFeatures.nodeDraggable,GraphFeatures.nodeResizable,GraphFeatures.clickNodeToSelect,GraphFeatures.panCanvas,GraphFeatures.multipleSelect,GraphFeatures.canvasHorizontalScrollable,GraphFeatures.canvasVerticalScrollable,GraphFeatures.nodeHoverView,GraphFeatures.portHoverView,GraphFeatures.a11yFeatures,GraphFeatures.ctrlKeyZoom,GraphFeatures.limitBoundary]),new Set([GraphFeatures.clickNodeToSelect,GraphFeatures.canvasHorizontalScrollable,GraphFeatures.canvasVerticalScrollable,GraphFeatures.nodeHoverView,GraphFeatures.portHoverView,GraphFeatures.a11yFeatures,GraphFeatures.lassoSelect,GraphFeatures.limitBoundary]),new Set([GraphFeatures.nodeHoverView,GraphFeatures.portHoverView,GraphFeatures.autoFit])},35:function(module,__webpack_exports__,__webpack_require__){"use strict";var CanvasMouseMode,GraphBehavior;__webpack_require__.d(__webpack_exports__,"a",(function(){return CanvasMouseMode})),__webpack_require__.d(__webpack_exports__,"b",(function(){return GraphBehavior})),function(CanvasMouseMode){CanvasMouseMode.pan="pan",CanvasMouseMode.select="select"}(CanvasMouseMode||(CanvasMouseMode={})),function(GraphBehavior){GraphBehavior.default="default",GraphBehavior.dragging="dragging",GraphBehavior.panning="panning",GraphBehavior.multiSelect="multiSelect",GraphBehavior.connecting="connecting",GraphBehavior.addingNode="addingNode"}(GraphBehavior||(GraphBehavior={}))},39:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return is})),__webpack_require__.d(__webpack_exports__,"a",(function(){return MapIterator}));__webpack_require__(352),__webpack_require__(16),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(7),__webpack_require__(14);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var is=Object.is,MapIterator=function(_Symbol$iterator2){function MapIterator(upstream,f){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MapIterator),this.upstream=void 0,this.f=void 0,this.upstream=upstream,this.f=f}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(MapIterator,[{key:_Symbol$iterator2,value:function value(){return this}},{key:"next",value:function next(){var next=this.upstream.next();return next.done?next:{done:!1,value:this.f(next.value)}}}]),MapIterator}(Symbol.iterator)},43:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return useContextMenuConfigContext.a})),__webpack_require__.d(__webpack_exports__,"l",(function(){return useWheelHandler_useWheelHandler})),__webpack_require__.d(__webpack_exports__,"k",(function(){return useContainerRect_useUpdateViewportCallback})),__webpack_require__.d(__webpack_exports__,"a",(function(){return useContainerRect_useContainerRect})),__webpack_require__.d(__webpack_exports__,"h",(function(){return useRenderedArea_useRenderedArea})),__webpack_require__.d(__webpack_exports__,"g",(function(){return useMinimapRect_useMinimapRect})),__webpack_require__.d(__webpack_exports__,"f",(function(){return useGraphTouchHandler_useGraphTouchHandler})),__webpack_require__.d(__webpack_exports__,"i",(function(){return useSafariScale})),__webpack_require__.d(__webpack_exports__,"j",(function(){return useSelectBox_useSelectBox})),__webpack_require__.d(__webpack_exports__,"e",(function(){return useGraphState_useGraphState})),__webpack_require__.d(__webpack_exports__,"d",(function(){return useGraphState_useGraphData})),__webpack_require__.d(__webpack_exports__,"c",(function(){return useDeferredValue}));var useContextMenuConfigContext=__webpack_require__(274),react=__webpack_require__(0),models_event=__webpack_require__(1),utils=__webpack_require__(3),noop=__webpack_require__(86),debug=__webpack_require__(58);var scrollLineHeight=function getScrollLineHeight(){try{var iframe=document.createElement("iframe");iframe.src="#",document.body.appendChild(iframe);var contentWindow=iframe.contentWindow;if(!contentWindow)throw new Error("Fail to create iframe");var doc=contentWindow.document;if(!doc)throw new Error("Fail to create iframe");doc.open(),doc.write("<!DOCTYPE html><html><head></head><body><span>a</span></body></html>"),doc.close();var height=doc.body.firstElementChild.offsetHeight;return document.body.removeChild(iframe),height}catch(e){return debug.a.error("failed to calculate scroll line height",e),16}}(),normalizeWheelDelta="function"==typeof WheelEvent?function(deltaMode,delta){switch(deltaMode){case WheelEvent.DOM_DELTA_PIXEL:return delta;case WheelEvent.DOM_DELTA_LINE:return delta*scrollLineHeight;case WheelEvent.DOM_DELTA_PAGE:return delta*window.innerHeight;default:return delta}}:function(deltaMode,delta){return delta},useWheelHandler_useWheelHandler=function useWheelHandler(args){var containerRef=args.containerRef,svgRef=args.svgRef,rectRef=args.rectRef,zoomSensitivity=args.zoomSensitivity,scrollSensitivity=args.scrollSensitivity,isHorizontalScrollDisabled=args.isHorizontalScrollDisabled,isVerticalScrollDisabled=args.isVerticalScrollDisabled,isCtrlKeyZoomEnable=args.isCtrlKeyZoomEnable,eventChannel=args.eventChannel,graphConfig=args.graphConfig,dispatch=args.dispatch;Object(react.useLayoutEffect)((function(){var svg=svgRef.current,container=containerRef.current;if(!svg||!container)return noop.a;var onWheel=function onWheel(e){var rect=rectRef.current;if(rect&&svg.contains(document.activeElement))if(e.preventDefault(),e.ctrlKey&&isCtrlKeyZoomEnable){var scale=(normalizeWheelDelta(e.deltaMode,e.deltaY)>0?-zoomSensitivity:zoomSensitivity)+1;eventChannel.trigger({type:models_event.a.Zoom,rawEvent:e,scale:scale,anchor:Object(utils.getRelativePoint)(rect,e)})}else{var dx=isHorizontalScrollDisabled?0:-normalizeWheelDelta(e.deltaMode,e.shiftKey?e.deltaY:e.deltaX)*scrollSensitivity,dy=isVerticalScrollDisabled||e.shiftKey?0:-normalizeWheelDelta(e.deltaMode,e.deltaY)*scrollSensitivity;eventChannel.trigger({type:models_event.a.MouseWheelScroll,dx:dx,dy:dy,rawEvent:e})}};return container.addEventListener("wheel",onWheel),function(){container.removeEventListener("wheel",onWheel)}}),[svgRef,rectRef,zoomSensitivity,scrollSensitivity,dispatch,isHorizontalScrollDisabled,isVerticalScrollDisabled,graphConfig,eventChannel,isCtrlKeyZoomEnable])};__webpack_require__(7),__webpack_require__(14),__webpack_require__(6),__webpack_require__(16),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(15),__webpack_require__(11),__webpack_require__(19);var useContainerRect_useUpdateViewportCallback=function useUpdateViewportCallback(rectRef,svgRef,eventChannel){return Object(react.useCallback)((function(){var _svgRef$current,viewportRect=null===(_svgRef$current=svgRef.current)||void 0===_svgRef$current?void 0:_svgRef$current.getBoundingClientRect();(function isRectChanged(a,b){return!a||!b||a!==b&&(a.top!==b.top||a.left!==b.left||a.width!==b.width||a.height!==b.height)})(rectRef.current,viewportRect)&&(rectRef.current=viewportRect,eventChannel.trigger({type:models_event.a.ViewportResize,viewportRect:viewportRect}))}),[eventChannel,rectRef,svgRef])},useContainerRect_useContainerRect=function useContainerRect(svgRef,containerRef,updateViewport){Object(react.useLayoutEffect)(updateViewport,[updateViewport]),Object(react.useEffect)((function(){var container=containerRef.current;if(!container)return noop.a;var onResize=Object(utils.debounce)((function(){return function nextFrame(callback){requestAnimationFrame((function(){requestAnimationFrame(callback)}))}((function(){updateViewport()}))}),20);if("undefined"!=typeof ResizeObserver){var resizeObserver=new ResizeObserver(onResize);return resizeObserver.observe(container),function(){resizeObserver.unobserve(container),resizeObserver.disconnect()}}return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[containerRef,updateViewport]),Object(react.useEffect)((function(){var listener=Object(utils.debounce)((function(e){var svg=svgRef.current;svg&&e.target instanceof Element&&e.target.contains(svg)&&updateViewport()}),20),options={capture:!0,passive:!0};return document.body.addEventListener("scroll",listener,options),function(){document.body.removeEventListener("scroll",listener,options)}}),[svgRef,updateViewport])},scheduling=__webpack_require__(98);__webpack_require__(495),__webpack_require__(151);var useRenderedArea_useRenderedArea=function useRenderedArea(viewport,isVirtualizationEnabled){return Object(react.useMemo)((function(){return isVirtualizationEnabled?Object(utils.getRenderedArea)(viewport):{minX:-Number.MAX_SAFE_INTEGER,minY:-Number.MAX_SAFE_INTEGER,maxX:Number.MAX_SAFE_INTEGER,maxY:Number.MAX_SAFE_INTEGER}}),[viewport,isVirtualizationEnabled])};function useMinimapRect_slicedToArray(arr,i){return function useMinimapRect_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useMinimapRect_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function useMinimapRect_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useMinimapRect_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useMinimapRect_arrayLikeToArray(o,minLen)}(arr,i)||function useMinimapRect_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useMinimapRect_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var getMinimapRect=function getMinimapRect(svgRef){var _svgRef$current,_svgRef$current$close;return null===(_svgRef$current=svgRef.current)||void 0===_svgRef$current||null===(_svgRef$current$close=_svgRef$current.closest(".minimap-container"))||void 0===_svgRef$current$close?void 0:_svgRef$current$close.getBoundingClientRect()},useMinimapRect_useMinimapRect=function useMinimapRect(svgRef){var _useState2=useMinimapRect_slicedToArray(Object(react.useState)(void 0),2),rect=_useState2[0],setRect=_useState2[1];return Object(react.useLayoutEffect)((function(){setRect(getMinimapRect(svgRef))}),[svgRef]),Object(react.useEffect)((function(){var onResize=Object(scheduling.b)((function(){setRect(getMinimapRect(svgRef))}),20);return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[svgRef]),rect},controllers=(__webpack_require__(92),__webpack_require__(51)),useGraphTouchHandler_useGraphTouchHandler=function useGraphTouchHandler(rectRef,eventChannel){return react.useMemo((function(){return new controllers.c((new Map).set(2,new controllers.d(rectRef,eventChannel))).eventHandlers}),[rectRef,eventChannel])},isSafari=Object(utils.getBrowser)()===utils.BrowserType.safari,prevScale=0;function useSafariScale(_ref){var rectRef=_ref.rectRef,svgRef=_ref.svgRef,eventChannel=_ref.eventChannel;Object(react.useEffect)((function(){var el=svgRef.current;if(!isSafari||!el||Object(utils.isMobile)())return function(){};var onGestureEvent=Object(scheduling.a)((function(e){var scale=e.scale,delta=scale/prevScale;prevScale=scale,eventChannel.trigger({type:models_event.a.Zoom,rawEvent:e,scale:delta,anchor:Object(utils.getContainerCenter)(rectRef)})})),onGestureStart=function onGestureStart(e){e.stopPropagation(),e.preventDefault(),prevScale=e.scale,eventChannel.trigger({type:models_event.a.Zoom,rawEvent:e,scale:e.scale,anchor:Object(utils.getContainerCenter)(rectRef)})},onGestureChange=function onGestureChange(e){e.stopPropagation(),e.preventDefault(),onGestureEvent(e)},onGestureEnd=function onGestureEnd(e){e.stopPropagation(),e.preventDefault(),onGestureEvent(e)};return el.addEventListener("gesturestart",onGestureStart),el.addEventListener("gesturechange",onGestureChange),el.addEventListener("gestureend",onGestureEnd),function(){el.removeEventListener("gesturestart",onGestureStart),el.removeEventListener("gesturechange",onGestureChange),el.removeEventListener("gestureend",onGestureEnd)}}),[])}function useDeferredValue_slicedToArray(arr,i){return function useDeferredValue_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useDeferredValue_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function useDeferredValue_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useDeferredValue_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useDeferredValue_arrayLikeToArray(o,minLen)}(arr,i)||function useDeferredValue_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useDeferredValue_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useDeferredValue(value,_ref){var timeout=_ref.timeout,_useState2=useDeferredValue_slicedToArray(Object(react.useState)(value),2),state=_useState2[0],setState=_useState2[1];return Object(react.useEffect)((function(){var timer=setTimeout((function(){setState(value)}),timeout);return function(){clearTimeout(timer)}}),[value,timeout]),state}var useSelectBox_useSelectBox=function useSelectBox(dispatch,selectBoxPositionState){var selectBoxPosition=useDeferredValue(selectBoxPositionState,{timeout:100});react.useEffect((function(){dispatch({type:models_event.a.UpdateNodeSelectionBySelectBox})}),[selectBoxPosition])},GraphStateContext=__webpack_require__(114),useGraphState_useGraphState=function useGraphState(){return Object(react.useContext)(GraphStateContext.b)},useGraphState_useGraphData=function useGraphData(){return Object(react.useContext)(GraphStateContext.c)};__webpack_require__(275)},44:function(module,__webpack_exports__,__webpack_require__){"use strict";var _components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(515);__webpack_require__.d(__webpack_exports__,"Graph",(function(){return _components__WEBPACK_IMPORTED_MODULE_0__.a})),__webpack_require__.d(__webpack_exports__,"ReactDagEditor",(function(){return _components__WEBPACK_IMPORTED_MODULE_0__.b}));__webpack_require__(54),__webpack_require__(147);var _utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3);__webpack_require__.o(_utils__WEBPACK_IMPORTED_MODULE_3__,"GraphConfigBuilder")&&__webpack_require__.d(__webpack_exports__,"GraphConfigBuilder",(function(){return _utils__WEBPACK_IMPORTED_MODULE_3__.GraphConfigBuilder})),__webpack_require__.o(_utils__WEBPACK_IMPORTED_MODULE_3__,"GraphModel")&&__webpack_require__.d(__webpack_exports__,"GraphModel",(function(){return _utils__WEBPACK_IMPORTED_MODULE_3__.GraphModel})),__webpack_require__.o(_utils__WEBPACK_IMPORTED_MODULE_3__,"GraphNodeState")&&__webpack_require__.d(__webpack_exports__,"GraphNodeState",(function(){return _utils__WEBPACK_IMPORTED_MODULE_3__.GraphNodeState})),__webpack_require__.o(_utils__WEBPACK_IMPORTED_MODULE_3__,"GraphPortState")&&__webpack_require__.d(__webpack_exports__,"GraphPortState",(function(){return _utils__WEBPACK_IMPORTED_MODULE_3__.GraphPortState})),__webpack_require__.o(_utils__WEBPACK_IMPORTED_MODULE_3__,"getRectHeight")&&__webpack_require__.d(__webpack_exports__,"getRectHeight",(function(){return _utils__WEBPACK_IMPORTED_MODULE_3__.getRectHeight})),__webpack_require__.o(_utils__WEBPACK_IMPORTED_MODULE_3__,"getRectWidth")&&__webpack_require__.d(__webpack_exports__,"getRectWidth",(function(){return _utils__WEBPACK_IMPORTED_MODULE_3__.getRectWidth})),__webpack_require__.o(_utils__WEBPACK_IMPORTED_MODULE_3__,"hasState")&&__webpack_require__.d(__webpack_exports__,"hasState",(function(){return _utils__WEBPACK_IMPORTED_MODULE_3__.hasState}));__webpack_require__(43);var _testAPI__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(507);__webpack_require__.o(_testAPI__WEBPACK_IMPORTED_MODULE_5__,"GraphConfigBuilder")&&__webpack_require__.d(__webpack_exports__,"GraphConfigBuilder",(function(){return _testAPI__WEBPACK_IMPORTED_MODULE_5__.GraphConfigBuilder})),__webpack_require__.o(_testAPI__WEBPACK_IMPORTED_MODULE_5__,"GraphModel")&&__webpack_require__.d(__webpack_exports__,"GraphModel",(function(){return _testAPI__WEBPACK_IMPORTED_MODULE_5__.GraphModel})),__webpack_require__.o(_testAPI__WEBPACK_IMPORTED_MODULE_5__,"GraphNodeState")&&__webpack_require__.d(__webpack_exports__,"GraphNodeState",(function(){return _testAPI__WEBPACK_IMPORTED_MODULE_5__.GraphNodeState})),__webpack_require__.o(_testAPI__WEBPACK_IMPORTED_MODULE_5__,"GraphPortState")&&__webpack_require__.d(__webpack_exports__,"GraphPortState",(function(){return _testAPI__WEBPACK_IMPORTED_MODULE_5__.GraphPortState})),__webpack_require__.o(_testAPI__WEBPACK_IMPORTED_MODULE_5__,"getRectHeight")&&__webpack_require__.d(__webpack_exports__,"getRectHeight",(function(){return _testAPI__WEBPACK_IMPORTED_MODULE_5__.getRectHeight})),__webpack_require__.o(_testAPI__WEBPACK_IMPORTED_MODULE_5__,"getRectWidth")&&__webpack_require__.d(__webpack_exports__,"getRectWidth",(function(){return _testAPI__WEBPACK_IMPORTED_MODULE_5__.getRectWidth})),__webpack_require__.o(_testAPI__WEBPACK_IMPORTED_MODULE_5__,"hasState")&&__webpack_require__.d(__webpack_exports__,"hasState",(function(){return _testAPI__WEBPACK_IMPORTED_MODULE_5__.hasState}));__webpack_require__(32),__webpack_require__(215);var _models_GraphModel__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(180);__webpack_require__.d(__webpack_exports__,"GraphModel",(function(){return _models_GraphModel__WEBPACK_IMPORTED_MODULE_8__.a}));__webpack_require__(117),__webpack_require__(216);var _models_element_state__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(18);__webpack_require__.d(__webpack_exports__,"GraphNodeState",(function(){return _models_element_state__WEBPACK_IMPORTED_MODULE_11__.b})),__webpack_require__.d(__webpack_exports__,"GraphPortState",(function(){return _models_element_state__WEBPACK_IMPORTED_MODULE_11__.c}));__webpack_require__(510),__webpack_require__(511),__webpack_require__(512),__webpack_require__(513),__webpack_require__(87),__webpack_require__(35),__webpack_require__(1),__webpack_require__(268);var _models_config_GraphConfigBuilder__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(178);__webpack_require__.d(__webpack_exports__,"GraphConfigBuilder",(function(){return _models_config_GraphConfigBuilder__WEBPACK_IMPORTED_MODULE_20__.a}));var _models_config_types__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(514);__webpack_require__.o(_models_config_types__WEBPACK_IMPORTED_MODULE_21__,"getRectHeight")&&__webpack_require__.d(__webpack_exports__,"getRectHeight",(function(){return _models_config_types__WEBPACK_IMPORTED_MODULE_21__.getRectHeight})),__webpack_require__.o(_models_config_types__WEBPACK_IMPORTED_MODULE_21__,"getRectWidth")&&__webpack_require__.d(__webpack_exports__,"getRectWidth",(function(){return _models_config_types__WEBPACK_IMPORTED_MODULE_21__.getRectWidth})),__webpack_require__.o(_models_config_types__WEBPACK_IMPORTED_MODULE_21__,"hasState")&&__webpack_require__.d(__webpack_exports__,"hasState",(function(){return _models_config_types__WEBPACK_IMPORTED_MODULE_21__.hasState}));__webpack_require__(63)},49:function(module,__webpack_exports__,__webpack_require__){"use strict";function hashing(o){if(null===o)return 1108378658;switch(typeof o){case"boolean":return o?839943201:839943200;case"number":return function hashNumber(n){if(n!=n||n===1/0)return 0;var hash=0|n;hash!==n&&(hash^=4294967295*n);for(;n>4294967295;)hash^=n/=4294967295;return smi(hash)}(o);case"string":return hashString(o);case"object":case"function":case"symbol":throw new Error("Using object, function and symbol as hash map key is not supported");case"undefined":return 839943203;default:return hashString(String(o))}}function hashString(str){for(var hashed=0,ii=0;ii<str.length;ii++)hashed=31*hashed+str.charCodeAt(ii)|0;return smi(hashed)}function smi(value){return 1073741823&value}__webpack_require__.d(__webpack_exports__,"a",(function(){return hashing}))},491:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return HashMap})),__webpack_require__.d(__webpack_exports__,"b",(function(){return HashMapBuilder}));__webpack_require__(15),__webpack_require__(11),__webpack_require__(19),__webpack_require__(6),__webpack_require__(8),__webpack_require__(9),__webpack_require__(20),__webpack_require__(34),__webpack_require__(66),__webpack_require__(16),__webpack_require__(10),__webpack_require__(7),__webpack_require__(14);var _champ__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(186),_hashing__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(49),_uid__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(187),_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(39);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var uid=new _uid__WEBPACK_IMPORTED_MODULE_15__.a,HashMap=function(_Symbol$iterator2){function HashMap(root){_classCallCheck(this,HashMap),this.id=uid.take(),this.root=void 0,this.root=root}return _createClass(HashMap,[{key:"size",get:function get(){return this.root.size}},{key:"get",value:function get(key){var h=Object(_hashing__WEBPACK_IMPORTED_MODULE_14__.a)(key);return this.root.get(key,h,0)}},{key:"has",value:function has(key){var h=Object(_hashing__WEBPACK_IMPORTED_MODULE_14__.a)(key);return this.root.contains(key,h,0)}},{key:"set",value:function set(key,value){return this.withRoot(this.root.insert(uid.peek(),key,value,Object(_hashing__WEBPACK_IMPORTED_MODULE_14__.a)(key),0))}},{key:"update",value:function update(key,updater){return this.withRoot(this.root.update(uid.peek(),key,updater,Object(_hashing__WEBPACK_IMPORTED_MODULE_14__.a)(key),0))}},{key:"delete",value:function _delete(key){var h=Object(_hashing__WEBPACK_IMPORTED_MODULE_14__.a)(key),id=uid.peek(),remove=this.root.remove(id,key,h,0);return void 0===remove?this:new HashMap(remove[0])}},{key:"clone",value:function clone(){return new HashMap(this.root)}},{key:_Symbol$iterator2,value:function value(){return this.entries()}},{key:"entries",value:function entries(){return this.root.iter()}},{key:"values",value:function values(){return new _utils__WEBPACK_IMPORTED_MODULE_16__.a(this.entries(),(function(_ref){return _slicedToArray(_ref,2)[1]}))}},{key:"mutate",value:function mutate(){return new HashMapBuilder(this.root)}},{key:"map",value:function map(f){return new HashMap(this.root.map(uid.peek(),f))}},{key:"filter",value:function filter(predicate){var map=this.mutate();return this.forEach((function(value,key){predicate(value,key)||map.delete(key)})),map.finish()}},{key:"forEach",value:function forEach(f){this.root.forEach(f)}},{key:"find",value:function find(predicate){return this.root.find(predicate)}},{key:"withRoot",value:function withRoot(newRoot){return newRoot===this.root?this:new HashMap(newRoot)}}],[{key:"empty",value:function empty(){return HashMapBuilder.empty().finish()}},{key:"from",value:function from(iterable){return HashMapBuilder.from(iterable).finish()}}]),HashMap}(Symbol.iterator),HashMapBuilder=function(){function HashMapBuilder(root){_classCallCheck(this,HashMapBuilder),this.root=void 0,this.id=uid.take(),this.root=root}return _createClass(HashMapBuilder,[{key:"get",value:function get(key){var h=Object(_hashing__WEBPACK_IMPORTED_MODULE_14__.a)(key);return this.root.get(key,h,0)}},{key:"has",value:function has(key){var h=Object(_hashing__WEBPACK_IMPORTED_MODULE_14__.a)(key);return this.root.contains(key,h,0)}},{key:"set",value:function set(key,value){return this.root=this.root.insert(this.id,key,value,Object(_hashing__WEBPACK_IMPORTED_MODULE_14__.a)(key),0),this}},{key:"update",value:function update(key,updater){var h=Object(_hashing__WEBPACK_IMPORTED_MODULE_14__.a)(key);return this.root=this.root.update(this.id,key,updater,h,0),this}},{key:"delete",value:function _delete(key){var h=Object(_hashing__WEBPACK_IMPORTED_MODULE_14__.a)(key),remove=this.root.remove(this.id,key,h,0);return void 0!==remove&&(this.root=remove[0]),this}},{key:"finish",value:function finish(){return new HashMap(this.root)}}],[{key:"empty",value:function empty(){var id=uid.peek();return new HashMapBuilder(_champ__WEBPACK_IMPORTED_MODULE_13__.a.empty(id))}},{key:"from",value:function from(iterable){if(Array.isArray(iterable))return HashMapBuilder.fromArray(iterable);for(var iter=iterable[Symbol.iterator](),builder=HashMapBuilder.empty(),next=iter.next();!next.done;){var _next$value=_slicedToArray(next.value,2),_key=_next$value[0],_value=_next$value[1];builder.set(_key,_value),next=iter.next()}return builder}},{key:"fromArray",value:function fromArray(list){for(var builder=HashMapBuilder.empty(),i=0;i<list.length;i+=1){var _list$i=_slicedToArray(list[i],2),_key2=_list$i[0],_value2=_list$i[1];builder.set(_key2,_value2)}return builder}}]),HashMapBuilder}()},492:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(15),__webpack_require__(11),__webpack_require__(19),__webpack_require__(6),__webpack_require__(8),__webpack_require__(9),__webpack_require__(20),__webpack_require__(34),__webpack_require__(66),__webpack_require__(16),__webpack_require__(10),__webpack_require__(7),__webpack_require__(14);var _b_tree__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(71),_uid__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(187),_utils__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(39);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var uid=new _uid__WEBPACK_IMPORTED_MODULE_14__.a,SortedMap=function(_Symbol$iterator2){function SortedMap(root){_classCallCheck(this,SortedMap),this.id=uid.take(),this.root=void 0,this.root=root}return _createClass(SortedMap,[{key:"size",get:function get(){return this.root.size}},{key:"delete",value:function _delete(key){return this.withRoot(Object(_b_tree__WEBPACK_IMPORTED_MODULE_13__.e)(uid.peek(),this.root,key))}},{key:"get",value:function get(key){return this.root.get(key)}},{key:"has",value:function has(key){return this.root.contains(key)}},{key:"set",value:function set(key,value){return this.withRoot(Object(_b_tree__WEBPACK_IMPORTED_MODULE_13__.d)(uid.peek(),this.root,key,value))}},{key:"update",value:function update(key,updater){return this.withRoot(this.root.update(uid.peek(),key,updater))}},{key:_Symbol$iterator2,value:function value(){return this.entries()}},{key:"clone",value:function clone(){return new SortedMap(this.root)}},{key:"entries",value:function entries(){return new _b_tree__WEBPACK_IMPORTED_MODULE_13__.a(this.root)}},{key:"values",value:function values(){return new _utils__WEBPACK_IMPORTED_MODULE_15__.a(this.entries(),(function(_ref){return _slicedToArray(_ref,2)[1]}))}},{key:"mutate",value:function mutate(){return new SortedMapBuilder(this.root)}},{key:"map",value:function map(f){return new SortedMap(this.root.map(uid.peek(),f))}},{key:"filter",value:function filter(predicate){var map=this.mutate();return this.forEach((function(value,key){predicate(value,key)||map.delete(key)})),map.finish()}},{key:"forEach",value:function forEach(f){this.root.forEach(f)}},{key:"find",value:function find(predicate){return this.root.find(predicate)}},{key:"withRoot",value:function withRoot(newRoot){return newRoot===this.root?this:new SortedMap(newRoot)}}],[{key:"empty",value:function empty(){return SortedMapBuilder.empty().finish()}},{key:"from",value:function from(iterable){return SortedMapBuilder.from(iterable).finish()}}]),SortedMap}(Symbol.iterator),SortedMapBuilder=function(){function SortedMapBuilder(root){_classCallCheck(this,SortedMapBuilder),this.id=uid.take(),this.root=void 0,this.root=root}return _createClass(SortedMapBuilder,[{key:"delete",value:function _delete(key){return this.root=Object(_b_tree__WEBPACK_IMPORTED_MODULE_13__.e)(this.id,this.root,key),this}},{key:"get",value:function get(key){return this.root.get(key)}},{key:"has",value:function has(key){return this.root.contains(key)}},{key:"set",value:function set(key,value){return this.root=Object(_b_tree__WEBPACK_IMPORTED_MODULE_13__.d)(this.id,this.root,key,value),this}},{key:"update",value:function update(key,updater){return this.root=this.root.update(this.id,key,updater),this}},{key:"finish",value:function finish(){return new SortedMap(this.root)}}],[{key:"empty",value:function empty(){var id=uid.peek();return new SortedMapBuilder(Object(_b_tree__WEBPACK_IMPORTED_MODULE_13__.c)(id))}},{key:"from",value:function from(iterable){if(Array.isArray(iterable))return SortedMapBuilder.fromArray(iterable);for(var iter=iterable[Symbol.iterator](),builder=SortedMapBuilder.empty(),next=iter.next();!next.done;){var _next$value=_slicedToArray(next.value,2),_key=_next$value[0],_value=_next$value[1];builder.set(_key,_value),next=iter.next()}return builder}},{key:"fromArray",value:function fromArray(list){for(var builder=SortedMapBuilder.empty(),i=0;i<list.length;i+=1){var _list$i=_slicedToArray(list[i],2),_key2=_list$i[0],_value2=_list$i[1];builder.set(_key2,_value2)}return builder}}]),SortedMapBuilder}()},493:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return OrderedMap}));__webpack_require__(15),__webpack_require__(11),__webpack_require__(19),__webpack_require__(6),__webpack_require__(8),__webpack_require__(9),__webpack_require__(20),__webpack_require__(34),__webpack_require__(66),__webpack_require__(16),__webpack_require__(10),__webpack_require__(7),__webpack_require__(14);var _b_tree__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(71),_champ__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(186),_hashing__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(49),_uid__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(187),_utils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(39);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var uid=new _uid__WEBPACK_IMPORTED_MODULE_16__.a,OrderedMap=function(_Symbol$iterator2){function OrderedMap(itemId,hashRoot,sortedRoot){_classCallCheck(this,OrderedMap),this.id=uid.take(),this.hashRoot=void 0,this.sortedRoot=void 0,this.itemId=void 0,this.itemId=itemId,this.hashRoot=hashRoot,this.sortedRoot=sortedRoot}return _createClass(OrderedMap,[{key:"size",get:function get(){return this.hashRoot.size}},{key:"delete",value:function _delete(key){var tempId=uid.peek(),h=Object(_hashing__WEBPACK_IMPORTED_MODULE_15__.a)(key),remove=this.hashRoot.remove(tempId,key,h,0);if(void 0===remove)return this;var _remove=_slicedToArray(remove,2),hashRoot=_remove[0],valueId=_remove[1],sortedRoot=this.sortedRoot.remove(tempId,valueId);return new OrderedMap(this.itemId,hashRoot,sortedRoot)}},{key:"get",value:function get(key){var h=Object(_hashing__WEBPACK_IMPORTED_MODULE_15__.a)(key),id=this.hashRoot.get(key,h,0);if(void 0!==id){var got=this.sortedRoot.get(id);return null==got?void 0:got[1]}}},{key:"has",value:function has(key){var h=Object(_hashing__WEBPACK_IMPORTED_MODULE_15__.a)(key);return this.hashRoot.contains(key,h,0)}},{key:"set",value:function set(key,value){var temp=uid.peek(),itemId=this.hashRoot.get(key,Object(_hashing__WEBPACK_IMPORTED_MODULE_15__.a)(key),0),hashRoot=this.hashRoot;itemId||(itemId=this.itemId+1,hashRoot=this.hashRoot.insert(temp,key,itemId,Object(_hashing__WEBPACK_IMPORTED_MODULE_15__.a)(key),0));var sortedRoot=_b_tree__WEBPACK_IMPORTED_MODULE_13__.d(temp,this.sortedRoot,itemId,[key,value]);return this.withRoot(this.itemId+1,hashRoot,sortedRoot)}},{key:"update",value:function update(key,updater){var itemId=this.hashRoot.get(key,Object(_hashing__WEBPACK_IMPORTED_MODULE_15__.a)(key),0);if(!itemId)return this;var sortedRoot=this.sortedRoot.update(uid.peek(),itemId,(function(prev){var _prev=_slicedToArray(prev,2),prevKey=_prev[0],prevValue=_prev[1],value=updater(prevValue);return Object(_utils__WEBPACK_IMPORTED_MODULE_17__.b)(value,prevValue)?prev:[prevKey,value]}));return this.withRoot(this.itemId,this.hashRoot,sortedRoot)}},{key:_Symbol$iterator2,value:function value(){return this.entries()}},{key:"clone",value:function clone(){return new OrderedMap(this.itemId,this.hashRoot,this.sortedRoot)}},{key:"entries",value:function entries(){return new OrderedMapIterator(new _b_tree__WEBPACK_IMPORTED_MODULE_13__.a(this.sortedRoot))}},{key:"values",value:function values(){return new _utils__WEBPACK_IMPORTED_MODULE_17__.a(this.entries(),(function(_ref){return _slicedToArray(_ref,2)[1]}))}},{key:"mutate",value:function mutate(){return new OrderedMapBuilder(this.itemId,this.hashRoot,this.sortedRoot)}},{key:"map",value:function map(f){var id=uid.peek(),sortedRoot=this.sortedRoot.map(id,(function g(prev){var _prev2=_slicedToArray(prev,2),key=_prev2[0],value0=_prev2[1],value=f(value0,key);return Object(_utils__WEBPACK_IMPORTED_MODULE_17__.b)(value0,value)?prev:[key,value]}));return new OrderedMap(this.itemId,this.hashRoot,sortedRoot)}},{key:"forEach",value:function forEach(f){this.sortedRoot.forEach((function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];f(value,key)}))}},{key:"find",value:function find(predicate){var found=this.sortedRoot.find((function(_ref5){var value=_slicedToArray(_ref5,2)[1];return predicate(value)}));return found?found[1]:void 0}},{key:"first",value:function first(){var next=this.entries().next();if(!next.done)return next.value[1]}},{key:"filter",value:function filter(predicate){var map=this.mutate();return this.forEach((function(value,key){predicate(value,key)||map.delete(key)})),map.finish()}},{key:"withRoot",value:function withRoot(itemId,hashRoot,sortedRoot){return hashRoot===this.hashRoot&&sortedRoot===this.sortedRoot?this:new OrderedMap(itemId,hashRoot,sortedRoot)}}],[{key:"empty",value:function empty(){return OrderedMapBuilder.empty().finish()}},{key:"from",value:function from(iterable){return OrderedMapBuilder.from(iterable).finish()}}]),OrderedMap}(Symbol.iterator),OrderedMapIterator=function(_Symbol$iterator4){function OrderedMapIterator(delegate){_classCallCheck(this,OrderedMapIterator),this.delegate=void 0,this.delegate=delegate}return _createClass(OrderedMapIterator,[{key:_Symbol$iterator4,value:function value(){return this.clone()}},{key:"next",value:function next(){var next=this.delegate.next();return next.done?{done:!0,value:void 0}:{done:!1,value:next.value[1]}}},{key:"clone",value:function clone(){return new OrderedMapIterator(this.delegate.clone())}}]),OrderedMapIterator}(Symbol.iterator),OrderedMapBuilder=function(){function OrderedMapBuilder(itemId,hashRoot,sortedRoot){_classCallCheck(this,OrderedMapBuilder),this.hashRoot=void 0,this.sortedRoot=void 0,this.id=uid.take(),this.itemId=void 0,this.itemId=itemId,this.hashRoot=hashRoot,this.sortedRoot=sortedRoot}return _createClass(OrderedMapBuilder,[{key:"delete",value:function _delete(key){var h=Object(_hashing__WEBPACK_IMPORTED_MODULE_15__.a)(key),remove=this.hashRoot.remove(this.id,key,h,0);if(void 0===remove)return this;var id=remove[1];return this.hashRoot=remove[0],this.sortedRoot=_b_tree__WEBPACK_IMPORTED_MODULE_13__.e(this.id,this.sortedRoot,id),this}},{key:"get",value:function get(key){var _this$sortedRoot$get,h=Object(_hashing__WEBPACK_IMPORTED_MODULE_15__.a)(key),id=this.hashRoot.get(key,h,0);if(void 0!==id)return null===(_this$sortedRoot$get=this.sortedRoot.get(id))||void 0===_this$sortedRoot$get?void 0:_this$sortedRoot$get[1]}},{key:"has",value:function has(key){var h=Object(_hashing__WEBPACK_IMPORTED_MODULE_15__.a)(key);return this.hashRoot.contains(key,h,0)}},{key:"set",value:function set(key,value){var itemId=this.hashRoot.get(key,Object(_hashing__WEBPACK_IMPORTED_MODULE_15__.a)(key),0);return void 0===itemId&&(itemId=this.itemId+1,this.itemId+=1,this.hashRoot=this.hashRoot.insert(this.id,key,itemId,Object(_hashing__WEBPACK_IMPORTED_MODULE_15__.a)(key),0)),this.sortedRoot=_b_tree__WEBPACK_IMPORTED_MODULE_13__.d(this.id,this.sortedRoot,itemId,[key,value]),this}},{key:"update",value:function update(key,updater){var itemId=this.hashRoot.get(key,Object(_hashing__WEBPACK_IMPORTED_MODULE_15__.a)(key),0);return itemId?(this.sortedRoot=this.sortedRoot.update(this.id,itemId,(function(prev){var _prev3=_slicedToArray(prev,2),prevKey=_prev3[0],prevValue=_prev3[1],value=updater(prevValue);return Object(_utils__WEBPACK_IMPORTED_MODULE_17__.b)(value,prevValue)?prev:[prevKey,value]})),this):this}},{key:"finish",value:function finish(){return new OrderedMap(this.itemId,this.hashRoot,this.sortedRoot)}}],[{key:"empty",value:function empty(){var tempId=uid.peek();return new OrderedMapBuilder(0,_champ__WEBPACK_IMPORTED_MODULE_14__.a.empty(tempId),_b_tree__WEBPACK_IMPORTED_MODULE_13__.c(tempId))}},{key:"from",value:function from(iterable){if(Array.isArray(iterable))return OrderedMapBuilder.fromArray(iterable);for(var builder=OrderedMapBuilder.empty(),iterator=iterable[Symbol.iterator](),next=iterator.next();!next.done;){var _next$value=_slicedToArray(next.value,2),_key=_next$value[0],_value=_next$value[1];builder.set(_key,_value),next=iterator.next()}return builder}},{key:"fromArray",value:function fromArray(list){for(var builder=OrderedMapBuilder.empty(),i=0;i<list.length;i+=1){var _list$i=_slicedToArray(list[i],2),_key2=_list$i[0],_value2=_list$i[1];builder.set(_key2,_value2)}return builder}}]),OrderedMapBuilder}()},494:function(module,exports){},496:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return deepClone}));var deepClone=function deepClone(obj){if("object"!=typeof obj)return obj;var newObj=obj instanceof Array?[]:{};for(var key in obj)"object"==typeof obj[key]&&null!==obj[key]?newObj[key]=deepClone(obj[key]):newObj[key]=obj[key];return newObj}},497:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(56),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(34),__webpack_require__(47)},498:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(56),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(34),__webpack_require__(47)},499:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(56),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(92),__webpack_require__(34),__webpack_require__(88),__webpack_require__(36),__webpack_require__(47),__webpack_require__(19),__webpack_require__(7),__webpack_require__(14),__webpack_require__(16),__webpack_require__(15),__webpack_require__(11)},501:function(module,exports){},503:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(164)},504:function(module,__webpack_exports__,__webpack_require__){"use strict"},505:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(352)},507:function(module,__webpack_exports__,__webpack_require__){"use strict";var _DriverAdapter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(508);__webpack_require__.o(_DriverAdapter__WEBPACK_IMPORTED_MODULE_0__,"GraphConfigBuilder")&&__webpack_require__.d(__webpack_exports__,"GraphConfigBuilder",(function(){return _DriverAdapter__WEBPACK_IMPORTED_MODULE_0__.GraphConfigBuilder})),__webpack_require__.o(_DriverAdapter__WEBPACK_IMPORTED_MODULE_0__,"GraphModel")&&__webpack_require__.d(__webpack_exports__,"GraphModel",(function(){return _DriverAdapter__WEBPACK_IMPORTED_MODULE_0__.GraphModel})),__webpack_require__.o(_DriverAdapter__WEBPACK_IMPORTED_MODULE_0__,"GraphNodeState")&&__webpack_require__.d(__webpack_exports__,"GraphNodeState",(function(){return _DriverAdapter__WEBPACK_IMPORTED_MODULE_0__.GraphNodeState})),__webpack_require__.o(_DriverAdapter__WEBPACK_IMPORTED_MODULE_0__,"GraphPortState")&&__webpack_require__.d(__webpack_exports__,"GraphPortState",(function(){return _DriverAdapter__WEBPACK_IMPORTED_MODULE_0__.GraphPortState})),__webpack_require__.o(_DriverAdapter__WEBPACK_IMPORTED_MODULE_0__,"getRectHeight")&&__webpack_require__.d(__webpack_exports__,"getRectHeight",(function(){return _DriverAdapter__WEBPACK_IMPORTED_MODULE_0__.getRectHeight})),__webpack_require__.o(_DriverAdapter__WEBPACK_IMPORTED_MODULE_0__,"getRectWidth")&&__webpack_require__.d(__webpack_exports__,"getRectWidth",(function(){return _DriverAdapter__WEBPACK_IMPORTED_MODULE_0__.getRectWidth})),__webpack_require__.o(_DriverAdapter__WEBPACK_IMPORTED_MODULE_0__,"hasState")&&__webpack_require__.d(__webpack_exports__,"hasState",(function(){return _DriverAdapter__WEBPACK_IMPORTED_MODULE_0__.hasState}));__webpack_require__(509)},508:function(module,exports){},509:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(81),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(20),__webpack_require__(15),__webpack_require__(11),__webpack_require__(19),__webpack_require__(7),__webpack_require__(14),__webpack_require__(16)},51:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DragController.a})),__webpack_require__.d(__webpack_exports__,"e",(function(){return DragController.b})),__webpack_require__.d(__webpack_exports__,"b",(function(){return DragNodeController})),__webpack_require__.d(__webpack_exports__,"c",(function(){return TouchController_TouchController})),__webpack_require__.d(__webpack_exports__,"d",(function(){return TwoFingerHandler_TwoFingerHandler}));var DragController=__webpack_require__(130);__webpack_require__(351),__webpack_require__(78),__webpack_require__(84),__webpack_require__(488),__webpack_require__(489);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _get(target,property,receiver){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}},_get(target,property,receiver||target)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var DragNodeController=function(_DragController){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(DragNodeController,_DragController);var _super=_createSuper(DragNodeController);function DragNodeController(globalMoveEventProvider,getPositionFromEvent,rectRef){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DragNodeController),(_this=_super.call(this,globalMoveEventProvider,getPositionFromEvent)).rectRef=void 0,_this.rectRef=rectRef,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(DragNodeController,[{key:"doOnMouseMove",value:function doOnMouseMove(e){_get(_getPrototypeOf(DragNodeController.prototype),"doOnMouseMove",this).call(this,e);var rect=this.rectRef.current;rect&&this.lastEvent&&(e.clientX<rect.left||e.clientX>rect.right||e.clientY<rect.top||e.clientY>rect.bottom)&&this.mouseMove(this.lastEvent)}}]),DragNodeController}(DragController.a),scheduling=(__webpack_require__(92),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(30),__webpack_require__(98));function TouchController_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var TouchController_TouchController=function(){function TouchController(handlers){var _this=this;!function TouchController_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TouchController),this.eventHandlers={onPointerDown:function onPointerDown(e){if("touch"===e.pointerType){e.preventDefault(),_this.pointers=new Map(_this.pointers),_this.pointers.set(e.pointerId,e.nativeEvent);for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];_this.updateHandler.apply(_this,[e.nativeEvent].concat(args))}},onPointerMove:function onPointerMove(e){if("touch"===e.pointerType){e.preventDefault(),_this.pointers.set(e.pointerId,e.nativeEvent);for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];_this.onMove.apply(_this,[e.nativeEvent].concat(args))}},onPointerUp:function onPointerUp(e){if("touch"===e.pointerType){e.preventDefault(),_this.pointers=new Map(_this.pointers),_this.pointers.delete(e.pointerId);for(var _len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];_this.updateHandler.apply(_this,[e.nativeEvent].concat(args))}}},this.pointers=new Map,this.currentHandler=void 0,this.handlers=void 0,this.onMove=Object(scheduling.a)((function(e){for(var _this$currentHandler,_len4=arguments.length,args=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)args[_key4-1]=arguments[_key4];null===(_this$currentHandler=_this.currentHandler)||void 0===_this$currentHandler||_this$currentHandler.onMove.apply(_this$currentHandler,[_this.pointers,e].concat(args))})),this.handlers=handlers}return function TouchController_createClass(Constructor,protoProps,staticProps){return protoProps&&TouchController_defineProperties(Constructor.prototype,protoProps),staticProps&&TouchController_defineProperties(Constructor,staticProps),Constructor}(TouchController,[{key:"updateHandler",value:function updateHandler(e){var handler=this.handlers.get(this.pointers.size);if(handler!==this.currentHandler){for(var _this$currentHandler2,_this$currentHandler3,_len5=arguments.length,args=new Array(_len5>1?_len5-1:0),_key5=1;_key5<_len5;_key5++)args[_key5-1]=arguments[_key5];null===(_this$currentHandler2=this.currentHandler)||void 0===_this$currentHandler2||_this$currentHandler2.onEnd.apply(_this$currentHandler2,[e].concat(args)),this.currentHandler=handler,null===(_this$currentHandler3=this.currentHandler)||void 0===_this$currentHandler3||_this$currentHandler3.onStart.apply(_this$currentHandler3,[this.pointers,e].concat(args))}}}]),TouchController}(),models_event=(__webpack_require__(19),__webpack_require__(1)),utils=__webpack_require__(3);function TwoFingerHandler_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var TwoFingerHandler_TwoFingerHandler=function(){function TwoFingerHandler(rectRef,eventChannel){!function TwoFingerHandler_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TwoFingerHandler),this.rectRef=void 0,this.eventChannel=void 0,this.prevEvents=void 0,this.prevDistance=0,this.rectRef=rectRef,this.eventChannel=eventChannel}return function TwoFingerHandler_createClass(Constructor,protoProps,staticProps){return protoProps&&TwoFingerHandler_defineProperties(Constructor.prototype,protoProps),staticProps&&TwoFingerHandler_defineProperties(Constructor,staticProps),Constructor}(TwoFingerHandler,[{key:"onEnd",value:function onEnd(){}},{key:"onMove",value:function onMove(pointers,e){var events=Array.from(pointers.values()),currentDistance=Object(utils.distance)(events[0].clientX,events[0].clientY,events[1].clientX,events[1].clientY),prevEvents=this.prevEvents,prevDistance=this.prevDistance;if(this.prevDistance=currentDistance,this.prevEvents=events,prevEvents){var dx=(events[0].clientX-prevEvents[0].clientX+(events[1].clientX-prevEvents[1].clientX))/2,dy=(events[0].clientY-prevEvents[0].clientY+(events[1].clientY-prevEvents[1].clientY))/2,scale=(currentDistance-prevDistance)/prevDistance+1,anchor=Object(utils.getContainerCenter)(this.rectRef);anchor&&this.eventChannel.trigger({type:models_event.a.Pinch,rawEvent:e,dx:dx,dy:dy,scale:scale,anchor:anchor})}}},{key:"onStart",value:function onStart(pointers){if(2!==pointers.size)throw new Error("Unexpected touch event with "+pointers.size+" touches");this.prevEvents=Array.from(pointers.values()),this.prevDistance=Object(utils.distance)(this.prevEvents[0].clientX,this.prevEvents[0].clientY,this.prevEvents[1].clientX,this.prevEvents[1].clientY)}}]),TwoFingerHandler}()},510:function(module,__webpack_exports__,__webpack_require__){},511:function(module,__webpack_exports__,__webpack_require__){},512:function(module,__webpack_exports__,__webpack_require__){},513:function(module,__webpack_exports__,__webpack_require__){},514:function(module,exports){},515:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return ReactDagEditor_ReactDagEditor})),__webpack_require__.d(__webpack_exports__,"a",(function(){return Graph}));var react=__webpack_require__(0),contexts=__webpack_require__(54),models_state=__webpack_require__(35),batchedUpdates=(__webpack_require__(15),__webpack_require__(7),__webpack_require__(14),__webpack_require__(6),__webpack_require__(16),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(19),__webpack_require__(11),__webpack_require__(189));function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var eventChannel_EventChannel=function(){function EventChannel(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EventChannel),this.listenersRef=Object(react.createRef)(),this.externalHandlerRef=Object(react.createRef)(),this.queue=[],this.working=!1}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(EventChannel,[{key:"trigger",value:function trigger(event){var _this=this;this.working?this.queue.push(event):(this.working=!0,Object(batchedUpdates.a)((function(){_this.callHandlers(event);for(var i=0;i<_this.queue.length;i+=1){var e=_this.queue[i];_this.callHandlers(e)}_this.queue=[]})),this.working=!1)}},{key:"batch",value:function batch(events){if(this.working){var _this$queue;(_this$queue=this.queue).push.apply(_this$queue,_toConsumableArray(events))}else{var _this$queue2,first=events[0];if(!first)return;(_this$queue2=this.queue).push.apply(_this$queue2,_toConsumableArray(events.slice(1))),this.trigger(first)}}},{key:"callHandlers",value:function callHandlers(e){var _this$listenersRef$cu,_this$listenersRef,_this$externalHandler,_this$externalHandler2;(null===(_this$listenersRef$cu=(_this$listenersRef=this.listenersRef).current)||void 0===_this$listenersRef$cu||_this$listenersRef$cu.call(_this$listenersRef,e),e.intercepted)||(null===(_this$externalHandler=(_this$externalHandler2=this.externalHandlerRef).current)||void 0===_this$externalHandler||_this$externalHandler.call(_this$externalHandler2,e))}}]),EventChannel}();function GraphController_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var GraphController_GraphController=function(){function GraphController(state,dispatch){var _this=this;!function GraphController_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GraphController),this.pointerId=null,this.canvasClickOnce=!1,this.nodeClickOnce=null,this.eventChannel=new eventChannel_EventChannel,this.state=void 0,this.UNSAFE_latestState=void 0,this.dispatchDelegate=void 0,this.getGlobalEventTargetImpl=void 0,this.mouseClientPoint=void 0,this.behavior=models_state.b.default,this.dispatch=function(action,callback){_this.dispatchDelegate(action,callback)},this.state=state,this.UNSAFE_latestState=state,this.dispatch=dispatch}return function GraphController_createClass(Constructor,protoProps,staticProps){return protoProps&&GraphController_defineProperties(Constructor.prototype,protoProps),staticProps&&GraphController_defineProperties(Constructor,staticProps),Constructor}(GraphController,[{key:"setMouseClientPosition",value:function setMouseClientPosition(pos){this.mouseClientPoint=pos}},{key:"unsetMouseClientPosition",value:function unsetMouseClientPosition(){this.mouseClientPoint=void 0}},{key:"getMouseClientPosition",value:function getMouseClientPosition(){return this.mouseClientPoint}},{key:"getEnabledFeatures",value:function getEnabledFeatures(){return this.state.settings.features}},{key:"getBehavior",value:function getBehavior(){return this.behavior}},{key:"setBehavior",value:function setBehavior(value){this.behavior=value}},{key:"getData",value:function getData(){return this.state.data.present}},{key:"getGlobalEventTarget",value:function getGlobalEventTarget(){var _this$getGlobalEventT,_this$getGlobalEventT2;return null!==(_this$getGlobalEventT=null===(_this$getGlobalEventT2=this.getGlobalEventTargetImpl)||void 0===_this$getGlobalEventT2?void 0:_this$getGlobalEventT2.call(this))&&void 0!==_this$getGlobalEventT?_this$getGlobalEventT:window}}]),GraphController}(),useConst=__webpack_require__(115),debug=__webpack_require__(58),noop=__webpack_require__(86),jsx_runtime=(__webpack_require__(88),__webpack_require__(36),__webpack_require__(20),__webpack_require__(351),__webpack_require__(78),__webpack_require__(84),__webpack_require__(2));function ErrorBoundary_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var ErrorBoundary_ErrorBoundary=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ErrorBoundary,_React$Component);var _super=_createSuper(ErrorBoundary);function ErrorBoundary(props){var _this;return function ErrorBoundary_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ErrorBoundary),(_this=_super.call(this,props)).state={hasError:!1},_this}return function ErrorBoundary_createClass(Constructor,protoProps,staticProps){return protoProps&&ErrorBoundary_defineProperties(Constructor.prototype,protoProps),staticProps&&ErrorBoundary_defineProperties(Constructor,staticProps),Constructor}(ErrorBoundary,[{key:"componentDidCatch",value:function componentDidCatch(error,errorInfo){console.error(error),this.setState({error:error,errorInfo:errorInfo})}},{key:"render",value:function render(){if(!this.state.hasError)return this.props.children;var _this$props$renderOnE;if(this.props.renderOnError)return null!==(_this$props$renderOnE=this.props.renderOnError(this.state.error,this.state.errorInfo,this.props.children))&&void 0!==_this$props$renderOnE?_this$props$renderOnE:null;var componentStackLines=this.state.errorInfo?this.state.errorInfo.componentStack.split("\n"):[];return Object(jsx_runtime.jsxs)("div",{style:{color:"red"},children:[Object(jsx_runtime.jsx)("h1",{children:"Something went wrong."}),Object(jsx_runtime.jsx)("p",{children:"Error: "+this.state.error}),Object(jsx_runtime.jsx)("p",{children:"ErrorInfo: "+JSON.stringify(this.state.errorInfo)}),Object(jsx_runtime.jsx)("h2",{children:"Component Stack"}),componentStackLines.map((function(line,index){return Object(jsx_runtime.jsx)("p",{children:line},index)}))]})}}],[{key:"getDerivedStateFromError",value:function getDerivedStateFromError(error){return{hasError:!0,error:error}}}]),ErrorBoundary}(react.Component);try{ErrorBoundary_ErrorBoundary.displayName="ErrorBoundary",ErrorBoundary_ErrorBoundary.__docgenInfo={description:"",displayName:"ErrorBoundary",props:{renderOnError:{defaultValue:null,description:"",name:"renderOnError",required:!1,type:{name:"((error?: Error, errorInfo?: ErrorInfo, children?: ReactNode) => ReactChild) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ErrorBoundary/ErrorBoundary.tsx#ErrorBoundary"]={docgenInfo:ErrorBoundary_ErrorBoundary.__docgenInfo,name:"ErrorBoundary",path:"src/components/ErrorBoundary/ErrorBoundary.tsx#ErrorBoundary"})}catch(__react_docgen_typescript_loader_error){}var EMPTY_CONNECT_CONTEXT={sourceNode:void 0,sourcePort:void 0,targetNode:void 0,targetPort:void 0},ConnectingStateContext=Object(react.createContext)(EMPTY_CONNECT_CONTEXT);ConnectingStateContext.displayName="ConnectingStateContext";var ConnectingState_ConnectingState=function ConnectingState(_ref){var sourceNode,sourcePort,targetNode,targetPort,_sourceNode,_targetNode,children=_ref.children,data=_ref.data,connectState=_ref.connectState;connectState&&(sourceNode=data.nodes.get(connectState.sourceNode),sourcePort=null===(_sourceNode=sourceNode)||void 0===_sourceNode?void 0:_sourceNode.getPort(connectState.sourcePort),targetNode=connectState.targetNode?data.nodes.get(connectState.targetNode):void 0,targetPort=connectState.targetPort?null===(_targetNode=targetNode)||void 0===_targetNode?void 0:_targetNode.getPort(connectState.targetPort):void 0);var context=react.useMemo((function(){return{sourceNode:sourceNode,sourcePort:sourcePort,targetNode:targetNode,targetPort:targetPort}}),[sourceNode,sourcePort,targetNode,targetPort]);return Object(jsx_runtime.jsx)(ConnectingStateContext.Provider,{value:context,children:children})};ConnectingState_ConnectingState.displayName="ConnectingState",ConnectingState_ConnectingState.displayName="ConnectingState";try{ConnectingState_ConnectingState.displayName="ConnectingState",ConnectingState_ConnectingState.__docgenInfo={description:"",displayName:"ConnectingState",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GraphModel<unknown, unknown, unknown>"}},connectState:{defaultValue:null,description:"",name:"connectState",required:!0,type:{name:"IConnectingState | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ConnectingState.tsx#ConnectingState"]={docgenInfo:ConnectingState_ConnectingState.__docgenInfo,name:"ConnectingState",path:"src/ConnectingState.tsx#ConnectingState"})}catch(__react_docgen_typescript_loader_error){}var AlignmentLinesContext=Object(react.createContext)([]),createGraphState=__webpack_require__(63),GraphControllerContext=Object(react.createContext)(new GraphController_GraphController(createGraphState.a,noop.a)),GraphStateContext=__webpack_require__(114);function GraphStateStore(props){var graphController=props.graphController,state=props.state,dispatch=props.dispatch,children=props.children,contextValue=react.useMemo((function(){return{state:state,dispatch:dispatch}}),[state,dispatch]);return Object(jsx_runtime.jsx)(contexts.c.Provider,{value:state.settings.graphConfig,children:Object(jsx_runtime.jsx)(GraphControllerContext.Provider,{value:graphController,children:Object(jsx_runtime.jsx)(ConnectingState_ConnectingState,{data:state.data.present,connectState:state.connectState,children:Object(jsx_runtime.jsx)(GraphStateContext.b.Provider,{value:contextValue,children:Object(jsx_runtime.jsx)(contexts.e.Provider,{value:state.viewport,children:Object(jsx_runtime.jsx)(GraphStateContext.c.Provider,{value:state.data.present,children:Object(jsx_runtime.jsx)(AlignmentLinesContext.Provider,{value:state.alignmentLines,children:children})})})})})})})}GraphStateStore.displayName="GraphStateStore";try{GraphStateStore.displayName="GraphStateStore",GraphStateStore.__docgenInfo={description:"",displayName:"GraphStateStore",props:{state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"IGraphState<NodeData, EdgeData, PortData>"}},dispatch:{defaultValue:null,description:"",name:"dispatch",required:!0,type:{name:"IDispatch<NodeData, EdgeData, PortData, Action>"}},graphController:{defaultValue:null,description:"",name:"graphController",required:!0,type:{name:"GraphController"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Graph/GraphStateStore.tsx#GraphStateStore"]={docgenInfo:GraphStateStore.__docgenInfo,name:"GraphStateStore",path:"src/components/Graph/GraphStateStore.tsx#GraphStateStore"})}catch(__react_docgen_typescript_loader_error){}var ReactDagEditor_ReactDagEditor=function ReactDagEditor(props){var _props$handleError;react.useEffect((function(){props.handleWarning&&(debug.a.warn=props.handleWarning)}),[]);var handleError=null===(_props$handleError=props.handleError)||void 0===_props$handleError?void 0:_props$handleError.bind(null),state=props.state,dispatch=props.dispatch,getGlobalEventTarget=props.getGlobalEventTarget,graphController=Object(useConst.a)((function(){return new GraphController_GraphController(state,dispatch)}));return graphController.UNSAFE_latestState=state,react.useLayoutEffect((function(){graphController.state=state,graphController.dispatchDelegate=dispatch,graphController.getGlobalEventTargetImpl=getGlobalEventTarget}),[dispatch,getGlobalEventTarget,graphController,state]),react.useEffect((function(){return function(){graphController.dispatchDelegate=noop.a}}),[graphController]),Object(jsx_runtime.jsx)(ErrorBoundary_ErrorBoundary,{renderOnError:handleError,children:Object(jsx_runtime.jsx)(GraphStateStore,{state:state,dispatch:dispatch,graphController:graphController,children:Object(jsx_runtime.jsx)(contexts.b.Provider,{value:Object(useConst.a)((function(){return new contexts.a})),children:Object(jsx_runtime.jsx)("div",{style:props.style,className:props.className,children:props.children})})})})};ReactDagEditor_ReactDagEditor.displayName="ReactDagEditor";try{ReactDagEditor_ReactDagEditor.displayName="ReactDagEditor",ReactDagEditor_ReactDagEditor.__docgenInfo={description:"ReactDagEditor top level container component",displayName:"ReactDagEditor",props:{style:{defaultValue:null,description:"Additional css styles to apply to the container element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Additional css class to apply to the container element.",name:"className",required:!1,type:{name:"string"}},state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"IGraphState<unknown, unknown, unknown>"}},dispatch:{defaultValue:null,description:"",name:"dispatch",required:!0,type:{name:"IDispatch<unknown, unknown, unknown, never>"}},handleWarning:{defaultValue:null,description:"Fired when there is invalid data or config. The invalid data or config will be ignored to avoid crashing your app.",name:"handleWarning",required:!1,type:{name:"((message: string) => void)"}},handleError:{defaultValue:null,description:"Fired when ReactDagEditor catches an error. And the return value will be rendered.",name:"handleError",required:!1,type:{name:"((error?: Error, errorInfo?: ErrorInfo, children?: ReactNode) => ReactChild) | undefined"}},getGlobalEventTarget:{defaultValue:null,description:"Fallback to `window` if this is not provided or returns null or undefined",name:"getGlobalEventTarget",required:!1,type:{name:"(() => Element | Window | null)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ReactDagEditor.tsx#ReactDagEditor"]={docgenInfo:ReactDagEditor_ReactDagEditor.__docgenInfo,name:"ReactDagEditor",path:"src/components/ReactDagEditor.tsx#ReactDagEditor"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(66),__webpack_require__(12);var v4=__webpack_require__(934),hooks=__webpack_require__(43),GraphConfigContext=__webpack_require__(266),VirtualizationContext=(__webpack_require__(56),Object(react.createContext)({viewport:{rect:{height:0,width:0,x:0,y:0,bottom:0,left:0,right:0,top:0,toJSON:function toJSON(){return this}},transformMatrix:createGraphState.b},renderedArea:{minX:0,minY:0,maxX:0,maxY:0},visibleArea:{minX:0,minY:0,maxX:0,maxY:0},renderedNodes:new Set,renderedEdges:new Set,timestamp:0}));function useGraphConfig(){return Object(react.useContext)(GraphConfigContext.a)}function useGraphController(){return Object(react.useContext)(GraphControllerContext)}function useViewport(){return Object(react.useContext)(contexts.e)}function useAlignmentLines(){return Object(react.useContext)(AlignmentLinesContext)}function useVirtualization(){return Object(react.useContext)(VirtualizationContext)}__webpack_require__(210);var constants=__webpack_require__(21),controllers=__webpack_require__(51),eventemitter3=__webpack_require__(541);function PointerEventProvider_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function PointerEventProvider_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var PointerEventProvider_PointerEventProvider=function(){function PointerEventProvider(target){var _this=this,pointerId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;PointerEventProvider_classCallCheck(this,PointerEventProvider),this.target=void 0,this.pointerId=void 0,this.eventEmitter=new eventemitter3.EventEmitter,this.onMove=function(e){null!==_this.pointerId&&_this.pointerId!==e.pointerId||_this.eventEmitter.emit("move",e)},this.onUp=function(e){null!==_this.pointerId&&_this.pointerId!==e.pointerId||_this.eventEmitter.emit("end",e)},this.target=target,this.pointerId=pointerId}return function PointerEventProvider_createClass(Constructor,protoProps,staticProps){return protoProps&&PointerEventProvider_defineProperties(Constructor.prototype,protoProps),staticProps&&PointerEventProvider_defineProperties(Constructor,staticProps),Constructor}(PointerEventProvider,[{key:"off",value:function off(type,callback){return this.eventEmitter.off(type,callback),this.ensureRemoveListener(type),this}},{key:"on",value:function on(type,callback){return this.ensureAddListener(type),this.eventEmitter.on(type,callback),this}},{key:"ensureAddListener",value:function ensureAddListener(type){if(!this.eventEmitter.listeners(type).length)switch(type){case"move":this.target.addEventListener("pointermove",this.onMove);break;case"end":this.target.addEventListener("pointerup",this.onUp)}}},{key:"ensureRemoveListener",value:function ensureRemoveListener(type){if(!this.eventEmitter.listeners(type).length)switch(type){case"move":this.target.removeEventListener("pointermove",this.onMove);break;case"end":this.target.removeEventListener("pointerup",this.onUp)}}}]),PointerEventProvider}();function MouseMoveEventProvider_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var prevMouseDownPortId,prevMouseDownPortTime,MouseMoveEventProvider=function(){function MouseMoveEventProvider(target){!function MouseMoveEventProvider_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MouseMoveEventProvider),this.target=void 0,this.target=target}return function MouseMoveEventProvider_createClass(Constructor,protoProps,staticProps){return protoProps&&MouseMoveEventProvider_defineProperties(Constructor.prototype,protoProps),staticProps&&MouseMoveEventProvider_defineProperties(Constructor,staticProps),Constructor}(MouseMoveEventProvider,[{key:"off",value:function off(type,callback){switch(type){case"move":this.target.removeEventListener("mousemove",callback);break;case"end":this.target.removeEventListener("mouseup",callback)}return this}},{key:"on",value:function on(type,callback){switch(type){case"move":this.target.addEventListener("mousemove",callback);break;case"end":this.target.addEventListener("mouseup",callback)}return this}}]),MouseMoveEventProvider}(),models_event=__webpack_require__(1),isWithinThreshold=__webpack_require__(270),container_withSimulatedClick=function withSimulatedClick(params,type){return function(_ref){var _containerRef$current,totalDX=_ref.totalDX,totalDY=_ref.totalDY,rawEvent=_ref.e,eventChannel=params.eventChannel,dragThreshold=params.dragThreshold,containerRef=params.containerRef,events=[];events.push({type:type,rawEvent:rawEvent}),rawEvent.target instanceof Node&&null!==(_containerRef$current=containerRef.current)&&void 0!==_containerRef$current&&_containerRef$current.contains(rawEvent.target)&&Object(isWithinThreshold.a)(totalDX,totalDY,dragThreshold)&&events.push({type:models_event.a.Click,rawEvent:rawEvent}),eventChannel.batch(events)}},container_onContainerMouseDown=function onContainerMouseDown(e,params){var _state$activeKeys;if(e.preventDefault(),e.stopPropagation(),e.button===constants.c.Primary){var canvasMouseMode=params.canvasMouseMode,isPanDisabled=params.isPanDisabled,isMultiSelectDisabled=params.isMultiSelectDisabled,state=params.state,isLassoSelectEnable=params.isLassoSelectEnable,graphController=params.graphController,isPanMode=canvasMouseMode===models_state.a.pan&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey||(null===(_state$activeKeys=state.activeKeys)||void 0===_state$activeKeys?void 0:_state$activeKeys.has(" "));!isPanDisabled&&isPanMode?function dragPan(e,params){var getPositionFromEvent=params.getPositionFromEvent,graphController=params.graphController,eventChannel=params.eventChannel,dragging=new controllers.a(new MouseMoveEventProvider(graphController.getGlobalEventTarget()),getPositionFromEvent);dragging.onMove=function(_ref3){var dx=_ref3.dx,dy=_ref3.dy,rawEvent=_ref3.e;eventChannel.trigger({type:models_event.a.Drag,rawEvent:rawEvent,dx:dx,dy:dy})},dragging.onEnd=container_withSimulatedClick(params,models_event.a.DragEnd),dragging.start(e),eventChannel.trigger({type:models_event.a.DragStart,rawEvent:e})}(e.nativeEvent,params):!isMultiSelectDisabled||isLassoSelectEnable&&!e.ctrlKey&&!e.metaKey?function dragMultiSelect(e,params){var getPositionFromEvent=params.getPositionFromEvent,graphController=params.graphController,eventChannel=params.eventChannel,dragging=new controllers.a(new MouseMoveEventProvider(graphController.getGlobalEventTarget()),getPositionFromEvent);dragging.onMove=function(_ref2){var dx=_ref2.dx,dy=_ref2.dy,rawEvent=_ref2.e;eventChannel.trigger({type:models_event.a.SelectMove,rawEvent:rawEvent,dx:dx,dy:dy})},dragging.onEnd=container_withSimulatedClick(params,models_event.a.SelectEnd),eventChannel.trigger({type:models_event.a.SelectStart,rawEvent:e}),dragging.start(e)}(e.nativeEvent,params):graphController.canvasClickOnce=!0}},utils=__webpack_require__(3),keyboard=__webpack_require__(99),behaviorReducer=__webpack_require__(284),a11yUtils=__webpack_require__(52),scheduling=__webpack_require__(98);__webpack_require__(92);function useEventChannel(_ref){var props=_ref.props,dispatch=_ref.dispatch,rectRef=_ref.rectRef,svgRef=_ref.svgRef,containerRef=_ref.containerRef,featureControl=_ref.featureControl,graphConfig=_ref.graphConfig,setFocusedWithoutMouse=_ref.setFocusedWithoutMouse,setCurHoverNode=_ref.setCurHoverNode,setCurHoverPort=_ref.setCurHoverPort,eventChannel=_ref.eventChannel,updateViewport=_ref.updateViewport,graphController=_ref.graphController,_props$dragThreshold=props.dragThreshold,dragThreshold=void 0===_props$dragThreshold?10:_props$dragThreshold,_props$autoAlignThres=props.autoAlignThreshold,autoAlignThreshold=void 0===_props$autoAlignThres?constants.b:_props$autoAlignThres,_props$getPositionFro=props.getPositionFromEvent,getPositionFromEvent=void 0===_props$getPositionFro?controllers.e:_props$getPositionFro,canvasMouseMode=props.canvasMouseMode,edgeWillAdd=props.edgeWillAdd,isNodesDraggable=featureControl.isNodesDraggable,isAutoAlignEnable=featureControl.isAutoAlignEnable,isClickNodeToSelectDisabled=featureControl.isClickNodeToSelectDisabled,isPanDisabled=featureControl.isPanDisabled,isMultiSelectDisabled=featureControl.isMultiSelectDisabled,isLassoSelectEnable=featureControl.isLassoSelectEnable,isConnectDisabled=featureControl.isConnectDisabled,isPortHoverViewEnable=featureControl.isPortHoverViewEnable,isNodeEditDisabled=featureControl.isNodeEditDisabled,isA11yEnable=featureControl.isA11yEnable,animationFramedDispatch=react.useMemo((function(){return Object(scheduling.a)(dispatch)}),[dispatch]),keyDownHandler=function useCanvasKeyboardEventHandlers(args){var featureControl=args.featureControl,graphConfig=args.graphConfig,setCurHoverNode=args.setCurHoverNode,setCurHoverPort=args.setCurHoverPort,eventChannel=args.eventChannel,isDeleteDisabled=featureControl.isDeleteDisabled,isPasteDisabled=featureControl.isPasteDisabled,isUndoEnabled=featureControl.isUndoEnabled;return react.useMemo((function(){var keyDownHandlerMap=new Map,deleteKeyDownHandler=function deleteKeyDownHandler(){return function(evt){evt.preventDefault(),evt.stopPropagation(),isDeleteDisabled||(eventChannel.trigger({type:models_event.a.Delete}),setCurHoverNode(void 0),setCurHoverPort(void 0))}};return keyDownHandlerMap.set("delete",deleteKeyDownHandler()),keyDownHandlerMap.set("backspace",deleteKeyDownHandler()),keyDownHandlerMap.set("c",(function cKeyDownHandler(evt){Object(keyboard.b)(evt)&&(evt.preventDefault(),evt.stopPropagation(),eventChannel.trigger({type:models_event.a.Copy}))})),keyDownHandlerMap.set("v",(function vKeyDownHandler(evt){if(Object(keyboard.b)(evt)){if(evt.preventDefault(),evt.stopPropagation(),isPasteDisabled)return;var data=graphConfig.getClipboard().read();data&&eventChannel.trigger({type:models_event.a.Paste,data:data})}})),keyDownHandlerMap.set("z",(function zKeyDownHandler(evt){Object(keyboard.b)(evt)&&(evt.preventDefault(),evt.stopPropagation(),isUndoEnabled&&eventChannel.trigger({type:models_event.a.Undo}))})),keyDownHandlerMap.set("y",(function yKeyDownHandler(evt){Object(keyboard.b)(evt)&&(evt.preventDefault(),evt.stopPropagation(),isUndoEnabled&&eventChannel.trigger({type:models_event.a.Redo}))})),keyDownHandlerMap.set("a",(function aKeyDownHandler(evt){Object(keyboard.b)(evt)&&(evt.preventDefault(),evt.stopPropagation(),eventChannel.trigger({type:models_event.e.SelectAll}))})),keyDownHandlerMap.set(" ",(function spaceKeyDownHandler(evt){evt.preventDefault(),evt.stopPropagation()})),keyDownHandlerMap.set("control",(function ctrlKeyDownHandler(evt){evt.preventDefault(),evt.stopPropagation()})),keyDownHandlerMap.set("meta",(function metaKeyDownHandler(evt){evt.preventDefault(),evt.stopPropagation()})),keyDownHandlerMap.set("shift",(function shiftKeyDownHandler(evt){evt.preventDefault(),evt.stopPropagation()})),function(evt){if(!evt.repeat){var key=evt.key.toLowerCase(),handler=keyDownHandlerMap.get(key);handler&&handler.call(null,evt)}}}),[eventChannel,graphConfig,isDeleteDisabled,isPasteDisabled,isUndoEnabled,setCurHoverNode,setCurHoverPort])}({featureControl:featureControl,eventChannel:eventChannel,graphConfig:graphConfig,setCurHoverNode:setCurHoverNode,setCurHoverPort:setCurHoverPort}),handleCanvasEvent=function handleCanvasEvent(event){switch(event.type){case models_event.a.ViewportResize:case models_event.a.Drag:case models_event.a.MouseWheelScroll:case models_event.a.Zoom:case models_event.a.Pinch:case models_event.a.Click:case models_event.a.SelectStart:case models_event.a.SelectMove:case models_event.a.SelectEnd:case models_event.a.ResetSelection:case models_event.a.Navigate:case models_event.a.Paste:case models_event.a.Undo:case models_event.a.Redo:case models_event.a.Delete:case models_event.a.KeyUp:case models_event.a.DraggingNodeFromItemPanelStart:case models_event.a.DraggingNodeFromItemPanel:case models_event.a.DraggingNodeFromItemPanelEnd:dispatch(event);break;case models_event.a.Copy:var selectedData=Object(utils.filterSelectedItems)(graphController.getData());graphConfig.getClipboard().write(selectedData);break;case models_event.a.KeyDown:event.rawEvent.repeat||event.rawEvent.target!==event.rawEvent.currentTarget||event.rawEvent.shiftKey||"Tab"!==event.rawEvent.key?keyDownHandler(event.rawEvent):(event.rawEvent.preventDefault(),event.rawEvent.stopPropagation(),setFocusedWithoutMouse(!0),function focusFirstNode(e){var data=graphController.getData();if(data.nodes.size>0&&svgRef.current){var firstNode=data.head&&data.nodes.get(data.head);firstNode&&Object(a11yUtils.e)(svgRef,{node:firstNode,port:void 0},e,eventChannel)}}(event.rawEvent)),dispatch(event);break;case models_event.a.MouseDown:var _svgRef$current;graphController.nodeClickOnce=null,null===(_svgRef$current=svgRef.current)||void 0===_svgRef$current||_svgRef$current.focus({preventScroll:!0}),setFocusedWithoutMouse(!1);var evt=event.rawEvent;updateViewport(),container_onContainerMouseDown(evt,{state:graphController.state,canvasMouseMode:canvasMouseMode,isPanDisabled:isPanDisabled,isMultiSelectDisabled:isMultiSelectDisabled,isLassoSelectEnable:isLassoSelectEnable,dragThreshold:dragThreshold,containerRef:containerRef,getPositionFromEvent:controllers.e,eventChannel:eventChannel,graphController:graphController});break;case models_event.a.MouseUp:if(graphController.canvasClickOnce){var _svgRef$current2;graphController.canvasClickOnce=!1;var _evt=event.rawEvent;_evt.target instanceof Node&&null!==(_svgRef$current2=svgRef.current)&&void 0!==_svgRef$current2&&_svgRef$current2.contains(_evt.target)&&"svg"===_evt.target.nodeName&&eventChannel.trigger({type:models_event.a.Click,rawEvent:event.rawEvent})}break;case models_event.a.ContextMenu:event.rawEvent.preventDefault(),event.rawEvent.stopPropagation(),dispatch(event);break;case models_event.a.MouseMove:var _evt2=event.rawEvent;graphController.setMouseClientPosition({x:_evt2.clientX,y:_evt2.clientY});break;case models_event.a.MouseLeave:graphController.unsetMouseClientPosition(),graphController.canvasClickOnce=!1;break;case models_event.a.Blur:setFocusedWithoutMouse(!1)}},handleNodeEvent=function handleNodeEvent(event){var _graphController$node;switch(event.type){case models_event.e.ResizingStart:case models_event.e.Resizing:case models_event.e.ResizingEnd:case models_event.e.DragStart:case models_event.e.Drag:case models_event.e.DragEnd:case models_event.e.SelectAll:dispatch(event);break;case models_event.e.PointerMove:event.rawEvent.pointerId===graphController.pointerId&&animationFramedDispatch(event);break;case models_event.e.PointerDown:if(graphController.nodeClickOnce=null,graphController.getBehavior()!==models_state.b.default)return;var evt=event.rawEvent;updateViewport(),function onNodePointerDown(evt,target,params){evt.preventDefault();var svgRef=params.svgRef,isNodesDraggable=params.isNodesDraggable,getPositionFromEvent=params.getPositionFromEvent,isClickNodeToSelectDisabled=params.isClickNodeToSelectDisabled,eventChannel=params.eventChannel,dragThreshold=params.dragThreshold,rectRef=params.rectRef,isAutoAlignEnable=params.isAutoAlignEnable,autoAlignThreshold=params.autoAlignThreshold,graphController=params.graphController;isNodesDraggable&&evt.stopPropagation();var isMouseRight="mouse"===evt.pointerType&&evt.button!==constants.c.Primary;if(!isClickNodeToSelectDisabled&&!isMouseRight){svgRef.current&&svgRef.current.focus({preventScroll:!0});var isMultiSelect=Object(keyboard.a)(evt),dragging=new controllers.b(new PointerEventProvider_PointerEventProvider(graphController.getGlobalEventTarget(),evt.pointerId),getPositionFromEvent,rectRef);dragging.onMove=function(_ref){var dx=_ref.dx,dy=_ref.dy,totalDX=_ref.totalDX,totalDY=_ref.totalDY,e=_ref.e;isNodesDraggable&&eventChannel.trigger({type:models_event.e.Drag,node:target,dx:dx,dy:dy,rawEvent:e,isVisible:!Object(utils.isWithinThreshold)(totalDX,totalDY,dragThreshold),isAutoAlignEnable:isAutoAlignEnable,autoAlignThreshold:autoAlignThreshold})},dragging.onEnd=function(_ref2){var totalDX=_ref2.totalDX,totalDY=_ref2.totalDY,e=_ref2.e;graphController.pointerId=null;var events=[],isDragCanceled=Object(utils.isWithinThreshold)(totalDX,totalDY,dragThreshold);events.push({type:models_event.e.DragEnd,node:target,rawEvent:e,isDragCanceled:isDragCanceled}),!isDragCanceled&&isNodesDraggable||(graphController.nodeClickOnce=target),eventChannel.batch(events)},graphController.pointerId=evt.pointerId,evt.target instanceof Element&&"mouse"!==evt.pointerType&&evt.target.releasePointerCapture(evt.pointerId),eventChannel.trigger({type:models_event.e.DragStart,node:target,rawEvent:evt,isMultiSelect:isMultiSelect}),dragging.start(evt.nativeEvent)}}(evt,event.node,{svgRef:svgRef,rectRef:rectRef,isNodesDraggable:isNodesDraggable,isAutoAlignEnable:isAutoAlignEnable,dragThreshold:dragThreshold,getPositionFromEvent:getPositionFromEvent,isClickNodeToSelectDisabled:isClickNodeToSelectDisabled,autoAlignThreshold:autoAlignThreshold,eventChannel:eventChannel,graphController:graphController});break;case models_event.e.PointerEnter:!function onNodePointerEnter(event){var node=event.node,isNodeHoverViewEnabled=featureControl.isNodeHoverViewEnabled;switch(graphController.getBehavior()){case models_state.b.connecting:case models_state.b.default:isNodeHoverViewEnabled&&(setCurHoverNode(node.id),setCurHoverPort(void 0))}dispatch(event)}(event);break;case models_event.e.PointerLeave:!function onNodePointerLeave(event){dispatch(event),setCurHoverNode(void 0)}(event);break;case models_event.e.MouseDown:graphController.nodeClickOnce=null,event.rawEvent.preventDefault(),isNodesDraggable&&event.rawEvent.stopPropagation(),setFocusedWithoutMouse(!1);break;case models_event.e.Click:if((null===(_graphController$node=graphController.nodeClickOnce)||void 0===_graphController$node?void 0:_graphController$node.id)===event.node.id){var currentTarget=event.rawEvent.currentTarget;currentTarget instanceof SVGElement&&currentTarget.focus({preventScroll:!0}),event.node=graphController.nodeClickOnce,dispatch(event),graphController.nodeClickOnce=null}else event.intercepted=!0;break;case models_event.e.ContextMenu:event.rawEvent.preventDefault(),event.rawEvent.stopPropagation(),dispatch(event);break;case models_event.e.DoubleClick:!function onNodeDoubleClick(event){isNodeEditDisabled||(event.rawEvent.stopPropagation(),dispatch(event))}(event);break;case models_event.e.KeyDown:!function onNodeKeyDown(event){if(svgRef&&isA11yEnable){var data=graphController.getData(),node=event.node,evt=event.rawEvent;switch(evt.key){case"Tab":evt.preventDefault(),evt.stopPropagation();var nextItem=evt.shiftKey?Object(a11yUtils.l)(data,node):Object(a11yUtils.k)(data,node);Object(a11yUtils.e)(svgRef,nextItem,evt,eventChannel);break;case"ArrowUp":evt.preventDefault(),evt.stopPropagation(),Object(a11yUtils.j)(data,node.id,svgRef,graphController,evt,eventChannel);break;case"ArrowDown":evt.preventDefault(),evt.stopPropagation(),Object(a11yUtils.d)(data,node.id,svgRef,graphController,evt,eventChannel);break;case"ArrowLeft":evt.preventDefault(),evt.stopPropagation(),Object(a11yUtils.f)(data,node.id,svgRef,graphController,evt,eventChannel);break;case"ArrowRight":evt.preventDefault(),evt.stopPropagation(),Object(a11yUtils.i)(data,node.id,svgRef,graphController,evt,eventChannel)}}}(event)}},onPortPointerDown=react.useCallback((function(event){var evt=event.rawEvent,node=event.node,port=event.port;if(setFocusedWithoutMouse(!1),evt.stopPropagation(),evt.preventDefault(),prevMouseDownPortId=node.id+":"+port.id,prevMouseDownPortTime=performance.now(),!(isConnectDisabled||"mouse"===evt.pointerType&&evt.button!==constants.c.Primary)){updateViewport();var globalEventTarget=graphController.getGlobalEventTarget(),dragging=new controllers.a(new PointerEventProvider_PointerEventProvider(globalEventTarget,evt.pointerId),getPositionFromEvent);dragging.onMove=function(_ref2){var clientX=_ref2.clientX,clientY=_ref2.clientY,e=_ref2.e;eventChannel.trigger({type:models_event.c.ConnectMove,rawEvent:e,clientX:clientX,clientY:clientY})},dragging.onEnd=function(_ref3){var e=_ref3.e;eventChannel.trigger({type:models_event.c.ConnectEnd,rawEvent:e,edgeWillAdd:edgeWillAdd,isCancel:!1}),graphController.pointerId=null},eventChannel.trigger({type:models_event.c.ConnectStart,nodeId:node.id,portId:port.id,rawEvent:evt,clientPoint:{x:evt.clientX,y:evt.clientY}}),evt.target instanceof Element&&"mouse"!==evt.pointerType&&evt.target.releasePointerCapture(evt.pointerId),graphController.pointerId=evt.pointerId,dragging.start(evt.nativeEvent)}}),[edgeWillAdd,eventChannel,getPositionFromEvent,graphController,isConnectDisabled,setFocusedWithoutMouse,updateViewport]),onPortPointerUp=react.useCallback((function(event){var evt=event.rawEvent,node=event.node,port=event.port;prevMouseDownPortId===node.id+":"+port.id&&performance.now()-(prevMouseDownPortTime||0)<500&&(prevMouseDownPortId=void 0,prevMouseDownPortTime=void 0,eventChannel.trigger({type:models_event.f.Click,node:node,port:port,rawEvent:evt}))}),[eventChannel]),handlePortEvent=function handlePortEvent(event){switch(event.type){case models_event.f.Click:dispatch(event);break;case models_event.f.PointerDown:onPortPointerDown(event);break;case models_event.f.PointerUp:onPortPointerUp(event);break;case models_event.f.PointerEnter:!function onPortPointerEnter(event){graphController.getBehavior()===models_state.b.default&&setCurHoverPort([event.node.id,event.port.id]);isPortHoverViewEnable&&setCurHoverPort([event.node.id,event.port.id]),event.rawEvent.pointerId===graphController.pointerId&&dispatch(event)}(event);break;case models_event.f.PointerLeave:!function onPortPointerLeave(event){setCurHoverPort(void 0),dispatch(event)}(event);break;case models_event.f.ContextMenu:event.rawEvent.preventDefault(),event.rawEvent.stopPropagation(),dispatch(event);break;case models_event.f.Focus:event.rawEvent.stopPropagation(),dispatch(event);break;case models_event.f.Blur:graphController.getBehavior()===models_state.b.connecting&&eventChannel.trigger({type:models_event.c.ConnectEnd,rawEvent:event.rawEvent.nativeEvent,edgeWillAdd:edgeWillAdd,isCancel:!0});break;case models_event.f.KeyDown:!function onPortKeyDown(event){var _node$ports,_node$ports2;if(isA11yEnable){var evt=event.rawEvent;if(evt.altKey&&("KeyC"===evt.nativeEvent.code||"c"===evt.key))return evt.preventDefault(),evt.stopPropagation(),void eventChannel.trigger({type:models_event.c.ConnectStart,nodeId:event.node.id,portId:event.port.id,rawEvent:evt});var data=graphController.getData(),node=event.node,port=event.port;switch(evt.key){case"Tab":if(isA11yEnable&&graphController.getBehavior()===models_state.b.connecting)evt.preventDefault(),evt.stopPropagation(),eventChannel.trigger({type:models_event.c.ConnectNavigate,rawEvent:evt});else{var nextItem=evt.shiftKey?Object(a11yUtils.l)(data,node,port):Object(a11yUtils.k)(data,node,port);Object(a11yUtils.e)(svgRef,nextItem,evt,eventChannel)}break;case"ArrowUp":case"ArrowLeft":evt.preventDefault(),evt.stopPropagation(),Object(a11yUtils.h)(null!==(_node$ports=node.ports)&&void 0!==_node$ports?_node$ports:[],node,port.id,svgRef,evt,eventChannel);break;case"ArrowDown":case"ArrowRight":evt.preventDefault(),evt.stopPropagation(),Object(a11yUtils.g)(null!==(_node$ports2=node.ports)&&void 0!==_node$ports2?_node$ports2:[],node,port.id,svgRef,evt,eventChannel);break;case"g":evt.preventDefault(),evt.stopPropagation(),Object(a11yUtils.m)(data,node,port,svgRef,evt,eventChannel);break;case"Escape":var _findDOMElement;graphController.getBehavior()===models_state.b.connecting&&(evt.preventDefault(),evt.stopPropagation(),svgRef.current&&(null===(_findDOMElement=Object(a11yUtils.c)(svgRef.current,{node:node,port:port}))||void 0===_findDOMElement||_findDOMElement.blur()));break;case"Enter":evt.preventDefault(),evt.stopPropagation(),eventChannel.trigger({type:models_event.c.ConnectEnd,rawEvent:evt.nativeEvent,edgeWillAdd:edgeWillAdd,isCancel:!1})}}}(event)}},handleEvent=function handleEvent(event){var behavior=Object(behaviorReducer.b)(graphController.getBehavior(),event);switch(graphController.setBehavior(behavior),function handleEdgeEvent(event){switch(event.type){case models_event.c.ConnectStart:case models_event.c.ConnectMove:case models_event.c.ConnectEnd:case models_event.c.ConnectNavigate:case models_event.c.Click:case models_event.c.MouseEnter:case models_event.c.MouseLeave:case models_event.c.DoubleClick:dispatch(event);break;case models_event.c.ContextMenu:event.rawEvent.stopPropagation(),event.rawEvent.preventDefault(),dispatch(event)}}(event),handleCanvasEvent(event),handleNodeEvent(event),handlePortEvent(event),event.type){case models_event.d.Pan:case models_event.g.Scroll:case models_event.b.Open:case models_event.b.Close:dispatch(event)}};react.useImperativeHandle(eventChannel.listenersRef,(function(){return handleEvent})),react.useImperativeHandle(eventChannel.externalHandlerRef,(function(){return props.onEvent}))}var Features=__webpack_require__(32),empty=__webpack_require__(273),getOffsetLimit=__webpack_require__(277),Line_Line=function Line(props){var _style$stroke,line=props.line,style=props.style,lineStyle=Object.assign({strokeWidth:1},style,{stroke:line.visible?null!==(_style$stroke=null==style?void 0:style.stroke)&&void 0!==_style$stroke?_style$stroke:"#ea4300":"none"});return Object(jsx_runtime.jsx)("line",{className:"auto-align-hint",x1:line.x1,y1:line.y1,x2:line.x2,y2:line.y2,style:lineStyle})};Line_Line.displayName="Line";try{Line_Line.displayName="Line",Line_Line.__docgenInfo={description:"",displayName:"Line",props:{line:{defaultValue:null,description:"",name:"line",required:!0,type:{name:"ILine"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Line.tsx#Line"]={docgenInfo:Line_Line.__docgenInfo,name:"Line",path:"src/components/Line.tsx#Line"})}catch(__react_docgen_typescript_loader_error){}var AlignmentLines=react.memo((function(_ref){var style=_ref.style,alignmentLines=useAlignmentLines();return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:alignmentLines.map((function(l,index){return l.visible?Object(jsx_runtime.jsx)(Line_Line,{line:l,style:style},index):null}))})}));AlignmentLines.displayName="AlignmentLines";var AnimatingNodeGroup_AnimatingNodeGroup=function AnimatingNodeGroup(props){var _dummyNodes$alignedDX,_dummyNodes$alignedDY,dummyNodes=props.dummyNodes,graphData=props.graphData,graphConfig=useGraphConfig(),dWidth=dummyNodes.dWidth,dHeight=dummyNodes.dHeight,dx=null!==(_dummyNodes$alignedDX=dummyNodes.alignedDX)&&void 0!==_dummyNodes$alignedDX?_dummyNodes$alignedDX:dummyNodes.dx,dy=null!==(_dummyNodes$alignedDY=dummyNodes.alignedDY)&&void 0!==_dummyNodes$alignedDY?_dummyNodes$alignedDY:dummyNodes.dy;return Object(jsx_runtime.jsx)("g",{children:dummyNodes.nodes.map((function(dummyNode){var node=graphData.nodes.get(dummyNode.id);if(!node)return null;var x=dummyNode.x+dx,y=dummyNode.y+dy,width=dummyNode.width+dWidth,height=dummyNode.height+dHeight,nodeConfig=Object(utils.getNodeConfig)(node,graphConfig);return null!=nodeConfig&&nodeConfig.renderDummy?nodeConfig.renderDummy(Object.assign({},node.inner,{x:x,y:y,width:width,height:height})):Object(jsx_runtime.jsx)("rect",{transform:"translate("+x+","+y+")",height:height,width:width,stroke:constants.f.dummyNodeStroke,strokeDasharray:"4",fill:"none"},node.id)}))})};AnimatingNodeGroup_AnimatingNodeGroup.displayName="AnimatingNodeGroup";try{AnimatingNodeGroup_AnimatingNodeGroup.displayName="AnimatingNodeGroup",AnimatingNodeGroup_AnimatingNodeGroup.__docgenInfo={description:"",displayName:"AnimatingNodeGroup",props:{dummyNodes:{defaultValue:null,description:"",name:"dummyNodes",required:!0,type:{name:"IDummyNodes"}},graphData:{defaultValue:null,description:"",name:"graphData",required:!0,type:{name:"GraphModel<unknown, unknown, unknown>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/AnimatingNodeGroup.tsx#AnimatingNodeGroup"]={docgenInfo:AnimatingNodeGroup_AnimatingNodeGroup.__docgenInfo,name:"AnimatingNodeGroup",path:"src/components/AnimatingNodeGroup.tsx#AnimatingNodeGroup"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(490);var ConnectingLine_ConnectingLine=function ConnectingLine(props){var autoAttachLine=props.autoAttachLine,connectingLine=props.connectingLine,styles=props.styles,strokeColor=(null==styles?void 0:styles.stroke)||constants.f.primaryColor,fill=(null==styles?void 0:styles.fill)||"none",strokeDasharray=(null==styles?void 0:styles.strokeDasharray)||"4,4",connectingLineStroke=connectingLine.visible?strokeColor:"none";return Object(jsx_runtime.jsxs)("g",{children:[Object(jsx_runtime.jsx)("defs",{children:Object(jsx_runtime.jsx)("marker",{id:"markerArrow",markerWidth:"10",markerHeight:"10",refX:"6",refY:"5",orient:"auto",markerUnits:"strokeWidth",children:Object(jsx_runtime.jsx)("path",{d:"M0,0 L6,5 L0,10",style:{stroke:connectingLineStroke,fill:"none"}})})}),Object(jsx_runtime.jsx)("line",{x1:connectingLine.x1,y1:connectingLine.y1,x2:connectingLine.x2,y2:connectingLine.y2,style:{stroke:connectingLineStroke,fill:fill,strokeDasharray:strokeDasharray},markerEnd:"url(#markerArrow)"}),Object(jsx_runtime.jsx)("path",{d:Object(utils.getCurvePathD)(autoAttachLine.x2,autoAttachLine.x1,autoAttachLine.y2,autoAttachLine.y1),style:{stroke:autoAttachLine.visible?strokeColor:"none",fill:"none"}})]})};ConnectingLine_ConnectingLine.displayName="ConnectingLine";try{ConnectingLine_ConnectingLine.displayName="ConnectingLine",ConnectingLine_ConnectingLine.__docgenInfo={description:"",displayName:"ConnectingLine",props:{connectingLine:{defaultValue:null,description:"",name:"connectingLine",required:!0,type:{name:"ILine"}},autoAttachLine:{defaultValue:null,description:"",name:"autoAttachLine",required:!0,type:{name:"ILine"}},styles:{defaultValue:null,description:"",name:"styles",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Connecting/ConnectingLine.tsx#ConnectingLine"]={docgenInfo:ConnectingLine_ConnectingLine.__docgenInfo,name:"ConnectingLine",path:"src/components/Connecting/ConnectingLine.tsx#ConnectingLine"})}catch(__react_docgen_typescript_loader_error){}var Connecting=react.memo((function(props){var styles=props.styles,graphConfig=props.graphConfig,viewport=props.viewport,movingPoint=props.movingPoint,_useConnectingState=function useConnectingState(){return Object(react.useContext)(ConnectingStateContext)}(),sourcePort=_useConnectingState.sourcePort,sourceNode=_useConnectingState.sourceNode,targetPort=_useConnectingState.targetPort,targetNode=_useConnectingState.targetNode;if(!sourceNode||!sourcePort)return null;var targetPortPosition,sourcePortPosition=sourceNode.getPortPosition(sourcePort.id,graphConfig),isAttach=!1;if(targetNode&&targetPort?(isAttach=!0,targetPortPosition=null==targetNode?void 0:targetNode.getPortPosition(targetPort.id,graphConfig)):targetPortPosition=sourcePortPosition,!sourcePortPosition||!targetPortPosition)return null;var sourcePoint=Object(utils.transformPoint)(sourcePortPosition.x,sourcePortPosition.y,viewport.transformMatrix),targetPoint=Object(utils.transformPoint)(targetPortPosition.x,targetPortPosition.y,viewport.transformMatrix),connectingLine=movingPoint?{x1:sourcePoint.x,y1:sourcePoint.y,x2:movingPoint.x,y2:movingPoint.y,visible:!isAttach}:{x1:0,y1:0,x2:0,y2:0,visible:!1},autoAttachLine={x1:sourcePoint.x,y1:sourcePoint.y,x2:targetPoint.x,y2:targetPoint.y,visible:isAttach};return Object(jsx_runtime.jsx)(ConnectingLine_ConnectingLine,{connectingLine:connectingLine,autoAttachLine:autoAttachLine,styles:styles})}));Connecting.displayName="Connecting";try{Connecting.displayName="Connecting",Connecting.__docgenInfo={description:"",displayName:"Connecting",props:{graphConfig:{defaultValue:null,description:"",name:"graphConfig",required:!0,type:{name:"IGraphConfig<unknown, unknown, unknown>"}},styles:{defaultValue:null,description:"",name:"styles",required:!1,type:{name:"CSSProperties"}},eventChannel:{defaultValue:null,description:"",name:"eventChannel",required:!0,type:{name:"EventChannel"}},viewport:{defaultValue:null,description:"",name:"viewport",required:!0,type:{name:"IViewport"}},movingPoint:{defaultValue:null,description:"",name:"movingPoint",required:!0,type:{name:"IPoint | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Connecting/Connecting.tsx#Connecting"]={docgenInfo:Connecting.__docgenInfo,name:"Connecting",path:"src/components/Connecting/Connecting.tsx#Connecting"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(34);var ContextMenuConfigContext=__webpack_require__(144),useContextMenuConfigContext=__webpack_require__(274),utils_state=__webpack_require__(28);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function GraphContextMenu_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return GraphContextMenu_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GraphContextMenu_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GraphContextMenu_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var defaultStyle={position:"fixed",userSelect:"none"},GraphContextMenu_GraphContextMenu=function GraphContextMenu(_ref){var _state$contextMenuPos2,_state$contextMenuPos3,state=_ref.state,onClick=_ref.onClick,ref=react.useRef(null),_React$useState2=_slicedToArray(react.useState(Object.assign({},defaultStyle)),2),style=_React$useState2[0],setStyle=_React$useState2[1];react.useLayoutEffect((function(){var el=ref.current;if(el&&state.contextMenuPosition){var _state$contextMenuPos=state.contextMenuPosition,x=_state$contextMenuPos.x,y=_state$contextMenuPos.y,_document$documentEle=document.documentElement,clientWidth=_document$documentEle.clientWidth,clientHeight=_document$documentEle.clientHeight,_el$getBoundingClient=el.getBoundingClientRect(),width=_el$getBoundingClient.width,height=_el$getBoundingClient.height,nextStyle=Object.assign({},defaultStyle);x+width>=clientWidth?nextStyle.right=0:nextStyle.left=x,y+height>clientHeight?nextStyle.bottom=0:nextStyle.top=y,setStyle(nextStyle)}}),[null===(_state$contextMenuPos2=state.contextMenuPosition)||void 0===_state$contextMenuPos2?void 0:_state$contextMenuPos2.x,null===(_state$contextMenuPos3=state.contextMenuPosition)||void 0===_state$contextMenuPos3?void 0:_state$contextMenuPos3.y]);var contextMenuConfig=Object(useContextMenuConfigContext.a)(),_React$useState4=_slicedToArray(react.useState(Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{})),2),content=_React$useState4[0],setContent=_React$useState4[1];react.useEffect((function(){var menu,data=state.data.present,selectedNodesCount=0,selectedPortsCount=0,selectedEdgesCount=0;data.nodes.forEach((function(node){var _node$ports;Object(utils_state.d)(node)&&(selectedNodesCount+=1),null===(_node$ports=node.ports)||void 0===_node$ports||_node$ports.forEach((function(port){Object(utils_state.d)(port)&&(selectedPortsCount+=1)}))})),data.edges.forEach((function(edge){Object(utils_state.d)(edge)&&(selectedEdgesCount+=1)})),menu=selectedPortsCount+selectedNodesCount+selectedEdgesCount>1?contextMenuConfig.getMenu(ContextMenuConfigContext.c.Multi):selectedPortsCount+selectedNodesCount+selectedEdgesCount===0?contextMenuConfig.getMenu(ContextMenuConfigContext.c.Canvas):1===selectedNodesCount?contextMenuConfig.getMenu(ContextMenuConfigContext.c.Node):1===selectedPortsCount?contextMenuConfig.getMenu(ContextMenuConfigContext.c.Port):contextMenuConfig.getMenu(ContextMenuConfigContext.c.Edge),setContent(menu)}),[state.data.present,contextMenuConfig]);var handleContextMenu=react.useCallback((function(evt){evt.stopPropagation(),evt.preventDefault()}),[]);return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:state.contextMenuPosition&&Object(jsx_runtime.jsx)("div",{ref:ref,onClick:onClick,onContextMenu:handleContextMenu,role:"button",style:style,children:content})})};try{GraphContextMenu_GraphContextMenu.displayName="GraphContextMenu",GraphContextMenu_GraphContextMenu.__docgenInfo={description:"",displayName:"GraphContextMenu",props:{state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"IGraphState<unknown, unknown, unknown>"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"(evt: MouseEvent<HTMLDivElement, MouseEvent>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/GraphContextMenu.tsx#GraphContextMenu"]={docgenInfo:GraphContextMenu_GraphContextMenu.__docgenInfo,name:"GraphContextMenu",path:"src/components/GraphContextMenu.tsx#GraphContextMenu"})}catch(__react_docgen_typescript_loader_error){}var defaultGroup=__webpack_require__(282),layout=__webpack_require__(69),Group_Group=function Group(props){var _graphConfig$getGroup,data=props.data,group=props.group,graphConfig=useGraphConfig(),_React$useMemo=react.useMemo((function(){return Object(layout.a)(group,data.nodes,graphConfig)}),[group,data.nodes,graphConfig]),x=_React$useMemo.x,y=_React$useMemo.y,width=_React$useMemo.width,height=_React$useMemo.height,groupConfig=null!==(_graphConfig$getGroup=graphConfig.getGroupConfigByName(group.shape))&&void 0!==_graphConfig$getGroup?_graphConfig$getGroup:defaultGroup.a,automationId="group-container-"+group.id;return Object(jsx_runtime.jsx)("g",{"data-automation-id":automationId,transform:"translate("+x+", "+y+")",children:groupConfig.render({group:group,height:height,width:width})},group.id)};Group_Group.displayName="Group";try{Group_Group.displayName="Group",Group_Group.__docgenInfo={description:"",displayName:"Group",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GraphModel<unknown, unknown, unknown>"}},group:{defaultValue:null,description:"",name:"group",required:!0,type:{name:"ICanvasGroup"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Group/Group.tsx#Group"]={docgenInfo:Group_Group.__docgenInfo,name:"Group",path:"src/components/Group/Group.tsx#Group"})}catch(__react_docgen_typescript_loader_error){}var GraphGroupsRenderer_GraphGroupsRenderer=function GraphGroupsRenderer(props){return Object(jsx_runtime.jsx)("g",{children:react.useMemo((function(){return props.groups.map((function(group){return Object(jsx_runtime.jsx)(Group_Group,{group:group,data:props.data},group.id)}))}),[props.groups,props.data])})};GraphGroupsRenderer_GraphGroupsRenderer.displayName="GraphGroupsRenderer";try{GraphGroupsRenderer_GraphGroupsRenderer.displayName="GraphGroupsRenderer",GraphGroupsRenderer_GraphGroupsRenderer.__docgenInfo={description:"",displayName:"GraphGroupsRenderer",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GraphModel<unknown, unknown, unknown>"}},groups:{defaultValue:null,description:"",name:"groups",required:!0,type:{name:"ICanvasGroup[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Group/GraphGroupsRenderer.tsx#GraphGroupsRenderer"]={docgenInfo:GraphGroupsRenderer_GraphGroupsRenderer.__docgenInfo,name:"GraphGroupsRenderer",path:"src/components/Group/GraphGroupsRenderer.tsx#GraphGroupsRenderer"})}catch(__react_docgen_typescript_loader_error){}var element_state=__webpack_require__(18),NodeTooltips_NodeTooltips=function NodeTooltips(props){var node=props.node,viewport=props.viewport,graphConfig=useGraphConfig();if(!node)return null;if(!Object(utils.hasState)(element_state.b.activated)(node.state))return null;var nodeConfig=Object(utils.getNodeConfig)(node,graphConfig);return null!=nodeConfig&&nodeConfig.renderTooltips?Object(jsx_runtime.jsx)("div",{className:"node-tooltips",children:nodeConfig.renderTooltips({model:node,viewport:viewport})}):null};NodeTooltips_NodeTooltips.displayName="NodeTooltips";try{NodeTooltips_NodeTooltips.displayName="NodeTooltips",NodeTooltips_NodeTooltips.__docgenInfo={description:"",displayName:"NodeTooltips",props:{node:{defaultValue:null,description:"",name:"node",required:!1,type:{name:"NodeModel<unknown, unknown>"}},viewport:{defaultValue:null,description:"",name:"viewport",required:!0,type:{name:"Required<IViewport>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/NodeTooltips.tsx#NodeTooltips"]={docgenInfo:NodeTooltips_NodeTooltips.__docgenInfo,name:"NodeTooltips",path:"src/components/NodeTooltips.tsx#NodeTooltips"})}catch(__react_docgen_typescript_loader_error){}var PortTooltips_PortTooltips=function PortTooltips(props){var graphConfig=useGraphConfig(),parentNode=props.parentNode,port=props.port,viewport=props.viewport;if(!Object(utils.hasState)(element_state.c.activated)(port.state))return null;var portShape=port.shape?port.shape:graphConfig.defaultPortShape,portConfig=graphConfig.getPortConfigByName(portShape);if(!portConfig||!portConfig.renderTooltips)return null;var pos=parentNode.getPortPosition(port.id,graphConfig);return pos?Object(jsx_runtime.jsx)("div",{className:"port-tooltips",children:Object(jsx_runtime.jsx)(ConnectingStateContext.Consumer,{children:function children(_ref){var sourceNode=_ref.sourceNode,sourcePort=_ref.sourcePort;return portConfig.renderTooltips&&portConfig.renderTooltips(Object.assign({model:port,parentNode:parentNode,data:props.data,anotherNode:sourceNode,anotherPort:sourcePort,viewport:viewport},pos))}})}):null};PortTooltips_PortTooltips.displayName="PortTooltips";try{PortTooltips_PortTooltips.displayName="PortTooltips",PortTooltips_PortTooltips.__docgenInfo={description:"",displayName:"PortTooltips",props:{port:{defaultValue:null,description:"",name:"port",required:!0,type:{name:"ICanvasPort<unknown>"}},parentNode:{defaultValue:null,description:"",name:"parentNode",required:!0,type:{name:"NodeModel<unknown, unknown>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GraphModel<unknown, unknown, unknown>"}},viewport:{defaultValue:null,description:"",name:"viewport",required:!0,type:{name:"Required<IViewport>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/PortTooltips.tsx#PortTooltips"]={docgenInfo:PortTooltips_PortTooltips.__docgenInfo,name:"PortTooltips",path:"src/components/PortTooltips.tsx#PortTooltips"})}catch(__react_docgen_typescript_loader_error){}var react_jss_esm=__webpack_require__(545),DragController=__webpack_require__(130);function useRefValue(value){var ref=Object(react.useRef)(value);return Object(react.useLayoutEffect)((function(){ref.current=value}),[value]),ref}var wrapperCommonStyle={position:"absolute",cursor:"initial"},useStyles=Object(react_jss_esm.a)({verticalScrollWrapper:Object.assign({},wrapperCommonStyle,{height:"100%",width:10,top:0,right:0}),horizontalScrollWrapper:Object.assign({},wrapperCommonStyle,{height:10,width:"100%",bottom:0,left:0}),verticalScrollStyle:function verticalScrollStyle(args){return{height:args.scrollbarLayout.verticalScrollHeight,width:"100%",backgroundColor:constants.f.scrollbarColor,position:"absolute",top:0,right:0,transform:"translateY("+args.scrollbarLayout.verticalScrollTop+"px)"}},horizontalScrollStyle:function horizontalScrollStyle(args){return{width:args.scrollbarLayout.horizontalScrollWidth-10,height:"100%",backgroundColor:constants.f.scrollbarColor,position:"absolute",left:0,bottom:0,transform:"translateX("+args.scrollbarLayout.horizontalScrollLeft+"px)"}}}),Scrollbar_Scrollbar=function Scrollbar(props){var _props$vertical=props.vertical,vertical=void 0===_props$vertical||_props$vertical,_props$horizontal=props.horizontal,horizontal=void 0===_props$horizontal||_props$horizontal,offsetLimit=props.offsetLimit,eventChannel=props.eventChannel,viewport=props.viewport,graphController=useGraphController(),scrollbarLayout=function getScrollbarLayout(viewport,offsetLimit){var rect=viewport.rect,transformMatrix=viewport.transformMatrix,totalContentHeight=function getTotalContentHeight(containerHeight,offsetLimit){var minY=offsetLimit.minY,maxY=offsetLimit.maxY;return containerHeight+maxY-minY}(rect.height,offsetLimit),totalContentWidth=function getTotalContentWidth(containerWidth,offsetLimit){var minX=offsetLimit.minX,maxX=offsetLimit.maxX;return containerWidth+maxX-minX}(rect.width,offsetLimit);return{totalContentHeight:totalContentHeight,totalContentWidth:totalContentWidth,verticalScrollHeight:rect.height*rect.height/totalContentHeight,horizontalScrollWidth:rect.width*rect.width/totalContentWidth,verticalScrollTop:(offsetLimit.maxY-transformMatrix[5])*rect.height/totalContentHeight,horizontalScrollLeft:(offsetLimit.maxX-transformMatrix[4])*rect.width/totalContentWidth}}(viewport,offsetLimit),classes=useStyles({scrollbarLayout:scrollbarLayout}),scrollbarLayoutRef=useRefValue(scrollbarLayout);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[vertical&&Object(jsx_runtime.jsx)("div",{className:classes.verticalScrollWrapper,children:Object(jsx_runtime.jsx)("div",{className:classes.verticalScrollStyle,onMouseDown:function onVerticalScrollMouseDown(e){e.preventDefault(),e.stopPropagation();var containerHeight=viewport.rect.height,dragging=new DragController.a(new MouseMoveEventProvider(graphController.getGlobalEventTarget()),DragController.b);dragging.onMove=function(_ref){var scrollbarDy=_ref.dy,rawEvent=_ref.e,dy=-scrollbarDy*scrollbarLayoutRef.current.totalContentHeight/containerHeight;eventChannel.trigger({type:models_event.g.Scroll,rawEvent:rawEvent,dx:0,dy:dy})},dragging.onEnd=function(){eventChannel.trigger({type:models_event.g.ScrollEnd})},dragging.start(e.nativeEvent),eventChannel.trigger({type:models_event.g.ScrollStart})},role:"button","aria-label":"vertical scrollbar","aria-roledescription":"vertical scrollbar",id:"canvas-vertical-scrollbar"})}),horizontal&&Object(jsx_runtime.jsx)("div",{className:classes.horizontalScrollWrapper,children:Object(jsx_runtime.jsx)("div",{className:classes.horizontalScrollStyle,onMouseDown:function onHorizontalScrollMouseDown(e){e.preventDefault(),e.stopPropagation();var containerWidth=viewport.rect.width,dragging=new DragController.a(new MouseMoveEventProvider(graphController.getGlobalEventTarget()),DragController.b);dragging.onMove=function(_ref2){var scrollbarDx=_ref2.dx,rawEvent=_ref2.e,dx=-scrollbarDx*scrollbarLayoutRef.current.totalContentWidth/containerWidth;eventChannel.trigger({type:models_event.g.Scroll,rawEvent:rawEvent,dx:dx,dy:0})},dragging.onEnd=function(){eventChannel.trigger({type:models_event.g.ScrollEnd})},dragging.start(e.nativeEvent),eventChannel.trigger({type:models_event.g.ScrollStart})},role:"button","aria-label":"horizontal scrollbar","aria-roledescription":"horizontal scrollbar",id:"canvas-horizontal-scrollbar"})})]})};try{Scrollbar_Scrollbar.displayName="Scrollbar",Scrollbar_Scrollbar.__docgenInfo={description:"",displayName:"Scrollbar",props:{viewport:{defaultValue:null,description:"",name:"viewport",required:!0,type:{name:"Required<IViewport>"}},horizontal:{defaultValue:null,description:"",name:"horizontal",required:!1,type:{name:"boolean"}},vertical:{defaultValue:null,description:"",name:"vertical",required:!1,type:{name:"boolean"}},offsetLimit:{defaultValue:null,description:"",name:"offsetLimit",required:!0,type:{name:"IOffsetLimit"}},eventChannel:{defaultValue:null,description:"",name:"eventChannel",required:!0,type:{name:"EventChannel"}},dispatch:{defaultValue:null,description:"",name:"dispatch",required:!0,type:{name:"IDispatch<unknown, unknown, unknown, never>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Scrollbar.tsx#Scrollbar"]={docgenInfo:Scrollbar_Scrollbar.__docgenInfo,name:"Scrollbar",path:"src/components/Scrollbar.tsx#Scrollbar"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(76);var Transform_Transform=function Transform(_ref){var matrix=_ref.matrix,children=_ref.children,transform=react.useMemo((function(){return"matrix("+matrix.join(" ")+")"}),matrix);return Object(jsx_runtime.jsx)("g",{transform:transform,children:children})};Transform_Transform.displayName="Transform";try{Transform_Transform.displayName="Transform",Transform_Transform.__docgenInfo={description:"",displayName:"Transform",props:{matrix:{defaultValue:null,description:"",name:"matrix",required:!0,type:{name:"ITransformMatrix"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Transform.tsx#Transform"]={docgenInfo:Transform_Transform.__docgenInfo,name:"Transform",path:"src/components/Transform.tsx#Transform"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(27),__webpack_require__(212);var champ=__webpack_require__(186);var GraphEdge=react.memo((function(props){var _edge$automationId,edge=props.edge,graphModel=props.data,eventChannel=props.eventChannel,source=props.source,target=props.target,graphId=props.graphId,graphConfig=useGraphConfig(),virtualization=useVirtualization(),viewport=virtualization.viewport,renderedArea=virtualization.renderedArea,visibleArea=virtualization.visibleArea,edgeEvent=function edgeEvent(type){return function(e){e.persist(),eventChannel.trigger({type:type,edge:edge,rawEvent:e})}},isSourceRendered=Object(utils.isPointInRect)(renderedArea,source),isTargetRendered=Object(utils.isPointInRect)(renderedArea,target),isVisible=isSourceRendered&&isTargetRendered;if(react.useLayoutEffect((function(){isVisible&&virtualization.renderedEdges.add(edge.id)}),[virtualization]),!isVisible)return null;var shape=edge.shape?edge.shape:graphConfig.defaultEdgeShape,edgeConfig=graphConfig.getEdgeConfigByName(shape);if(!edgeConfig)return debug.a.warn("invalid shape in edge "+JSON.stringify(edge)),null;if(!edgeConfig.render)return debug.a.warn('Missing "render" method in edge config '+JSON.stringify(edge)),null;var isSourceVisible=Object(utils.isPointInRect)(visibleArea,source),isTargetVisible=Object(utils.isPointInRect)(visibleArea,target),edgeNode=edgeConfig.render({model:edge,data:graphModel,x1:source.x,y1:source.y,x2:target.x,y2:target.y,viewport:viewport});if(Object(utils.hasState)(element_state.a.connectedToSelected)(edge.state)&&(!isSourceVisible||!isTargetVisible)){var linearFunction=Object(utils.getLinearFunction)(source.x,source.y,target.x,target.y),inverseLinearFunction=Object(utils.getLinearFunction)(source.y,source.x,target.y,target.x),hintPoint=function getHintPoints(source,target,_ref,yOnRightAxis,xOnBottomAxis,xOnTopAxis,yOnLeftAxis){var minX=_ref.minX,minY=_ref.minY,maxX=_ref.maxX,maxY=_ref.maxY;return source.x===target.x?{x:source.x,y:source.y<target.y?maxY:minY}:source.x<target.x?source.y<target.y?yOnRightAxis<=maxY?{x:maxX,y:yOnRightAxis}:{x:xOnBottomAxis,y:maxY}:yOnRightAxis>=minY?{x:maxX,y:yOnRightAxis}:{x:xOnTopAxis,y:minY}:source.y<target.y?xOnBottomAxis>minX?{x:xOnBottomAxis,y:maxY}:{x:minX,y:yOnLeftAxis}:yOnLeftAxis>minY?{x:minX,y:yOnLeftAxis}:{x:xOnTopAxis,y:minY}}(isSourceVisible?source:target,isSourceVisible?target:source,visibleArea,linearFunction(visibleArea.maxX),inverseLinearFunction(visibleArea.maxY),inverseLinearFunction(visibleArea.minY),linearFunction(visibleArea.minX));isSourceVisible&&edgeConfig.renderWithTargetHint?edgeNode=edgeConfig.renderWithTargetHint({model:edge,data:graphModel,x1:source.x,y1:source.y,x2:hintPoint.x,y2:hintPoint.y,viewport:viewport}):isTargetVisible&&edgeConfig.renderWithSourceHint&&(edgeNode=edgeConfig.renderWithSourceHint({model:edge,data:graphModel,x1:hintPoint.x,y1:hintPoint.y,x2:target.x,y2:target.y,viewport:viewport}))}var id=Object(utils.getEdgeUid)(graphId,edge),className="edge-container-"+edge.id,automationId=null!==(_edge$automationId=edge.automationId)&&void 0!==_edge$automationId?_edge$automationId:className;return Object(jsx_runtime.jsx)("g",{id:id,onClick:edgeEvent(models_event.c.Click),onDoubleClick:edgeEvent(models_event.c.DoubleClick),onMouseDown:edgeEvent(models_event.c.MouseDown),onMouseUp:edgeEvent(models_event.c.MouseUp),onMouseEnter:edgeEvent(models_event.c.MouseEnter),onMouseLeave:edgeEvent(models_event.c.MouseLeave),onContextMenu:edgeEvent(models_event.c.ContextMenu),onMouseMove:edgeEvent(models_event.c.MouseMove),onMouseOver:edgeEvent(models_event.c.MouseOver),onMouseOut:edgeEvent(models_event.c.MouseOut),onFocus:void 0,onBlur:void 0,className:className,"data-automation-id":automationId,children:edgeNode})}));try{GraphEdge.displayName="GraphEdge",GraphEdge.__docgenInfo={description:"",displayName:"GraphEdge",props:{edge:{defaultValue:null,description:"",name:"edge",required:!0,type:{name:"EdgeModel<unknown>"}},source:{defaultValue:null,description:"",name:"source",required:!0,type:{name:"IPoint"}},target:{defaultValue:null,description:"",name:"target",required:!0,type:{name:"IPoint"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GraphModel<unknown, unknown, unknown>"}},eventChannel:{defaultValue:null,description:"",name:"eventChannel",required:!0,type:{name:"EventChannel"}},graphId:{defaultValue:null,description:"",name:"graphId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/GraphEdge.tsx#GraphEdge"]={docgenInfo:GraphEdge.__docgenInfo,name:"GraphEdge",path:"src/components/GraphEdge.tsx#GraphEdge"})}catch(__react_docgen_typescript_loader_error){}var _excluded=["node","data"],_excluded2=["data","node"],_excluded3=["tree"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function compareEqual(prev,props){return prev.node===props.node}var EdgeChampNodeRender=react.memo((function(props){for(var node=props.node,data=props.data,others=_objectWithoutProperties(props,_excluded),graphConfig=useGraphConfig(),values=[],valueCount=node.valueCount,i=0;i<valueCount;i+=1){var _data$nodes$get,_data$nodes$get2,it=node.getValue(i),source=null===(_data$nodes$get=data.nodes.get(it.source))||void 0===_data$nodes$get?void 0:_data$nodes$get.getPortPosition(it.sourcePortId,graphConfig),target=null===(_data$nodes$get2=data.nodes.get(it.target))||void 0===_data$nodes$get2?void 0:_data$nodes$get2.getPortPosition(it.targetPortId,graphConfig);source&&target&&values.push(Object(react.createElement)(GraphEdge,Object.assign({},others,{key:it.id,data:data,edge:it,source:source,target:target})))}for(var children=[],nodeCount=node.nodeCount,_i=0;_i<nodeCount;_i+=1){var _it=node.getNode(_i);_it.type===champ.b.Bitmap?children.push(Object(jsx_runtime.jsx)(EdgeChampNodeRender,Object.assign({},props,{node:_it}),node.getHash(_i))):children.push(Object(jsx_runtime.jsx)(EdgeHashCollisionNodeRender,Object.assign({},props,{node:_it}),_it.getHash()))}return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[values,children]})}),compareEqual);EdgeChampNodeRender.displayName="EdgeChampNodeRender";var EdgeHashCollisionNodeRender=react.memo((function(props){var data=props.data,node=props.node,others=_objectWithoutProperties(props,_excluded2),graphConfig=useGraphConfig();return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:node.values.map((function(edge){var _data$nodes$get3,_data$nodes$get4,source=null===(_data$nodes$get3=data.nodes.get(edge.source))||void 0===_data$nodes$get3?void 0:_data$nodes$get3.getPortPosition(edge.sourcePortId,graphConfig),target=null===(_data$nodes$get4=data.nodes.get(edge.target))||void 0===_data$nodes$get4?void 0:_data$nodes$get4.getPortPosition(edge.targetPortId,graphConfig);return source&&target?Object(react.createElement)(GraphEdge,Object.assign({},others,{key:edge.id,data:data,edge:edge,source:source,target:target})):null}))})}),compareEqual);EdgeHashCollisionNodeRender.displayName="EdgeHashCollisionNodeRender";var EdgeTree_EdgeTree=function EdgeTree(props){var tree=props.tree,others=_objectWithoutProperties(props,_excluded3);return Object(jsx_runtime.jsx)(EdgeChampNodeRender,Object.assign({},others,{node:tree.root}))};EdgeTree_EdgeTree.displayName="EdgeTree";try{EdgeChampNodeRender.displayName="EdgeChampNodeRender",EdgeChampNodeRender.__docgenInfo={description:"",displayName:"EdgeChampNodeRender",props:{tree:{defaultValue:null,description:"",name:"tree",required:!0,type:{name:"HashMap<string, EdgeModel<unknown>>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GraphModel<unknown, unknown, unknown>"}},eventChannel:{defaultValue:null,description:"",name:"eventChannel",required:!0,type:{name:"EventChannel"}},graphId:{defaultValue:null,description:"",name:"graphId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/tree/EdgeTree.tsx#EdgeChampNodeRender"]={docgenInfo:EdgeChampNodeRender.__docgenInfo,name:"EdgeChampNodeRender",path:"src/components/tree/EdgeTree.tsx#EdgeChampNodeRender"})}catch(__react_docgen_typescript_loader_error){}var b_tree=__webpack_require__(71),Graph_styles_m=__webpack_require__(73),Graph_styles_m_default=__webpack_require__.n(Graph_styles_m),GraphNode_GraphNode=function GraphNode(props){var _node$automationId,node=props.node,eventChannel=props.eventChannel,getNodeAriaLabel=props.getNodeAriaLabel,viewport=props.viewport,graphId=props.graphId,graphConfig=useGraphConfig(),shape=node.shape?node.shape:graphConfig.defaultNodeShape,nodeConfig=Object(utils.getNodeConfig)(node,graphConfig),nodeEvent=function nodeEvent(type){return function(evt){evt.persist();var e={type:type,node:node,rawEvent:evt};eventChannel.trigger(e)}},id=Object(utils.getNodeUid)(graphId,node),automationId=null!==(_node$automationId=node.automationId)&&void 0!==_node$automationId?_node$automationId:Object(utils.getNodeAutomationId)(node);return null!=nodeConfig&&nodeConfig.render?Object(jsx_runtime.jsx)("g",{id:id,focusable:"true",tabIndex:0,className:Graph_styles_m_default.a.node,onPointerDown:nodeEvent(models_event.e.PointerDown),onPointerEnter:nodeEvent(models_event.e.PointerEnter),onPointerMove:nodeEvent(models_event.e.PointerMove),onPointerLeave:nodeEvent(models_event.e.PointerLeave),onPointerUp:nodeEvent(models_event.e.PointerUp),onDoubleClick:nodeEvent(models_event.e.DoubleClick),onMouseDown:nodeEvent(models_event.e.MouseDown),onMouseUp:nodeEvent(models_event.e.MouseUp),onMouseEnter:nodeEvent(models_event.e.MouseEnter),onMouseLeave:nodeEvent(models_event.e.MouseLeave),onContextMenu:nodeEvent(models_event.e.ContextMenu),onMouseMove:nodeEvent(models_event.e.MouseMove),onMouseOver:nodeEvent(models_event.e.MouseOver),onMouseOut:nodeEvent(models_event.e.MouseOut),onKeyDown:nodeEvent(models_event.e.KeyDown),onClick:function clickEvent(e){e.persist(),eventChannel.trigger({type:models_event.e.Click,rawEvent:e,isMultiSelect:Object(keyboard.a)(e),node:node})},"aria-label":getNodeAriaLabel(node),role:"group","aria-roledescription":"node","data-automation-id":automationId,children:Object(jsx_runtime.jsx)("g",{className:"node-box-container",children:nodeConfig.render({model:node,viewport:viewport})})}):(debug.a.warn('Missing "render" method in node config '+shape),null)};GraphNode_GraphNode.displayName="GraphNode";try{GraphNode_GraphNode.displayName="GraphNode",GraphNode_GraphNode.__docgenInfo={description:"",displayName:"GraphNode",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeModel<unknown, unknown>"}},isNodeEditDisabled:{defaultValue:null,description:"",name:"isNodeEditDisabled",required:!1,type:{name:"boolean"}},eventChannel:{defaultValue:null,description:"",name:"eventChannel",required:!0,type:{name:"EventChannel"}},viewport:{defaultValue:null,description:"",name:"viewport",required:!0,type:{name:"Required<IViewport>"}},getNodeAriaLabel:{defaultValue:null,description:"",name:"getNodeAriaLabel",required:!0,type:{name:"(node: ICanvasNode<unknown, unknown>) => string | undefined"}},graphId:{defaultValue:null,description:"",name:"graphId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/GraphNode.tsx#GraphNode"]={docgenInfo:GraphNode_GraphNode.__docgenInfo,name:"GraphNode",path:"src/components/GraphNode.tsx#GraphNode"})}catch(__react_docgen_typescript_loader_error){}var GraphNodeControlPoints_ResizePoint=function ResizePoint(_ref){var x=_ref.x,y=_ref.y,cursor=_ref.cursor,onMouseDown=_ref.onMouseDown;return Object(jsx_runtime.jsx)("rect",{x:x,y:y,height:8,width:8,stroke:constants.f.controlPointColor,fill:"transparent",cursor:cursor,onMouseDown:onMouseDown})};GraphNodeControlPoints_ResizePoint.displayName="ResizePoint";var GraphNodeControlPoints_GraphNodeControlPoints=function GraphNodeControlPoints(props){var _nodeConfig$getMinWid,_nodeConfig$getMinHei,node=props.node,eventChannel=props.eventChannel,graphConfig=useGraphConfig(),nodeConfig=Object(utils.getNodeConfig)(node,graphConfig),graphController=useGraphController(),minWidth=null!==(_nodeConfig$getMinWid=null==nodeConfig?void 0:nodeConfig.getMinWidth(node))&&void 0!==_nodeConfig$getMinWid?_nodeConfig$getMinWid:0,minHeight=null!==(_nodeConfig$getMinHei=null==nodeConfig?void 0:nodeConfig.getMinHeight(node))&&void 0!==_nodeConfig$getMinHei?_nodeConfig$getMinHei:0,height=Object(utils.getRectHeight)(nodeConfig,node),width=Object(utils.getRectWidth)(nodeConfig,node),getMouseDown=function getMouseDown(f){return function(evt){evt.preventDefault(),evt.stopPropagation(),eventChannel.trigger({type:models_event.e.ResizingStart,rawEvent:evt,node:node});var drag=new controllers.a(new MouseMoveEventProvider(graphController.getGlobalEventTarget()),controllers.e);drag.onMove=function(_ref2){var totalDX=_ref2.totalDX,totalDY=_ref2.totalDY,rawEvent=_ref2.e;eventChannel.trigger(Object.assign({type:models_event.e.Resizing,rawEvent:rawEvent,node:node,dx:0,dy:0,dWidth:0,dHeight:0},f(totalDX,totalDY)))},drag.onEnd=function(_ref3){var rawEvent=_ref3.e;eventChannel.trigger({type:models_event.e.ResizingEnd,rawEvent:rawEvent,node:node})},eventChannel.trigger({type:models_event.e.ResizingStart,rawEvent:evt,node:node}),drag.start(evt.nativeEvent)}},nw=getMouseDown((function(dx,dy){var finalDx=Math.min(dx,width-minWidth),finalDy=Math.min(dy,height-minHeight);return{dx:+finalDx,dy:+finalDy,dWidth:-finalDx,dHeight:-finalDy}})),n=getMouseDown((function(dx,dy){var finalDy=Math.min(dy,height-minHeight);return{dy:+finalDy,dHeight:-finalDy}})),ne=getMouseDown((function(dx,dy){var finalDx=Math.max(dx,minWidth-width),finalDy=Math.min(dy,height-minHeight);return{dy:+finalDy,dWidth:+finalDx,dHeight:-finalDy}})),e=getMouseDown((function(dx){return{dWidth:+Math.max(dx,minWidth-width)}})),se=getMouseDown((function(dx,dy){return{dWidth:+Math.max(dx,minWidth-width),dHeight:+Math.max(dy,minHeight-height)}})),s=getMouseDown((function(dx,dy){return{dHeight:+Math.max(dy,minHeight-height)}})),sw=getMouseDown((function(dx,dy){var finalDx=Math.min(dx,width-minWidth);return{dx:+finalDx,dWidth:-finalDx,dHeight:+Math.max(dy,minHeight-height)}})),w=getMouseDown((function(dx){var finalDx=Math.min(dx,width-minWidth);return{dx:finalDx,dWidth:-finalDx}}));return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(GraphNodeControlPoints_ResizePoint,{cursor:"nw-resize",x:node.x-15,y:node.y-15,onMouseDown:nw}),Object(jsx_runtime.jsx)(GraphNodeControlPoints_ResizePoint,{x:node.x+width/2,y:node.y-15,cursor:"n-resize",onMouseDown:n}),Object(jsx_runtime.jsx)(GraphNodeControlPoints_ResizePoint,{x:node.x+width+15,y:node.y-15,cursor:"ne-resize",onMouseDown:ne}),Object(jsx_runtime.jsx)(GraphNodeControlPoints_ResizePoint,{x:node.x+width+15,y:node.y+height/2,cursor:"e-resize",onMouseDown:e}),Object(jsx_runtime.jsx)(GraphNodeControlPoints_ResizePoint,{x:node.x+width+15,y:node.y+height+15,cursor:"se-resize",onMouseDown:se}),Object(jsx_runtime.jsx)(GraphNodeControlPoints_ResizePoint,{x:node.x+width/2,y:node.y+height+15,cursor:"s-resize",onMouseDown:s}),Object(jsx_runtime.jsx)(GraphNodeControlPoints_ResizePoint,{x:node.x-15,y:node.y+height+15,cursor:"sw-resize",onMouseDown:sw}),Object(jsx_runtime.jsx)(GraphNodeControlPoints_ResizePoint,{x:node.x-15,y:node.y+height/2,cursor:"w-resize",onMouseDown:w})]})};try{GraphNodeControlPoints_GraphNodeControlPoints.displayName="GraphNodeControlPoints",GraphNodeControlPoints_GraphNodeControlPoints.__docgenInfo={description:"",displayName:"GraphNodeControlPoints",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeModel<unknown, unknown>"}},eventChannel:{defaultValue:null,description:"",name:"eventChannel",required:!0,type:{name:"EventChannel"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/GraphNodeControlPoints.tsx#GraphNodeControlPoints"]={docgenInfo:GraphNodeControlPoints_GraphNodeControlPoints.__docgenInfo,name:"GraphNodeControlPoints",path:"src/components/GraphNodeControlPoints.tsx#GraphNodeControlPoints"})}catch(__react_docgen_typescript_loader_error){}var GraphOneNodePorts_GraphOneNodePorts=function GraphOneNodePorts(props){var data=props.data,node=props.node,getPortAriaLabel=props.getPortAriaLabel,eventChannel=props.eventChannel,viewport=props.viewport,graphId=props.graphId,graphConfig=useGraphConfig(),ports=node.ports;if(!ports)return null;var portEvent=function portEvent(type,port){return function(e){e.persist(),eventChannel.trigger({type:type,node:node,port:port,rawEvent:e})}};return Object(jsx_runtime.jsx)("g",{children:ports.map((function(p){var _p$automationId,portShape=p.shape?p.shape:graphConfig.defaultPortShape,portConfig=graphConfig.getPortConfigByName(portShape);if(!portConfig||!portConfig.render)return debug.a.warn("invalid port config "+node.id+":"+node.name+" - "+p.id+":"+p.name+", shape: "+p.shape),null;var pos=node.getPortPosition(p.id,graphConfig);if(!pos)return null;var portKey=Object(utils.getPortUid)(graphId,node,p),automationId=null!==(_p$automationId=p.automationId)&&void 0!==_p$automationId?_p$automationId:Object(utils.getPortAutomationId)(p,node);return Object(jsx_runtime.jsx)("g",{id:portKey,tabIndex:0,focusable:"true",onPointerDown:portEvent(models_event.f.PointerDown,p),onPointerUp:portEvent(models_event.f.PointerUp,p),onDoubleClick:portEvent(models_event.f.DoubleClick,p),onMouseDown:portEvent(models_event.f.MouseDown,p),onMouseUp:portEvent(models_event.f.MouseUp,p),onContextMenu:portEvent(models_event.f.ContextMenu,p),onPointerEnter:portEvent(models_event.f.PointerEnter,p),onPointerLeave:portEvent(models_event.f.PointerLeave,p),onMouseMove:portEvent(models_event.f.MouseMove,p),onMouseOver:portEvent(models_event.f.MouseOver,p),onMouseOut:portEvent(models_event.f.MouseOut,p),onFocus:portEvent(models_event.f.Focus,p),onBlur:portEvent(models_event.f.Blur,p),onKeyDown:portEvent(models_event.f.KeyDown,p),"aria-label":getPortAriaLabel(data,node,p),role:"group","aria-roledescription":"port","data-automation-id":automationId,children:Object(jsx_runtime.jsx)(ConnectingStateContext.Consumer,{children:function children(_ref){var sourceNode=_ref.sourceNode,sourcePort=_ref.sourcePort;return null==portConfig?void 0:portConfig.render(Object.assign({model:p,data:data,parentNode:node,anotherNode:sourceNode,anotherPort:sourcePort,viewport:viewport},pos))}})},portKey)}))})};GraphOneNodePorts_GraphOneNodePorts.displayName="GraphOneNodePorts";try{GraphOneNodePorts_GraphOneNodePorts.displayName="GraphOneNodePorts",GraphOneNodePorts_GraphOneNodePorts.__docgenInfo={description:"",displayName:"GraphOneNodePorts",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"NodeModel<unknown, unknown>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GraphModel<unknown, unknown, unknown>"}},getPortAriaLabel:{defaultValue:null,description:"",name:"getPortAriaLabel",required:!0,type:{name:"(data: GraphModel<unknown, unknown, unknown>, node: NodeModel<unknown, unknown>, port: ICanvasPort<unknown>) => string | undefined"}},viewport:{defaultValue:null,description:"",name:"viewport",required:!0,type:{name:"Required<IViewport>"}},eventChannel:{defaultValue:null,description:"",name:"eventChannel",required:!0,type:{name:"EventChannel"}},getNodeAriaLabel:{defaultValue:null,description:"",name:"getNodeAriaLabel",required:!0,type:{name:"(node: ICanvasNode<unknown, unknown>) => string | undefined"}},graphId:{defaultValue:null,description:"",name:"graphId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/GraphOneNodePorts.tsx#GraphOneNodePorts"]={docgenInfo:GraphOneNodePorts_GraphOneNodePorts.__docgenInfo,name:"GraphOneNodePorts",path:"src/components/GraphOneNodePorts.tsx#GraphOneNodePorts"})}catch(__react_docgen_typescript_loader_error){}var GraphNodeParts_excluded=["node","isNodeResizable"];function GraphNodeParts_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function GraphNodeParts_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var GraphNodeParts_GraphNodeParts=function GraphNodeParts(_ref){var node=_ref.node,isNodeResizable=_ref.isNodeResizable,commonProps=GraphNodeParts_objectWithoutProperties(_ref,GraphNodeParts_excluded),virtualization=useVirtualization(),renderedArea=virtualization.renderedArea,viewport=virtualization.viewport,isVisible=Object(utils.isPointInRect)(renderedArea,node);return react.useLayoutEffect((function(){isVisible&&virtualization.renderedEdges.add(node.id)}),[virtualization]),isVisible?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(GraphNode_GraphNode,Object.assign({},commonProps,{node:node,viewport:viewport})),Object(jsx_runtime.jsx)(GraphOneNodePorts_GraphOneNodePorts,Object.assign({},commonProps,{node:node,viewport:viewport})),isNodeResizable&&Object(utils.isNodeEditing)(node)&&Object(jsx_runtime.jsx)(GraphNodeControlPoints_GraphNodeControlPoints,{node:node,eventChannel:commonProps.eventChannel})]}):null},GraphNodePartsMemo=react.memo(GraphNodeParts_GraphNodeParts),NodeTree_excluded=["node"],NodeTree_excluded2=["tree"];function NodeTree_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function NodeTree_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var NodeTreeNode=react.memo((function(_ref){var node=_ref.node,others=NodeTree_objectWithoutProperties(_ref,NodeTree_excluded),values=node.values.map((function(arg){var it=arg[1];return Object(jsx_runtime.jsx)(GraphNodePartsMemo,Object.assign({node:it},others),it.id)})),children=node.type===b_tree.b.Internal?node.children.map((function(child,index){var key=index<node.selfSize?node.getKey(index):"last";return Object(jsx_runtime.jsx)(NodeTreeNode,Object.assign({node:child},others),key)})):void 0;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[values,children]})}),(function(prevProps,nextProps){return prevProps.node===nextProps.node}));NodeTreeNode.displayName="NodeTreeNode";var NodeTree_NodeTree=function NodeTree(_ref2){var tree=_ref2.tree,others=NodeTree_objectWithoutProperties(_ref2,NodeTree_excluded2);return Object(jsx_runtime.jsx)(NodeTreeNode,Object.assign({node:tree.sortedRoot},others))};NodeTree_NodeTree.displayName="NodeTree";try{NodeTreeNode.displayName="NodeTreeNode",NodeTreeNode.__docgenInfo={description:"",displayName:"NodeTreeNode",props:{tree:{defaultValue:null,description:"",name:"tree",required:!0,type:{name:"OrderedMap<string, NodeModel<unknown, unknown>>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GraphModel<unknown, unknown, unknown>"}},eventChannel:{defaultValue:null,description:"",name:"eventChannel",required:!0,type:{name:"EventChannel"}},isNodeEditDisabled:{defaultValue:null,description:"",name:"isNodeEditDisabled",required:!1,type:{name:"boolean"}},getNodeAriaLabel:{defaultValue:null,description:"",name:"getNodeAriaLabel",required:!0,type:{name:"(node: ICanvasNode<unknown, unknown>) => string | undefined"}},graphId:{defaultValue:null,description:"",name:"graphId",required:!0,type:{name:"string"}},getPortAriaLabel:{defaultValue:null,description:"",name:"getPortAriaLabel",required:!0,type:{name:"(data: GraphModel<unknown, unknown, unknown>, node: NodeModel<unknown, unknown>, port: ICanvasPort<unknown>) => string | undefined"}},isNodeResizable:{defaultValue:null,description:"",name:"isNodeResizable",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/tree/NodeTree.tsx#NodeTreeNode"]={docgenInfo:NodeTreeNode.__docgenInfo,name:"NodeTreeNode",path:"src/components/tree/NodeTree.tsx#NodeTreeNode"})}catch(__react_docgen_typescript_loader_error){}var VirtualizationProvider_VirtualizationProvider=function VirtualizationProvider(_ref){var viewport=_ref.viewport,isVirtualizationEnabled=_ref.isVirtualizationEnabled,virtualizationDelay=_ref.virtualizationDelay,eventChannel=_ref.eventChannel,children=_ref.children,renderedArea=Object(hooks.h)(viewport,isVirtualizationEnabled),visibleArea=react.useMemo((function(){return Object(utils.getVisibleArea)(viewport)}),[viewport]),contextValue=react.useMemo((function(){return{viewport:viewport,renderedArea:renderedArea,visibleArea:visibleArea,renderedEdges:new Set,renderedNodes:new Set,timestamp:performance.now()}}),[viewport,renderedArea,visibleArea]),context=Object(hooks.c)(contextValue,{timeout:virtualizationDelay}),previousContextRef=react.useRef(context);return react.useEffect((function(){var previousContext=previousContextRef.current;previousContextRef.current=context,eventChannel.trigger({type:models_event.a.VirtualizationRecalculated,performanceStartTime:context.timestamp,renderedNodes:previousContext.renderedNodes,renderedEdges:previousContext.renderedEdges,previousRenderedNodes:previousContext.renderedNodes,previousRenderedEdges:previousContext.renderedEdges})}),[context,eventChannel]),Object(jsx_runtime.jsx)(VirtualizationContext.Provider,{value:context,children:children})};VirtualizationProvider_VirtualizationProvider.displayName="VirtualizationProvider";try{VirtualizationProvider_VirtualizationProvider.displayName="VirtualizationProvider",VirtualizationProvider_VirtualizationProvider.__docgenInfo={description:"",displayName:"VirtualizationProvider",props:{viewport:{defaultValue:null,description:"",name:"viewport",required:!0,type:{name:"Required<IViewport>"}},isVirtualizationEnabled:{defaultValue:null,description:"",name:"isVirtualizationEnabled",required:!0,type:{name:"boolean"}},virtualizationDelay:{defaultValue:null,description:"",name:"virtualizationDelay",required:!0,type:{name:"number"}},eventChannel:{defaultValue:null,description:"",name:"eventChannel",required:!0,type:{name:"EventChannel"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/VirtualizationProvider.tsx#VirtualizationProvider"]={docgenInfo:VirtualizationProvider_VirtualizationProvider.__docgenInfo,name:"VirtualizationProvider",path:"src/components/VirtualizationProvider.tsx#VirtualizationProvider"})}catch(__react_docgen_typescript_loader_error){}var mergeStyleSets=__webpack_require__(942),Graph_styles_getCursorStyle=function getCursorStyle(_ref){var canvasMouseMode=_ref.canvasMouseMode,state=_ref.state,isPanDisabled=_ref.isPanDisabled,isMultiSelecting=_ref.isMultiSelecting;return state.behavior===models_state.b.connecting||["meta","control"].some((function(key){return state.activeKeys.has(key)}))?"initial":state.activeKeys.has("shift")?"crosshair":canvasMouseMode!==models_state.a.pan?state.activeKeys.has(" ")&&!isPanDisabled?"grab":isMultiSelecting?"crosshair":"inherit":isPanDisabled?"inherit":"grab"};function getNodeCursor(isNodeDraggable){return isNodeDraggable?"move":"initial"}var SelectBox=__webpack_require__(185);function Graph_slicedToArray(arr,i){return function Graph_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Graph_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function Graph_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Graph_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Graph_arrayLikeToArray(o,minLen)}(arr,i)||function Graph_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Graph_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Graph(props){var _data$groups,_props$getNodeAriaLab,_props$getPortAriaLab,_props$styles,_props$styles2,_props$styles3,_data$groups$,_React$useState2=Graph_slicedToArray(react.useState(!1),2),focusedWithoutMouse=_React$useState2[0],setFocusedWithoutMouse=_React$useState2[1],graphController=useGraphController(),_useGraphState=Object(hooks.e)(),state=_useGraphState.state,dispatch=_useGraphState.dispatch,data=state.data.present,viewport=state.viewport,eventChannel=graphController.eventChannel,graphId=Object(useConst.a)((function(){return"graph-"+Object(v4.a)()})),defaultSVGRef=react.useRef(null),_props$focusCanvasAcc=props.focusCanvasAccessKey,focusCanvasAccessKey=void 0===_props$focusCanvasAcc?"f":_props$focusCanvasAcc,_props$zoomSensitivit=props.zoomSensitivity,zoomSensitivity=void 0===_props$zoomSensitivit?.1:_props$zoomSensitivit,_props$scrollSensitiv=props.scrollSensitivity,scrollSensitivity=void 0===_props$scrollSensitiv?.5:_props$scrollSensitiv,_props$svgRef=props.svgRef,svgRef=void 0===_props$svgRef?defaultSVGRef:_props$svgRef,_props$virtualization=props.virtualizationDelay,virtualizationDelay=void 0===_props$virtualization?500:_props$virtualization,graphConfig=useGraphConfig(),featureControl=function useFeatureControl(features){return react.useMemo((function(){return{isNodesDraggable:features.has(Features.a.nodeDraggable),isNodeResizable:features.has(Features.a.nodeResizable),isAutoFitDisabled:!features.has(Features.a.autoFit),isPanDisabled:!features.has(Features.a.panCanvas),isMultiSelectDisabled:!features.has(Features.a.multipleSelect),isLassoSelectEnable:features.has(Features.a.lassoSelect),isNodeHoverViewEnabled:features.has(Features.a.nodeHoverView),isClickNodeToSelectDisabled:!features.has(Features.a.clickNodeToSelect),isConnectDisabled:!features.has(Features.a.addNewEdges),isPortHoverViewEnable:features.has(Features.a.portHoverView),isNodeEditDisabled:!features.has(Features.a.editNode),isVerticalScrollDisabled:!features.has(Features.a.canvasVerticalScrollable),isHorizontalScrollDisabled:!features.has(Features.a.canvasHorizontalScrollable),isA11yEnable:features.has(Features.a.a11yFeatures),isAutoAlignEnable:features.has(Features.a.autoAlign),isCtrlKeyZoomEnable:features.has(Features.a.ctrlKeyZoom),isLimitBoundary:features.has(Features.a.limitBoundary),isVirtualizationEnabled:!features.has(Features.a.autoFit),isEdgeEditable:features.has(Features.a.editEdge),isDeleteDisabled:!features.has(Features.a.delete),isPasteDisabled:!features.has(Features.a.addNewNodes)||!features.has(Features.a.addNewEdges),isUndoEnabled:features.has(Features.a.undoStack)}}),[features])}(state.settings.features),_React$useState4=Graph_slicedToArray(react.useState(),2),curHoverNode=_React$useState4[0],setCurHoverNode=_React$useState4[1],_React$useState6=Graph_slicedToArray(react.useState(void 0),2),curHoverPort=_React$useState6[0],setCurHoverPort=_React$useState6[1],containerRef=react.useRef(null),rectRef=react.useRef(void 0),updateViewport=Object(hooks.k)(rectRef,svgRef,eventChannel);useEventChannel({props:props,dispatch:dispatch,rectRef:rectRef,svgRef:svgRef,setFocusedWithoutMouse:setFocusedWithoutMouse,containerRef:containerRef,featureControl:featureControl,graphConfig:graphConfig,setCurHoverNode:setCurHoverNode,setCurHoverPort:setCurHoverPort,updateViewport:updateViewport,eventChannel:eventChannel,graphController:graphController}),Object(hooks.a)(svgRef,containerRef,updateViewport);var isNodesDraggable=featureControl.isNodesDraggable,isNodeResizable=featureControl.isNodeResizable,isPanDisabled=featureControl.isPanDisabled,isMultiSelectDisabled=featureControl.isMultiSelectDisabled,isLassoSelectEnable=featureControl.isLassoSelectEnable,isNodeEditDisabled=featureControl.isNodeEditDisabled,isVerticalScrollDisabled=featureControl.isVerticalScrollDisabled,isHorizontalScrollDisabled=featureControl.isHorizontalScrollDisabled,isA11yEnable=featureControl.isA11yEnable,isCtrlKeyZoomEnable=featureControl.isCtrlKeyZoomEnable,isLimitBoundary=featureControl.isLimitBoundary,isVirtualizationEnabled=featureControl.isVirtualizationEnabled;Object(hooks.j)(dispatch,state.selectBoxPosition);var canvasEventHandler=function canvasEventHandler(type){return function(rawEvent){rawEvent.persist(),eventChannel.trigger({type:type,rawEvent:rawEvent})}},classes=function getGraphStyles(props,state,isPanDisabled,isNodeDraggable,focusedWithoutMouse,isMultiSelecting){var _props$styles,_ref2,_props$styles2,_ref3;return Object(mergeStyleSets.a)({svg:["react-dag-editor-svg-container",Graph_styles_m_default.a.svg,null===(_props$styles=props.styles)||void 0===_props$styles?void 0:_props$styles.svg,(_ref2={"& *:focus":{outline:constants.f.outlineStyle}},_ref2["& ."+Graph_styles_m_default.a.node]={cursor:getNodeCursor(isNodeDraggable)},_ref2)],container:["react-dag-editor-container",Graph_styles_m_default.a.container,(_ref3={cursor:Graph_styles_getCursorStyle({canvasMouseMode:props.canvasMouseMode,state:state,isPanDisabled:isPanDisabled,isMultiSelecting:isMultiSelecting})},_ref3["&."+Graph_styles_m_default.a.container]=Object.assign({background:constants.f.canvasBackground},props.style,null===(_props$styles2=props.styles)||void 0===_props$styles2?void 0:_props$styles2.root),_ref3),focusedWithoutMouse&&{outline:constants.f.focusOutlineColor+" solid 1px"}],buttonA11y:["react-dag-editor-a11y-help-button",Graph_styles_m_default.a.buttonA11Y],node:[Graph_styles_m_default.a.node]})}(props,state,isPanDisabled,isNodesDraggable,focusedWithoutMouse,state.behavior===models_state.b.multiSelect);Object(hooks.l)({containerRef:containerRef,svgRef:svgRef,rectRef:rectRef,zoomSensitivity:zoomSensitivity,scrollSensitivity:scrollSensitivity,dispatch:dispatch,isHorizontalScrollDisabled:isHorizontalScrollDisabled,isVerticalScrollDisabled:isVerticalScrollDisabled,isCtrlKeyZoomEnable:isCtrlKeyZoomEnable,eventChannel:eventChannel,graphConfig:graphConfig});var onContextMenuClick=react.useCallback((function(evt){evt.preventDefault(),evt.stopPropagation(),eventChannel.trigger({type:models_event.b.Close}),svgRef.current&&svgRef.current.focus({preventScroll:!0})}),[eventChannel,svgRef]),onFocusButtonClick=react.useCallback((function(){setFocusedWithoutMouse(!0),svgRef.current&&svgRef.current.focus({preventScroll:!0})}),[svgRef]);Object(hooks.i)({rectRef:rectRef,svgRef:svgRef,eventChannel:eventChannel});var accessKey=isA11yEnable?focusCanvasAccessKey:void 0,touchHandlers=Object(hooks.f)(rectRef,eventChannel);if(!Object(utils.isSupported)()){var _props$onBrowserNotSu=props.onBrowserNotSupported,onBrowserNotSupported=void 0===_props$onBrowserNotSu?function(){return Object(jsx_runtime.jsx)("p",{children:"Your browser is not supported"})}:_props$onBrowserNotSu;return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:onBrowserNotSupported()})}return Object(jsx_runtime.jsxs)("div",Object.assign({ref:containerRef,role:"application",id:graphId,className:classes.container},touchHandlers,{onDoubleClick:canvasEventHandler(models_event.a.DoubleClick),onMouseDown:canvasEventHandler(models_event.a.MouseDown),onMouseUp:canvasEventHandler(models_event.a.MouseUp),onContextMenu:canvasEventHandler(models_event.a.ContextMenu),onMouseMove:canvasEventHandler(models_event.a.MouseMove),onMouseOver:canvasEventHandler(models_event.a.MouseOver),onMouseOut:canvasEventHandler(models_event.a.MouseOut),onFocus:canvasEventHandler(models_event.a.Focus),onBlur:canvasEventHandler(models_event.a.Blur),onKeyDown:canvasEventHandler(models_event.a.KeyDown),onKeyUp:canvasEventHandler(models_event.a.KeyUp),children:[Object(jsx_runtime.jsx)("button",{className:classes.buttonA11y,onClick:onFocusButtonClick,accessKey:accessKey,hidden:!0}),Object(jsx_runtime.jsxs)("svg",{tabIndex:0,focusable:"true",preserveAspectRatio:"xMidYMid meet",ref:svgRef,className:classes.svg,"data-graph-id":graphId,children:[Object(jsx_runtime.jsx)("title",{children:props.title}),Object(jsx_runtime.jsx)("desc",{children:props.desc}),Object(jsx_runtime.jsxs)(Transform_Transform,{matrix:viewport.transformMatrix,children:[state.viewport.rect&&Object(jsx_runtime.jsxs)(VirtualizationProvider_VirtualizationProvider,{viewport:state.viewport,isVirtualizationEnabled:isVirtualizationEnabled,virtualizationDelay:virtualizationDelay,eventChannel:eventChannel,children:[Object(jsx_runtime.jsx)(GraphGroupsRenderer_GraphGroupsRenderer,{data:data,groups:null!==(_data$groups=data.groups)&&void 0!==_data$groups?_data$groups:Object(empty.a)()}),Object(jsx_runtime.jsx)(EdgeTree_EdgeTree,{graphId:graphId,tree:data.edges,data:data,eventChannel:eventChannel}),Object(jsx_runtime.jsx)(NodeTree_NodeTree,{graphId:graphId,isNodeResizable:isNodeResizable,tree:data.nodes,data:data,isNodeEditDisabled:isNodeEditDisabled,eventChannel:eventChannel,getNodeAriaLabel:null!==(_props$getNodeAriaLab=props.getNodeAriaLabel)&&void 0!==_props$getNodeAriaLab?_props$getNodeAriaLab:a11yUtils.a,getPortAriaLabel:null!==(_props$getPortAriaLab=props.getPortAriaLabel)&&void 0!==_props$getPortAriaLab?_props$getPortAriaLab:a11yUtils.b})]}),state.dummyNodes.isVisible&&Object(jsx_runtime.jsx)(AnimatingNodeGroup_AnimatingNodeGroup,{dummyNodes:state.dummyNodes,graphData:state.data.present}),Object(jsx_runtime.jsx)(AlignmentLines,{style:null===(_props$styles=props.styles)||void 0===_props$styles?void 0:_props$styles.alignmentLine})]}),(!isMultiSelectDisabled||isLassoSelectEnable)&&Object(jsx_runtime.jsx)(SelectBox.a,{selectBoxPosition:state.selectBoxPosition,style:null===(_props$styles2=props.styles)||void 0===_props$styles2?void 0:_props$styles2.selectBox}),state.connectState&&Object(jsx_runtime.jsx)(Connecting,{graphConfig:graphConfig,eventChannel:eventChannel,viewport:state.viewport,styles:null===(_props$styles3=props.styles)||void 0===_props$styles3?void 0:_props$styles3.connectingLine,movingPoint:state.connectState.movingPoint})]}),(!isVerticalScrollDisabled||!isHorizontalScrollDisabled||!isPanDisabled)&&isLimitBoundary&&Object(utils.isViewportComplete)(state.viewport)&&Object(jsx_runtime.jsx)(Scrollbar_Scrollbar,{viewport:state.viewport,offsetLimit:Object(getOffsetLimit.a)({data:data,graphConfig:graphConfig,rect:state.viewport.rect,transformMatrix:viewport.transformMatrix,canvasBoundaryPadding:state.settings.canvasBoundaryPadding,groupPadding:null===(_data$groups$=data.groups[0])||void 0===_data$groups$?void 0:_data$groups$.padding}),dispatch:dispatch,horizontal:!isHorizontalScrollDisabled,vertical:!isVerticalScrollDisabled,eventChannel:eventChannel}),Object(jsx_runtime.jsx)(GraphContextMenu_GraphContextMenu,{state:state,onClick:onContextMenuClick,"data-automation-id":"context-menu-container"}),function renderNodeTooltip(){var _state$data$present$n;return curHoverNode&&Object(utils.isViewportComplete)(state.viewport)?state.contextMenuPosition&&curHoverNode===(null===(_state$data$present$n=state.data.present.nodes.find(utils.isSelected))||void 0===_state$data$present$n?void 0:_state$data$present$n.id)?null:Object(jsx_runtime.jsx)(NodeTooltips_NodeTooltips,{node:data.nodes.get(curHoverNode),viewport:state.viewport}):null}(),function renderPortTooltip(){if(!curHoverPort||!Object(utils.isViewportComplete)(state.viewport))return null;var _curHoverPort=Graph_slicedToArray(curHoverPort,2),nodeId=_curHoverPort[0],portId=_curHoverPort[1],node=data.nodes.get(nodeId);if(!node)return null;var port=node.getPort(portId);return port?Object(jsx_runtime.jsx)(PortTooltips_PortTooltips,{port:port,parentNode:node,data:data,viewport:state.viewport}):null}()]}))}Graph.displayName="Graph";try{Graph.displayName="Graph",Graph.__docgenInfo={description:"",displayName:"Graph",props:{title:{defaultValue:null,description:"Title of the svg",name:"title",required:!1,type:{name:"string"}},desc:{defaultValue:null,description:"Desc of the svg",name:"desc",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Custom styling for the graph container",name:"style",required:!1,type:{name:"CSSProperties"}},classes:{defaultValue:null,description:"",name:"classes",required:!1,type:{name:"IGraphClasses"}},styles:{defaultValue:null,description:"Custom styling for the elements in graph",name:"styles",required:!1,type:{name:"IGraphStyles"}},canvasMouseMode:{defaultValue:null,description:"The mouse mode: select or pan",name:"canvasMouseMode",required:!1,type:{name:"enum",value:[{value:'"pan"'},{value:'"select"'}]}},svgRef:{defaultValue:null,description:"The ref of the svg element",name:"svgRef",required:!1,type:{name:"RefObject<SVGSVGElement>"}},focusCanvasAccessKey:{defaultValue:{value:'"f"'},description:"The access key to focus the canvas\n@",name:"focusCanvasAccessKey",required:!1,type:{name:"string"}},zoomSensitivity:{defaultValue:{value:"0.1"},description:"Zoom sensitivity",name:"zoomSensitivity",required:!1,type:{name:"number"}},scrollSensitivity:{defaultValue:{value:"0.5"},description:"Scroll/wheel sensitivity",name:"scrollSensitivity",required:!1,type:{name:"number"}},dragThreshold:{defaultValue:{value:"10"},description:"The threshold of drag/click",name:"dragThreshold",required:!1,type:{name:"number"}},autoAlignThreshold:{defaultValue:{value:"50"},description:"The threshold of numbers of visible nodes to disable auto align",name:"autoAlignThreshold",required:!1,type:{name:"number"}},getPositionFromEvent:{defaultValue:{value:'"(e: MouseEvent) => ({ x: e.clientX, y: e.clientY })"'},description:"Custom overrides to get the client position",name:"getPositionFromEvent",required:!1,type:{name:"TGetPositionFromEvent"}},virtualizationDelay:{defaultValue:{value:"500"},description:"Delay time of virtualization calculation in ms",name:"virtualizationDelay",required:!1,type:{name:"number"}},onBrowserNotSupported:{defaultValue:null,description:"Render function when browser not supported.",name:"onBrowserNotSupported",required:!1,type:{name:"(() => ReactChild)"}},edgeWillAdd:{defaultValue:null,description:"Triggered before add an edge",name:"edgeWillAdd",required:!1,type:{name:"((edge: ICanvasEdge<EdgeData>, data: GraphModel<NodeData, EdgeData, PortData>) => ICanvasEdge<unknown>)"}},getNodeAriaLabel:{defaultValue:null,description:"Custom overrides the nodes aria-label",name:"getNodeAriaLabel",required:!1,type:{name:"((node: ICanvasNode<NodeData, PortData>) => string)"}},getPortAriaLabel:{defaultValue:null,description:"Custom overrides the ports aria-label",name:"getPortAriaLabel",required:!1,type:{name:"((data: GraphModel<NodeData, EdgeData, PortData>, node: NodeModel<NodeData, PortData>, port: ICanvasPort<...>) => string)"}},onEvent:{defaultValue:null,description:"The events handler function\n@param event",name:"onEvent",required:!1,type:{name:"((event: IEvent<NodeData, EdgeData, PortData>) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Graph/Graph.tsx#Graph"]={docgenInfo:Graph.__docgenInfo,name:"Graph",path:"src/components/Graph/Graph.tsx#Graph"})}catch(__react_docgen_typescript_loader_error){}var mergeStyles=__webpack_require__(940),react_dom=__webpack_require__(85),identical=__webpack_require__(70),NodeModel=__webpack_require__(117),autoAlign=__webpack_require__(149);function useSvgRect_slicedToArray(arr,i){return function useSvgRect_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useSvgRect_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function useSvgRect_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useSvgRect_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useSvgRect_arrayLikeToArray(o,minLen)}(arr,i)||function useSvgRect_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useSvgRect_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var AddingNodeSvg_AddingNodeSvg=function AddingNodeSvg(_ref){var model=_ref.model,svgRef=_ref.svgRef,nextNodeRef=_ref.nextNodeRef,rect=function useSvgRect(svgRef){var _useState2=useSvgRect_slicedToArray(Object(react.useState)(void 0),2),rect=_useState2[0],setRect=_useState2[1];return Object(react.useLayoutEffect)((function(){svgRef.current&&setRect(svgRef.current.getBoundingClientRect())}),[svgRef]),rect}(svgRef),graphConfig=useGraphConfig(),graphController=useGraphController(),alignmentLines=useAlignmentLines(),viewport=useViewport(),dummyNode=react.useMemo((function(){if(!model||!viewport.rect)return null;var transformMatrix=viewport.transformMatrix,_viewport$rect=viewport.rect,left=_viewport$rect.left,top=_viewport$rect.top,diffLeft=left/transformMatrix[0],diffTop=top/transformMatrix[3];return Object.assign({id:model.id,x:model.x-diffLeft,y:model.y-diffTop},Object(utils.getNodeSize)(model,graphConfig))}),[graphConfig,viewport,model]);react.useLayoutEffect((function(){dummyNode&&graphController.eventChannel.trigger({type:models_event.a.DraggingNodeFromItemPanel,node:dummyNode})}),[null==dummyNode?void 0:dummyNode.x,null==dummyNode?void 0:dummyNode.y]);var attachedNode=react.useMemo((function(){if(!dummyNode||!model)return null;var dxAligned=Object(autoAlign.b)(alignmentLines,[dummyNode],graphConfig,"x"),dyAligned=Object(autoAlign.b)(alignmentLines,[dummyNode],graphConfig,"y");return Object.assign({},model,{x:model.x+dxAligned,y:model.y+dyAligned})}),[alignmentLines,dummyNode,graphConfig,model]);react.useEffect((function(){nextNodeRef.current=attachedNode}),[nextNodeRef,attachedNode]);var eventChannel=Object(useConst.a)((function(){return new eventChannel_EventChannel})),tempGraphId=Object(useConst.a)(v4.a),node=react.useMemo((function(){return NodeModel.a.fromJSON(null!=attachedNode?attachedNode:model,void 0,void 0)}),[attachedNode,model]);return Object(jsx_runtime.jsx)("svg",{id:tempGraphId,ref:svgRef,className:Graph_styles_m_default.a.addingNodeSvg,preserveAspectRatio:"xMidYMid meet",children:Object(jsx_runtime.jsx)(Transform_Transform,{matrix:viewport.transformMatrix,children:rect&&Object(jsx_runtime.jsx)(GraphNode_GraphNode,{graphId:tempGraphId,node:node,viewport:{rect:rect,transformMatrix:viewport.transformMatrix},eventChannel:eventChannel,getNodeAriaLabel:a11yUtils.a})})})};AddingNodeSvg_AddingNodeSvg.displayName="AddingNodeSvg";try{AddingNodeSvg_AddingNodeSvg.displayName="AddingNodeSvg",AddingNodeSvg_AddingNodeSvg.__docgenInfo={description:"",displayName:"AddingNodeSvg",props:{model:{defaultValue:null,description:"",name:"model",required:!0,type:{name:"ICanvasNode<unknown, unknown>"}},nextNodeRef:{defaultValue:null,description:"",name:"nextNodeRef",required:!0,type:{name:"MutableRefObject<ICanvasNode<unknown, unknown> | null>"}},svgRef:{defaultValue:null,description:"",name:"svgRef",required:!0,type:{name:"RefObject<SVGSVGElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ItemPanel/AddingNodeSvg.tsx#AddingNodeSvg"]={docgenInfo:AddingNodeSvg_AddingNodeSvg.__docgenInfo,name:"AddingNodeSvg",path:"src/components/ItemPanel/AddingNodeSvg.tsx#AddingNodeSvg"})}catch(__react_docgen_typescript_loader_error){}function Item_slicedToArray(arr,i){return function Item_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Item_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function Item_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Item_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Item_arrayLikeToArray(o,minLen)}(arr,i)||function Item_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Item_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var el=document.createElement("div");document.body.appendChild(el);var Item_adjustPosition=function adjustPosition(clientX,clientY,rect,transformMatrix,node,nodeConfig){var rectWidth=Object(utils.getRectWidth)(nodeConfig,node),rectHeight=Object(utils.getRectHeight)(nodeConfig,node);return function adjustedClientPoint(x,y,rect,transformMatrix){var adjustedX=x,adjustedY=y;return rect&&(adjustedX=x-rect.left,adjustedY=y-rect.top),Object(utils.reverseTransformPoint)(adjustedX,adjustedY,transformMatrix)}(clientX-(transformMatrix[0]*rectWidth+transformMatrix[2]*rectHeight)/2,clientY-(transformMatrix[1]*rectWidth+transformMatrix[3]*rectHeight)/2,rect,transformMatrix)},Item_Item=function Item(props){var graphConfig=useGraphConfig(),graphController=useGraphController(),_React$useState2=Item_slicedToArray(react.useState(null),2),workingModel=_React$useState2[0],setWorkingModel=_React$useState2[1],nextNodeRef=useRefValue(workingModel),svgRef=react.useRef(null),style=props.style,children=props.children,model=props.model,_props$nodeWillAdd=props.nodeWillAdd,nodeWillAdd=void 0===_props$nodeWillAdd?identical.a:_props$nodeWillAdd,_props$nodeDidAdd=props.nodeDidAdd,nodeDidAdd=void 0===_props$nodeDidAdd?noop.a:_props$nodeDidAdd,_props$dragWillStart=props.dragWillStart,dragWillStart=void 0===_props$dragWillStart?noop.a:_props$dragWillStart,onPointerDown=react.useCallback((function(evt){if(evt.stopPropagation(),("mouse"!==evt.pointerType||evt.button===constants.c.Primary)&&graphController.getEnabledFeatures().has(Features.a.addNewNodes)){var shape=props.shape||model.shape,nodeConfig=graphConfig.getNodeConfigByName(shape),node=Object.assign({},Object(utils.deepClone)(model),Item_adjustPosition(evt.clientX,evt.clientY,void 0,graphController.state.viewport.transformMatrix,model,nodeConfig),{id:model.id||Object(v4.a)()}),drag=new controllers.a(new PointerEventProvider_PointerEventProvider(graphController.getGlobalEventTarget()),controllers.e),eventChannel=graphController.eventChannel;eventChannel.trigger({type:models_event.a.DraggingNodeFromItemPanelStart,rawEvent:evt}),drag.onMove=function(_ref){var e=_ref.e;setWorkingModel((function(n){return n?Object.assign({},n,Item_adjustPosition(e.clientX,e.clientY,void 0,graphController.state.viewport.transformMatrix,model,nodeConfig)):n}))},drag.onEnd=function(_ref2){var e=_ref2.e,viewport=graphController.state.viewport,nextNode=nextNodeRef.current;if(!Object(utils.isViewportComplete)(viewport)||!nextNode||!function isWithInBound(rect,clientX,clientY){var top=rect.top,right=rect.right,bottom=rect.bottom;return clientX>=rect.left&&clientX<=right&&clientY>=top&&clientY<=bottom}(viewport.rect,e.clientX,e.clientY))return setWorkingModel(null),void eventChannel.trigger({type:models_event.a.DraggingNodeFromItemPanelEnd,node:null});nextNodeRef.current=null,nextNode=Object.assign({},nextNode,Item_adjustPosition(e.clientX,e.clientY,viewport.rect,viewport.transformMatrix,model,nodeConfig)),nextNode=nodeWillAdd(nextNode),eventChannel.trigger({type:models_event.a.DraggingNodeFromItemPanelEnd,node:nextNode}),nodeDidAdd(nextNode),setWorkingModel(null)},dragWillStart(node),setWorkingModel(node),drag.start(evt.nativeEvent)}}),[graphController,props.shape,model,graphConfig,dragWillStart,nextNodeRef,nodeWillAdd,nodeDidAdd]),className=Object(mergeStyles.a)(Graph_styles_m_default.a.moduleItem,props.className);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("div",{className:className,style:style,onPointerDown:onPointerDown,role:"button",children:children}),workingModel&&react_dom.createPortal(Object(jsx_runtime.jsx)(AddingNodeSvg_AddingNodeSvg,{svgRef:svgRef,model:workingModel,nextNodeRef:nextNodeRef}),el)]})};try{Item_Item.displayName="Item",Item_Item.__docgenInfo={description:"The Item in the item panel from which we can add node to the canvas.",displayName:"Item",props:{style:{defaultValue:null,description:"Custom styling for the Item",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"ClassName for the Item",name:"className",required:!1,type:{name:"string"}},model:{defaultValue:null,description:"The node model of type ICanvasNode",name:"model",required:!0,type:{name:"Partial<ICanvasNode<unknown, unknown>>"}},shape:{defaultValue:null,description:"The shape of the node model",name:"shape",required:!1,type:{name:"string"}},dragWillStart:{defaultValue:null,description:"Triggered just before drag the model node from the item panel",name:"dragWillStart",required:!1,type:{name:"((node: ICanvasNode<unknown, unknown>) => void)"}},nodeWillAdd:{defaultValue:null,description:"Triggered just before the node will be added on the canvas",name:"nodeWillAdd",required:!1,type:{name:"((node: ICanvasNode<unknown, unknown>) => ICanvasNode<unknown, unknown>)"}},nodeDidAdd:{defaultValue:null,description:"Triggered just after the node added on the canvas",name:"nodeDidAdd",required:!1,type:{name:"((node: ICanvasNode<unknown, unknown>) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ItemPanel/Item.tsx#Item"]={docgenInfo:Item_Item.__docgenInfo,name:"Item",path:"src/components/ItemPanel/Item.tsx#Item"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(30);function TouchDragAdapter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var TouchDragAdapter=function(){function TouchDragAdapter(){!function TouchDragAdapter_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TouchDragAdapter),this.startListeners=new Set,this.moveListeners=new Set,this.endListeners=new Set}return function TouchDragAdapter_createClass(Constructor,protoProps,staticProps){return protoProps&&TouchDragAdapter_defineProperties(Constructor.prototype,protoProps),staticProps&&TouchDragAdapter_defineProperties(Constructor,staticProps),Constructor}(TouchDragAdapter,[{key:"off",value:function off(type,callback){switch(type){case"start":this.startListeners.delete(callback);break;case"move":this.moveListeners.delete(callback);break;case"end":this.endListeners.delete(callback)}return this}},{key:"on",value:function on(type,callback){switch(type){case"start":this.startListeners.add(callback);break;case"move":this.moveListeners.add(callback);break;case"end":this.endListeners.add(callback)}return this}},{key:"onStart",value:function onStart(events,e){for(var _len=arguments.length,args=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)args[_key-2]=arguments[_key];this.startListeners.forEach((function(cb){cb.call.apply(cb,[void 0,e].concat(args))}))}},{key:"onMove",value:function onMove(events,e){for(var _len2=arguments.length,args=new Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++)args[_key2-2]=arguments[_key2];this.moveListeners.forEach((function(cb){cb.call.apply(cb,[void 0,e].concat(args))}))}},{key:"onEnd",value:function onEnd(e){for(var _len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];this.endListeners.forEach((function(cb){cb.call.apply(cb,[void 0,e].concat(args))}))}}]),TouchDragAdapter}(),clamp=__webpack_require__(162),StaticNode_StaticNode=function StaticNode(props){var node=props.node,graphConfig=useGraphConfig(),nodeConfig=Object(utils.getNodeConfig)(node,graphConfig);if(null!=nodeConfig&&nodeConfig.renderStatic)return Object(jsx_runtime.jsx)("g",{children:nodeConfig.renderStatic({model:node})});var rectHeight=Object(utils.getRectHeight)(nodeConfig,node),rectWidth=Object(utils.getRectWidth)(nodeConfig,node);return Object(jsx_runtime.jsx)("rect",{transform:"translate("+node.x+", "+node.y+")",height:rectHeight,width:rectWidth,fill:constants.f.dummyNodeStroke})};StaticNode_StaticNode.displayName="StaticNode";var StaticNodeWithMemo=react.memo(StaticNode_StaticNode,(function(prevProps,nextProps){var prevNode=prevProps.node,nextNode=nextProps.node;return prevNode.x===nextNode.x&&prevNode.y===nextNode.y&&prevNode.height===nextNode.height&&prevNode.width===nextNode.width&&prevNode.isInSearchResults===nextNode.isInSearchResults&&prevNode.isCurrentSearchResult===nextNode.isCurrentSearchResult})),ReadonlyNodeTreeNode=react.memo((function(_ref){var node=_ref.node,values=node.values.map((function(it){return Object(jsx_runtime.jsx)(StaticNodeWithMemo,{node:it[1]},it[1].id)})),children=node.type===b_tree.b.Internal?node.children.map((function(child,index){var key=index<node.selfSize?node.getKey(index):"last";return Object(jsx_runtime.jsx)(ReadonlyNodeTreeNode,{node:child},key)})):void 0;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[values,children]})}));ReadonlyNodeTreeNode.displayName="ReadonlyNodeTreeNode";var ReadonlyNodeTree_ReadonlyNodeTree=function ReadonlyNodeTree(_ref2){var tree=_ref2.tree;return Object(jsx_runtime.jsx)(ReadonlyNodeTreeNode,{node:tree.sortedRoot})};ReadonlyNodeTree_ReadonlyNodeTree.displayName="ReadonlyNodeTree";try{ReadonlyNodeTreeNode.displayName="ReadonlyNodeTreeNode",ReadonlyNodeTreeNode.__docgenInfo={description:"",displayName:"ReadonlyNodeTreeNode",props:{tree:{defaultValue:null,description:"",name:"tree",required:!0,type:{name:"OrderedMap<string, NodeModel<unknown, unknown>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/tree/ReadonlyNodeTree.tsx#ReadonlyNodeTreeNode"]={docgenInfo:ReadonlyNodeTreeNode.__docgenInfo,name:"ReadonlyNodeTreeNode",path:"src/components/tree/ReadonlyNodeTree.tsx#ReadonlyNodeTreeNode"})}catch(__react_docgen_typescript_loader_error){}var StaticGraph_StaticGraph=function StaticGraph(props){var nodes=props.data.nodes,style=Object.assign({position:"absolute",top:0,left:0,height:"100%",width:"100%"},props.style);return Object(jsx_runtime.jsx)("svg",{style:style,children:Object(jsx_runtime.jsx)(Transform_Transform,{matrix:props.transformMatrix,children:Object(jsx_runtime.jsx)(ReadonlyNodeTree_ReadonlyNodeTree,{tree:nodes})})})};StaticGraph_StaticGraph.displayName="StaticGraph";try{StaticGraph_StaticGraph.displayName="StaticGraph",StaticGraph_StaticGraph.__docgenInfo={description:"",displayName:"StaticGraph",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GraphModel<unknown, unknown, unknown>"}},transformMatrix:{defaultValue:null,description:"",name:"transformMatrix",required:!0,type:{name:"ITransformMatrix"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/StaticGraph/StaticGraph.tsx#StaticGraph"]={docgenInfo:StaticGraph_StaticGraph.__docgenInfo,name:"StaticGraph",path:"src/components/StaticGraph/StaticGraph.tsx#StaticGraph"})}catch(__react_docgen_typescript_loader_error){}var stopPropagation=__webpack_require__(108),Shadow_MiniMapShadow=function MiniMapShadow(_ref){var rect=_ref.containerRect,viewport=_ref.viewport,_ref$shadowPadding=_ref.shadowPadding,shadowPadding=void 0===_ref$shadowPadding?0:_ref$shadowPadding,onClick=_ref.onClick;if(!rect)return null;var shadowStyle={fill:constants.f.minimapShadow,opacity:.1},lineStyle={stroke:constants.f.inputFocusBorderAlt,strokeWidth:1},viewportStartX=Math.max(viewport.startX,shadowPadding),viewportStartY=Math.max(viewport.startY,shadowPadding),viewportEndX=Math.min(viewport.endX,rect.width-shadowPadding),viewportEndY=Math.min(viewport.endY,rect.height-shadowPadding),sideShadowHeight=viewportEndY-viewportStartY,rightShadowWidth=rect.width-viewportEndX,bottomShadowHeight=rect.height-viewportEndY;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[viewportStartY>0&&Object(jsx_runtime.jsxs)("g",{children:[Object(jsx_runtime.jsx)("rect",{onClick:onClick,onMouseDown:stopPropagation.a,onPointerDown:stopPropagation.a,x:0,y:0,height:viewportStartY,width:rect.width,style:shadowStyle}),Object(jsx_runtime.jsx)("line",{x1:viewportStartX,y1:viewportStartY,x2:viewportEndX,y2:viewportStartY,style:lineStyle})]}),viewportStartX&&sideShadowHeight>0&&Object(jsx_runtime.jsxs)("g",{children:[Object(jsx_runtime.jsx)("rect",{onClick:onClick,onMouseDown:stopPropagation.a,onPointerDown:stopPropagation.a,x:0,y:viewportStartY,height:sideShadowHeight,width:viewportStartX,style:shadowStyle}),Object(jsx_runtime.jsx)("line",{x1:viewportStartX,y1:viewportStartY,x2:viewportStartX,y2:viewportEndY,style:lineStyle})]}),rightShadowWidth&&sideShadowHeight>0&&Object(jsx_runtime.jsxs)("g",{children:[Object(jsx_runtime.jsx)("rect",{onClick:onClick,onMouseDown:stopPropagation.a,onPointerDown:stopPropagation.a,x:viewportEndX,y:viewportStartY,height:sideShadowHeight,width:rightShadowWidth,style:shadowStyle}),Object(jsx_runtime.jsx)("line",{x1:viewportEndX,y1:viewportStartY,x2:viewportEndX,y2:viewportEndY,style:lineStyle})]}),bottomShadowHeight>0&&Object(jsx_runtime.jsxs)("g",{children:[Object(jsx_runtime.jsx)("rect",{onClick:onClick,onMouseDown:stopPropagation.a,onPointerDown:stopPropagation.a,x:0,y:viewportEndY,height:bottomShadowHeight,width:rect.width,style:shadowStyle}),Object(jsx_runtime.jsx)("line",{x1:viewportStartX,y1:viewportEndY,x2:viewportEndX,y2:viewportEndY,style:lineStyle})]})]})};try{Shadow_MiniMapShadow.displayName="MiniMapShadow",Shadow_MiniMapShadow.__docgenInfo={description:"",displayName:"MiniMapShadow",props:{containerRect:{defaultValue:null,description:"",name:"containerRect",required:!0,type:{name:"ClientRect | DOMRect | null | undefined"}},viewport:{defaultValue:null,description:"",name:"viewport",required:!0,type:{name:"IRect"}},shadowPadding:{defaultValue:{value:"0"},description:"",name:"shadowPadding",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"MouseEventHandler<SVGRectElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Minimap/Shadow.tsx#MiniMapShadow"]={docgenInfo:Shadow_MiniMapShadow.__docgenInfo,name:"MiniMapShadow",path:"src/components/Minimap/Shadow.tsx#MiniMapShadow"})}catch(__react_docgen_typescript_loader_error){}function Minimap_toConsumableArray(arr){return function Minimap_arrayWithoutHoles(arr){if(Array.isArray(arr))return Minimap_arrayLikeToArray(arr)}(arr)||function Minimap_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function Minimap_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Minimap_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Minimap_arrayLikeToArray(o,minLen)}(arr)||function Minimap_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Minimap_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Minimap_Minimap=function Minimap(props){var _props$shadowPadding=props.shadowPadding,shadowPadding=void 0===_props$shadowPadding?0:_props$shadowPadding,_props$maxNodesCountA=props.maxNodesCountAllowed,maxNodesCountAllowed=void 0===_props$maxNodesCountA?150:_props$maxNodesCountA,_props$onRenderUnavai=props.onRenderUnavailable,onRenderUnavailable=void 0===_props$onRenderUnavai?function(){return null}:_props$onRenderUnavai,_props$renderArrow=props.renderArrow,renderArrow=void 0===_props$renderArrow?function(arrowDeg){}:_props$renderArrow,graphViewport=useViewport(),graphController=useGraphController(),data=Object(hooks.d)(),minimapContainerStyle=Object.assign({background:constants.f.minimapBackground},props.style),svgRef=react.useRef(null),graphConfig=useGraphConfig(),rect=Object(hooks.g)(svgRef),rectRef=useRefValue(rect),minimapTransformMatrix=react.useMemo((function(){return rect?Object(utils.getZoomFitMatrix)({data:data,rect:rect,graphConfig:graphConfig,nodeMaxVisibleSize:{width:0,height:0},nodeMinVisibleSize:{width:1/0,height:1/0}}):createGraphState.b}),[rect,data.nodes]),minimapTransformMatrixRef=useRefValue(minimapTransformMatrix),viewport=react.useMemo((function(){if(!rect||!Object(utils.isViewportComplete)(graphViewport))return{startX:0,startY:0,endX:0,endY:0};var boundaryPoints=Object(utils.getVisibleArea)(graphViewport),_transformPoint=Object(utils.transformPoint)(boundaryPoints.minX,boundaryPoints.minY,minimapTransformMatrix),startX=_transformPoint.x,startY=_transformPoint.y,_transformPoint2=Object(utils.transformPoint)(boundaryPoints.maxX,boundaryPoints.maxY,minimapTransformMatrix);return{startX:startX,startY:startY,endX:_transformPoint2.x,endY:_transformPoint2.y}}),[rect,minimapTransformMatrix,graphViewport.rect].concat(Minimap_toConsumableArray(graphViewport.transformMatrix))),onClick=react.useCallback((function(evt){if(evt.stopPropagation(),rect){var viewportWidth=viewport.endX-viewport.startX,viewportHeight=viewport.endY-viewport.startY,point=Object(utils.reverseTransformPoint)(Object(clamp.a)(shadowPadding+viewportWidth/2,rect.width-shadowPadding-viewportWidth/2,evt.clientX-rect.left),Object(clamp.a)(shadowPadding+viewportHeight/2,rect.height-shadowPadding-viewportHeight/2,evt.clientY-rect.top),minimapTransformMatrix);graphController.eventChannel.batch([{type:models_event.a.ScrollIntoView,x:point.x,y:point.y},{type:models_event.d.Click,rawEvent:evt}])}}),[rect]),onStartDrag=react.useCallback((function(evt,eventProvider){if(rectRef.current){var _rectRef$current=rectRef.current,left=_rectRef$current.left,top=_rectRef$current.top,right=_rectRef$current.right,bottom=_rectRef$current.bottom,validMouseRect={startX:left+shadowPadding,startY:top+shadowPadding,endX:right-shadowPadding,endY:bottom-shadowPadding};graphController.eventChannel.trigger({type:models_event.d.PanStart,rawEvent:evt});var drag=new controllers.a(eventProvider,(function(e){return{x:Object(clamp.a)(validMouseRect.startX,validMouseRect.endX,e.clientX),y:Object(clamp.a)(validMouseRect.startY,validMouseRect.endY,e.clientY)}}));drag.onMove=function(_ref){var dx=_ref.dx,dy=_ref.dy,e=_ref.e,_getPointDeltaByClien=Object(utils.getPointDeltaByClientDelta)(-dx,-dy,minimapTransformMatrixRef.current),x=_getPointDeltaByClien.x,y=_getPointDeltaByClien.y;graphController.eventChannel.trigger({type:models_event.d.Pan,dx:x,dy:y,rawEvent:e})},drag.start(evt),drag.onEnd=function(){graphController.eventChannel.trigger({type:models_event.d.PanEnd,rawEvent:evt})}}}),[shadowPadding]),arrowParams=react.useMemo((function(){if(!rect)return{showArrow:!1,arrowDeg:0};var showArrow=viewport.startX>rect.width-shadowPadding||viewport.startY>rect.height-shadowPadding||viewport.endX<shadowPadding||viewport.endY<shadowPadding,x0=rect.width/2,y0=rect.height/2,x1=(viewport.startX+viewport.endX)/2,y1=(viewport.startY+viewport.endY)/2,arrowDeg=180*Math.atan2(y1-y0,x1-x0)/Math.PI;return arrowDeg<0&&(arrowDeg+=360),{showArrow:showArrow,arrowDeg:arrowDeg}}),[rect,viewport,shadowPadding]),onMouseDown=react.useCallback((function(evt){onStartDrag(evt.nativeEvent,new MouseMoveEventProvider(graphController.getGlobalEventTarget()))}),[onStartDrag]),touchController=react.useMemo((function(){var handlers=new Map,touchDragAdapter=new TouchDragAdapter;return touchDragAdapter.on("start",(function(e){onStartDrag(e,touchDragAdapter)})),handlers.set(1,touchDragAdapter),new controllers.c(handlers)}),[onStartDrag,rect]),staticGraphEl=react.useMemo((function(){return Object(jsx_runtime.jsx)(StaticGraph_StaticGraph,{data:data,transformMatrix:minimapTransformMatrix})}),[data.nodes].concat(Minimap_toConsumableArray(minimapTransformMatrix)));return data.nodes.size>maxNodesCountAllowed?Object(jsx_runtime.jsx)("div",{className:"minimap-container",style:minimapContainerStyle,children:onRenderUnavailable()}):Object(jsx_runtime.jsxs)("div",{className:"minimap-container "+Graph_styles_m_default.a.minimap,style:minimapContainerStyle,children:[staticGraphEl,Object(jsx_runtime.jsx)("svg",Object.assign({className:Graph_styles_m_default.a.minimapSvg},touchController.eventHandlers,{onMouseDown:onMouseDown,ref:svgRef,"data-automation-id":"minimap-id",children:Object(jsx_runtime.jsx)(Shadow_MiniMapShadow,{containerRect:rect,viewport:viewport,shadowPadding:shadowPadding,onClick:onClick})})),arrowParams.showArrow&&renderArrow(arrowParams.arrowDeg)]})};Minimap_Minimap.displayName="Minimap";try{Minimap_Minimap.displayName="Minimap",Minimap_Minimap.__docgenInfo={description:"",displayName:"Minimap",props:{style:{defaultValue:null,description:"Custom styling for the minimap",name:"style",required:!1,type:{name:"CSSProperties"}},shadowPadding:{defaultValue:{value:"0"},description:"The padding of the minimap viewport",name:"shadowPadding",required:!1,type:{name:"number"}},maxNodesCountAllowed:{defaultValue:{value:"150"},description:"The max nodes counts allowed to show in the minimap",name:"maxNodesCountAllowed",required:!1,type:{name:"number"}},onRenderUnavailable:{defaultValue:{value:"() => null"},description:"The renderer when exceed the max node counts",name:"onRenderUnavailable",required:!1,type:{name:"(() => ReactNode)"}},renderArrow:{defaultValue:null,description:"The renderer to point the graph position when the graph is out of the viewport\n@param arrowDeg",name:"renderArrow",required:!1,type:{name:"((arrowDeg: number) => ReactNode)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Minimap/Minimap.tsx#Minimap"]={docgenInfo:Minimap_Minimap.__docgenInfo,name:"Minimap",path:"src/components/Minimap/Minimap.tsx#Minimap"})}catch(__react_docgen_typescript_loader_error){}var ContextMenu_ContextMenu=function ContextMenu(props){var classes=Object(mergeStyleSets.a)({contextMenu:{fontSize:14,background:constants.f.contextMenuBackground,color:constants.f.fontColor,border:"1px solid "+constants.f.contextMenuBorder,width:193,lineHeight:"20px",cursor:"default","> *":{padding:8,":hover":{background:constants.f.contextMenuHoverBackground}}}}),propsMerged=Object.assign({},props,{className:classes.contextMenu+" "+props.className});return Object(hooks.b)().registerContextMenu(propsMerged),Object(jsx_runtime.jsx)("div",{children:props.children})};ContextMenu_ContextMenu.displayName="ContextMenu";try{ContextMenu_ContextMenu.displayName="ContextMenu",ContextMenu_ContextMenu.__docgenInfo={description:"",displayName:"ContextMenu",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},styles:{defaultValue:null,description:"",name:"styles",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/RegisterComponent/ContextMenu/ContextMenu.tsx#ContextMenu"]={docgenInfo:ContextMenu_ContextMenu.__docgenInfo,name:"ContextMenu",path:"src/components/RegisterComponent/ContextMenu/ContextMenu.tsx#ContextMenu"})}catch(__react_docgen_typescript_loader_error){}var NodeMenu_NodeMenu=function NodeMenu(props){return Object(hooks.b)().registerMenu(props.children,contexts.d.Node),null};try{NodeMenu_NodeMenu.displayName="NodeMenu",NodeMenu_NodeMenu.__docgenInfo={description:"",displayName:"NodeMenu",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/RegisterComponent/ContextMenu/NodeMenu.tsx#NodeMenu"]={docgenInfo:NodeMenu_NodeMenu.__docgenInfo,name:"NodeMenu",path:"src/components/RegisterComponent/ContextMenu/NodeMenu.tsx#NodeMenu"})}catch(__react_docgen_typescript_loader_error){}var EdgeMenu_EdgeMenu=function EdgeMenu(props){return Object(hooks.b)().registerMenu(props.children,contexts.d.Edge),null};try{EdgeMenu_EdgeMenu.displayName="EdgeMenu",EdgeMenu_EdgeMenu.__docgenInfo={description:"",displayName:"EdgeMenu",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/RegisterComponent/ContextMenu/EdgeMenu.tsx#EdgeMenu"]={docgenInfo:EdgeMenu_EdgeMenu.__docgenInfo,name:"EdgeMenu",path:"src/components/RegisterComponent/ContextMenu/EdgeMenu.tsx#EdgeMenu"})}catch(__react_docgen_typescript_loader_error){}var PortMenu_PortMenu=function PortMenu(props){return Object(hooks.b)().registerMenu(props.children,contexts.d.Port),null};try{PortMenu_PortMenu.displayName="PortMenu",PortMenu_PortMenu.__docgenInfo={description:"",displayName:"PortMenu",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/RegisterComponent/ContextMenu/PortMenu.tsx#PortMenu"]={docgenInfo:PortMenu_PortMenu.__docgenInfo,name:"PortMenu",path:"src/components/RegisterComponent/ContextMenu/PortMenu.tsx#PortMenu"})}catch(__react_docgen_typescript_loader_error){}var CanvasMenu_CanvasMenu=function CanvasMenu(props){return Object(hooks.b)().registerMenu(props.children,contexts.d.Canvas),null};try{CanvasMenu_CanvasMenu.displayName="CanvasMenu",CanvasMenu_CanvasMenu.__docgenInfo={description:"",displayName:"CanvasMenu",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/RegisterComponent/ContextMenu/CanvasMenu.tsx#CanvasMenu"]={docgenInfo:CanvasMenu_CanvasMenu.__docgenInfo,name:"CanvasMenu",path:"src/components/RegisterComponent/ContextMenu/CanvasMenu.tsx#CanvasMenu"})}catch(__react_docgen_typescript_loader_error){}var MultiMenu_MultiMenu=function MultiMenu(props){return Object(hooks.b)().registerMenu(props.children,contexts.d.Multi),null};try{MultiMenu_MultiMenu.displayName="MultiMenu",MultiMenu_MultiMenu.__docgenInfo={description:"",displayName:"MultiMenu",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/RegisterComponent/ContextMenu/MultiMenu.tsx#MultiMenu"]={docgenInfo:MultiMenu_MultiMenu.__docgenInfo,name:"MultiMenu",path:"src/components/RegisterComponent/ContextMenu/MultiMenu.tsx#MultiMenu"})}catch(__react_docgen_typescript_loader_error){}},518:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(56),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(92),__webpack_require__(34),__webpack_require__(11),__webpack_require__(7),__webpack_require__(14),__webpack_require__(16),__webpack_require__(19),__webpack_require__(15),__webpack_require__(502);__webpack_require__(272)},519:function(module,__webpack_exports__,__webpack_require__){"use strict";function isDef(v){return null!=v}__webpack_require__.d(__webpack_exports__,"a",(function(){return debounce_debounce}));var debounce_debounce=function debounce(callback,timeout,options){var firstInvokeTime,_ref=options||{},instance=_ref.instance,maxWait=_ref.maxWait,timer=0;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if(window.clearTimeout(timer),isDef(maxWait)){var now=Date.now();if(isDef(firstInvokeTime)){if(now-firstInvokeTime>=maxWait)return firstInvokeTime=void 0,void invokeCallback(args)}else firstInvokeTime=now}timer=window.setTimeout((function(){invokeCallback(args)}),timeout)};function invokeCallback(args){callback.apply(instance,args)}}},52:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return a11yUtils_findDOMElement})),__webpack_require__.d(__webpack_exports__,"e",(function(){return a11yUtils_focusItem})),__webpack_require__.d(__webpack_exports__,"k",(function(){return getNextItem})),__webpack_require__.d(__webpack_exports__,"l",(function(){return getPrevItem})),__webpack_require__.d(__webpack_exports__,"n",(function(){return nextConnectablePort})),__webpack_require__.d(__webpack_exports__,"g",(function(){return focusNextPort})),__webpack_require__.d(__webpack_exports__,"h",(function(){return focusPrevPort})),__webpack_require__.d(__webpack_exports__,"f",(function(){return focusLeftNode})),__webpack_require__.d(__webpack_exports__,"i",(function(){return focusRightNode})),__webpack_require__.d(__webpack_exports__,"d",(function(){return focusDownNode})),__webpack_require__.d(__webpack_exports__,"j",(function(){return focusUpNode})),__webpack_require__.d(__webpack_exports__,"m",(function(){return a11yUtils_goToConnectedPort})),__webpack_require__.d(__webpack_exports__,"b",(function(){return defaultGetPortAriaLabel})),__webpack_require__.d(__webpack_exports__,"a",(function(){return defaultGetNodeAriaLabel}));__webpack_require__(348),__webpack_require__(12),__webpack_require__(502),__webpack_require__(19),__webpack_require__(10),__webpack_require__(6),__webpack_require__(8),__webpack_require__(9),__webpack_require__(66);var react=__webpack_require__(0),react_dom=__webpack_require__(85),jsx_runtime=(__webpack_require__(20),__webpack_require__(47),__webpack_require__(11),__webpack_require__(7),__webpack_require__(14),__webpack_require__(16),__webpack_require__(15),__webpack_require__(2));function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var VisitPortHelper_VisitPortHelper=function VisitPortHelper(props){var neighborPorts=props.neighborPorts,data=props.data,selectRef=react.useRef(null),_React$useState2=_slicedToArray(react.useState(),2),selectedItem=_React$useState2[0],setSelectedItem=_React$useState2[1],onContainerKeyDown=react.useCallback((function(evt){"Escape"===evt.key&&(evt.stopPropagation(),evt.preventDefault(),selectedItem&&props.onComplete(selectedItem))}),[selectedItem,props]),onContainerBlur=react.useCallback((function(evt){}),[]),onContainerChange=react.useCallback((function(evt){var value=JSON.parse(evt.target.value);value.nodeId&&value.portId&&setSelectedItem({nodeId:value.nodeId,portId:value.portId})}),[setSelectedItem]);return react.useEffect((function(){selectRef.current&&selectRef.current.focus({preventScroll:!0})}),[]),Object(jsx_runtime.jsx)("select",{onKeyDown:onContainerKeyDown,onBlur:onContainerBlur,ref:selectRef,onChange:onContainerChange,children:neighborPorts.map((function(s){var isSelected=selectedItem&&selectedItem.portId===s.portId&&selectedItem.nodeId===s.nodeId,value=JSON.stringify(s),node=data.nodes.get(s.nodeId);if(!node)return null;var port=node.ports?node.ports.filter((function(p){return p.id===s.portId}))[0]:null;if(!port)return null;var label=(node.ariaLabel||node.name||node.id)+": "+(port.ariaLabel||port.name||port.id);return Object(jsx_runtime.jsx)("option",{value:value,"aria-selected":isSelected,"aria-label":label,children:label},s.nodeId+"-"+s.portId)}))})};VisitPortHelper_VisitPortHelper.displayName="VisitPortHelper";try{VisitPortHelper_VisitPortHelper.displayName="VisitPortHelper",VisitPortHelper_VisitPortHelper.__docgenInfo={description:"",displayName:"VisitPortHelper",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GraphModel<unknown, unknown, unknown>"}},neighborPorts:{defaultValue:null,description:"",name:"neighborPorts",required:!0,type:{name:"INeighborItem[]"}},onComplete:{defaultValue:null,description:"",name:"onComplete",required:!0,type:{name:"(item: INeighborItem) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/A11yHelpers/VisitPortHelper.tsx#VisitPortHelper"]={docgenInfo:VisitPortHelper_VisitPortHelper.__docgenInfo,name:"VisitPortHelper",path:"src/components/A11yHelpers/VisitPortHelper.tsx#VisitPortHelper"})}catch(__react_docgen_typescript_loader_error){}var models_event=__webpack_require__(1),graphDataUtils=__webpack_require__(106),item=function item(){var node=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,port=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return{node:node,port:port}},a11yUtils_findDOMElement=function findDOMElement(svg,_ref){var id,node=_ref.node,port=_ref.port;if(node&&port){var _svg$dataset$graphId;id=Object(graphDataUtils.h)(null!==(_svg$dataset$graphId=svg.dataset.graphId)&&void 0!==_svg$dataset$graphId?_svg$dataset$graphId:"",node,port)}else{if(!node)return null;var _svg$dataset$graphId2;id=Object(graphDataUtils.f)(null!==(_svg$dataset$graphId2=svg.dataset.graphId)&&void 0!==_svg$dataset$graphId2?_svg$dataset$graphId2:"",node)}return svg.getElementById(id)},a11yUtils_focusItem=function focusItem(svgRef,nextItem,evt,eventChannel){if(svgRef.current){var el=a11yUtils_findDOMElement(svgRef.current,nextItem);el?(evt.preventDefault(),evt.stopPropagation(),el.focus({preventScroll:!0}),eventChannel.trigger({type:models_event.a.Navigate,node:nextItem.node,port:nextItem.port,rawEvent:evt})):nextItem.node||nextItem.port||eventChannel.trigger({type:models_event.a.Navigate,node:nextItem.node,port:nextItem.port,rawEvent:evt})}},getNextItem=function getNextItem(data,curNode,port){if(curNode.ports){var nextPortIndex=(port?curNode.ports.findIndex((function(p){return p.id===port.id})):-1)+1;if(nextPortIndex<curNode.ports.length)return item(curNode,curNode.ports[nextPortIndex])}var nextNode=curNode.next&&data.nodes.get(curNode.next);return nextNode?item(nextNode):item()},getPrevItem=function getPrevItem(data,curNode,port){if(port&&curNode.ports){var prevPortIndex=curNode.ports.findIndex((function(p){return p.id===port.id}))-1;return prevPortIndex>=0?item(curNode,curNode.ports[prevPortIndex]):item(curNode)}var prevNode=curNode.prev&&data.nodes.get(curNode.prev);return prevNode?item(prevNode,prevNode.ports&&prevNode.ports.length?prevNode.ports[prevNode.ports.length-1]:void 0):item()},nextConnectablePort=function nextConnectablePort(graphConfig,params){return function(data,node,port){for(var next=getNextItem(data,node,port);(null===(_next$node=next.node)||void 0===_next$node?void 0:_next$node.id)!==node.id||(null===(_next$port=next.port)||void 0===_next$port?void 0:_next$port.id)!==(null==port?void 0:port.id);){var _next$node,_next$port;if(next.node){if(next.port){var _graphConfig$getPortC,portShape=next.port.shape?next.port.shape:graphConfig.defaultPortShape;if(null!==(_graphConfig$getPortC=graphConfig.getPortConfigByName(portShape))&&void 0!==_graphConfig$getPortC&&_graphConfig$getPortC.getIsConnectable(Object.assign({},params,{data:data,parentNode:next.node,model:next.port})))return next}}else next=item(data.getNavigationFirstNode());next=getNextItem(data,next.node,next.port)}return item()}},focusNextPort=function focusNextPort(ports,node,curPortId,svgRef,evt,eventChannel){var curPortIndex=ports.findIndex((function(p){return p.id===curPortId})),nextPort=ports[(curPortIndex+1)%ports.length];nextPort&&svgRef.current&&a11yUtils_focusItem(svgRef,{node:node,port:nextPort},evt,eventChannel)},focusPrevPort=function focusPrevPort(ports,node,curPortId,svgRef,evt,eventChannel){var curPortIndex=ports.findIndex((function(p){return p.id===curPortId})),prevPort=ports[(curPortIndex-1+ports.length)%ports.length];prevPort&&svgRef.current&&a11yUtils_focusItem(svgRef,{node:node,port:prevPort},evt,eventChannel)},a11yUtils_getFocusNodeHandler=function getFocusNodeHandler(compareFn){return function(data,curNodeId,svgRef,graphController,evt,eventChannel){var sortedNodes=Array.from(data.nodes.values()).sort(compareFn),curNodeIndex=sortedNodes.findIndex((function(n){return n.id===curNodeId})),nextNode=sortedNodes[(curNodeIndex+1)%sortedNodes.length];nextNode&&svgRef.current&&(graphController.dispatch({type:models_event.e.Select,nodes:[nextNode.id]}),graphController.dispatch({type:models_event.e.Centralize,nodes:[nextNode.id]}),a11yUtils_focusItem(svgRef,{node:nextNode,port:void 0},evt,eventChannel))}},focusLeftNode=a11yUtils_getFocusNodeHandler((function(n1,n2){return 10*n1.x+n1.y-10*n2.x-n2.y})),focusRightNode=a11yUtils_getFocusNodeHandler((function(n1,n2){return 10*n2.x+n2.y-10*n1.x-n1.y})),focusDownNode=a11yUtils_getFocusNodeHandler((function(n1,n2){return n1.x+10*n1.y-n2.x-10*n2.y})),focusUpNode=a11yUtils_getFocusNodeHandler((function(n1,n2){return n2.x+10*n2.y-n1.x-10*n1.y})),a11yUtils_goToConnectedPort=function goToConnectedPort(data,node,port,svgRef,evt,eventChannel){var neighborPorts=Object(graphDataUtils.d)(data,node.id,port.id);if(1===neighborPorts.length&&svgRef.current){var _targetNode$ports,targetNode=data.nodes.get(neighborPorts[0].nodeId);if(!targetNode)return;var targetPort=null===(_targetNode$ports=targetNode.ports)||void 0===_targetNode$ports?void 0:_targetNode$ports.find((function(p){return p.id===neighborPorts[0].portId}));if(!targetPort)return;a11yUtils_focusItem(svgRef,{node:targetNode,port:targetPort},evt,eventChannel)}else if(neighborPorts.length>1&&svgRef.current){var visitPortHelperContainer=document.createElement("div"),editorContainer=svgRef.current.closest(".react-dag-editor-container");editorContainer&&editorContainer.appendChild(visitPortHelperContainer),visitPortHelperContainer.style.position="fixed",visitPortHelperContainer.style.top="0",react_dom.render(Object(jsx_runtime.jsx)(VisitPortHelper_VisitPortHelper,{neighborPorts:neighborPorts,onComplete:function onComplete(nextPort){var _targetNode$ports2;if(react_dom.unmountComponentAtNode(visitPortHelperContainer),svgRef.current){var curEditorContainer=svgRef.current.closest(".react-dag-editor-container");curEditorContainer&&curEditorContainer.removeChild(visitPortHelperContainer)}var targetNode=data.nodes.get(nextPort.nodeId);if(targetNode){var targetPort=null===(_targetNode$ports2=targetNode.ports)||void 0===_targetNode$ports2?void 0:_targetNode$ports2.find((function(p){return p.id===nextPort.portId}));targetPort&&a11yUtils_focusItem(svgRef,{node:targetNode,port:targetPort},evt,eventChannel)}},data:data}),visitPortHelperContainer)}};function defaultGetPortAriaLabel(data,node,port){return port.ariaLabel}function defaultGetNodeAriaLabel(node){return node.ariaLabel}try{defaultGetNodeAriaLabel.displayName="defaultGetNodeAriaLabel",defaultGetNodeAriaLabel.__docgenInfo={description:"",displayName:"defaultGetNodeAriaLabel",props:{shape:{defaultValue:null,description:"",name:"shape",required:!1,type:{name:"string"}},x:{defaultValue:null,description:"",name:"x",required:!0,type:{name:"number"}},y:{defaultValue:null,description:"",name:"y",required:!0,type:{name:"number"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},state:{defaultValue:null,description:"",name:"state",required:!1,type:{name:"GraphNodeState"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},automationId:{defaultValue:null,description:"",name:"automationId",required:!1,type:{name:"string"}},isInSearchResults:{defaultValue:null,description:"",name:"isInSearchResults",required:!1,type:{name:"boolean"}},isCurrentSearchResult:{defaultValue:null,description:"",name:"isCurrentSearchResult",required:!1,type:{name:"boolean"}},ports:{defaultValue:null,description:"",name:"ports",required:!1,type:{name:"readonly ICanvasPort<unknown>[]"}},ariaLabel:{defaultValue:null,description:"",name:"ariaLabel",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"Readonly<unknown>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/a11yUtils.tsx#defaultGetNodeAriaLabel"]={docgenInfo:defaultGetNodeAriaLabel.__docgenInfo,name:"defaultGetNodeAriaLabel",path:"src/utils/a11yUtils.tsx#defaultGetNodeAriaLabel"})}catch(__react_docgen_typescript_loader_error){}try{a11yUtils_getFocusNodeHandler.displayName="getFocusNodeHandler",a11yUtils_getFocusNodeHandler.__docgenInfo={description:"",displayName:"getFocusNodeHandler",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/a11yUtils.tsx#getFocusNodeHandler"]={docgenInfo:a11yUtils_getFocusNodeHandler.__docgenInfo,name:"getFocusNodeHandler",path:"src/utils/a11yUtils.tsx#getFocusNodeHandler"})}catch(__react_docgen_typescript_loader_error){}},54:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return GraphConfigContext.a})),__webpack_require__.d(__webpack_exports__,"d",(function(){return ContextMenuConfigContext.c})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ContextMenuConfigContext.a})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ContextMenuConfigContext.b})),__webpack_require__.d(__webpack_exports__,"e",(function(){return ViewportContext}));var GraphConfigContext=__webpack_require__(266),ContextMenuConfigContext=__webpack_require__(144),react=__webpack_require__(0),createGraphState=__webpack_require__(63),ViewportContext=Object(react.createContext)(createGraphState.c);__webpack_require__(114)},566:function(module,exports,__webpack_require__){__webpack_require__(567),__webpack_require__(728),__webpack_require__(729),__webpack_require__(931),__webpack_require__(932),module.exports=__webpack_require__(919)},58:function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__.d(__webpack_exports__,"a",(function(){return Debug}));var Debug=function(){function Debug(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Debug)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Debug,null,[{key:"log",value:function log(message){0}},{key:"warn",value:function warn(message){0}},{key:"error",value:function error(){var _console;(_console=console).error.apply(_console,arguments)}},{key:"never",value:function never(value,message){throw new Error(null!=message?message:value+" is unexpected")}}]),Debug}()},63:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return EMPTY_TRANSFORM_MATRIX})),__webpack_require__.d(__webpack_exports__,"c",(function(){return EMPTY_VIEW_PORT})),__webpack_require__.d(__webpack_exports__,"a",(function(){return EMPTY_GRAPH_STATE})),__webpack_require__.d(__webpack_exports__,"d",(function(){return createGraphState}));__webpack_require__(12),__webpack_require__(56),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9);var _common_constants__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(21),_components_Graph_SelectBox__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(185),_Features__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(32),_models_config_GraphConfigBuilder__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(178),_models_dummy_node__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(148),_models_GraphModel__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(180),_models_state__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(35),_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(3),EMPTY_TRANSFORM_MATRIX=[1,0,0,1,0,0],EMPTY_VIEW_PORT={rect:void 0,transformMatrix:EMPTY_TRANSFORM_MATRIX},DEFAULT_NODE_MIN_VISIBLE_SIZE={width:_common_constants__WEBPACK_IMPORTED_MODULE_6__.e,height:_common_constants__WEBPACK_IMPORTED_MODULE_6__.e},DEFAULT_NODE_MAX_VISIBLE_SIZE={width:_common_constants__WEBPACK_IMPORTED_MODULE_6__.d,height:_common_constants__WEBPACK_IMPORTED_MODULE_6__.d},DEFAULT_GRAPH_SETTINGS={features:_Features__WEBPACK_IMPORTED_MODULE_8__.b,graphConfig:_models_config_GraphConfigBuilder__WEBPACK_IMPORTED_MODULE_9__.a.default().build(),canvasBoundaryPadding:{top:0,right:0,bottom:0,left:0},nodeMinVisibleSize:DEFAULT_NODE_MIN_VISIBLE_SIZE,nodeMaxVisibleSize:DEFAULT_NODE_MAX_VISIBLE_SIZE},EMPTY_GRAPH_STATE=createGraphState({});function createGraphState(params){var data=params.data,transformMatrix=params.transformMatrix,settings=params.settings;return{settings:Object.assign({},DEFAULT_GRAPH_SETTINGS,settings),data:Object(_utils__WEBPACK_IMPORTED_MODULE_13__.resetUndoStack)(null!=data?data:_models_GraphModel__WEBPACK_IMPORTED_MODULE_11__.a.empty()),viewport:{rect:void 0,transformMatrix:null!=transformMatrix?transformMatrix:EMPTY_TRANSFORM_MATRIX},behavior:_models_state__WEBPACK_IMPORTED_MODULE_12__.b.default,dummyNodes:Object(_models_dummy_node__WEBPACK_IMPORTED_MODULE_10__.a)(),alignmentLines:[],activeKeys:new Set,selectBoxPosition:Object(_components_Graph_SelectBox__WEBPACK_IMPORTED_MODULE_7__.b)(),connectState:void 0}}},634:function(module,exports){},69:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return getRectWidth})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getRectHeight})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getNodeSize})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getGroupRect}));__webpack_require__(56),__webpack_require__(6),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(47),__webpack_require__(19),__webpack_require__(20),__webpack_require__(7),__webpack_require__(14),__webpack_require__(16),__webpack_require__(15),__webpack_require__(11);var _getNodeConfig__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(179);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getRectWidth(rectConfig,rect){var _rectConfig$getMinWid,minWidth=null!==(_rectConfig$getMinWid=null==rectConfig?void 0:rectConfig.getMinWidth(rect))&&void 0!==_rectConfig$getMinWid?_rectConfig$getMinWid:0;return rect.width&&rect.width>=minWidth?rect.width:minWidth}function getRectHeight(rectConfig,rect){var _rectConfig$getMinHei,minHeight=null!==(_rectConfig$getMinHei=null==rectConfig?void 0:rectConfig.getMinHeight(rect))&&void 0!==_rectConfig$getMinHei?_rectConfig$getMinHei:0;return rect.height&&rect.height>=minHeight?rect.height:minHeight}function getNodeSize(node,graphConfig){var nodeConfig=Object(_getNodeConfig__WEBPACK_IMPORTED_MODULE_13__.a)(node,graphConfig),width=getRectWidth(nodeConfig,node);return{height:getRectHeight(nodeConfig,node),width:width}}function getGroupRect(group,nodes,graphConfig){var _group$padding$left,_group$padding,_group$padding$top,_group$padding2,_group$padding$bottom,_group$padding3,_group$padding$left2,_group$padding4,childrenIds=new Set(group.nodeIds),children=Array.from(nodes.values()).filter((function(node){return childrenIds.has(node.id)})),minX=Math.min.apply(Math,_toConsumableArray(children.map((function(node){return node.x})))),maxX=Math.max.apply(Math,_toConsumableArray(children.map((function(node){return node.x+getNodeSize(node,graphConfig).width})))),minY=Math.min.apply(Math,_toConsumableArray(children.map((function(node){return node.y})))),maxY=Math.max.apply(Math,_toConsumableArray(children.map((function(node){return node.y+getNodeSize(node,graphConfig).height})))),x=minX-(null!==(_group$padding$left=null===(_group$padding=group.padding)||void 0===_group$padding?void 0:_group$padding.left)&&void 0!==_group$padding$left?_group$padding$left:0),y=minY-(null!==(_group$padding$top=null===(_group$padding2=group.padding)||void 0===_group$padding2?void 0:_group$padding2.top)&&void 0!==_group$padding$top?_group$padding$top:0),height=maxY-y+(null!==(_group$padding$bottom=null===(_group$padding3=group.padding)||void 0===_group$padding3?void 0:_group$padding3.bottom)&&void 0!==_group$padding$bottom?_group$padding$bottom:0);return{x:x,y:y,width:maxX-x+(null!==(_group$padding$left2=null===(_group$padding4=group.padding)||void 0===_group$padding4?void 0:_group$padding4.left)&&void 0!==_group$padding$left2?_group$padding$left2:0),height:height}}},70:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return identical}));var identical=function identical(data){return data}},71:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return NodeType})),__webpack_require__.d(__webpack_exports__,"c",(function(){return emptyRoot})),__webpack_require__.d(__webpack_exports__,"d",(function(){return rootInsert})),__webpack_require__.d(__webpack_exports__,"e",(function(){return rootRemove})),__webpack_require__.d(__webpack_exports__,"a",(function(){return BTreeIterator}));__webpack_require__(6),__webpack_require__(8),__webpack_require__(9),__webpack_require__(15),__webpack_require__(255),__webpack_require__(20),__webpack_require__(34),__webpack_require__(66),__webpack_require__(16),__webpack_require__(10),__webpack_require__(7),__webpack_require__(14),__webpack_require__(11),__webpack_require__(19);var NodeType,_utils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(39);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}!function(NodeType){NodeType[NodeType.Internal=0]="Internal",NodeType[NodeType.Leaf=1]="Leaf"}(NodeType||(NodeType={}));function binaryFind(list,key){for(var start=0,end=list.length;;){if(start+1===end)return list[start]>=key?start:end;var mid=start+end>>>1;if(list[mid]===key)return mid;key<list[mid]?end=mid:start=mid}}var InternalNode=function(){function InternalNode(owner,keys,values,children,size){_classCallCheck(this,InternalNode),this.type=NodeType.Internal,this.keys=void 0,this.values=void 0,this.size=void 0,this.children=void 0,this.owner=void 0,this.owner=owner,this.keys=keys,this.values=values,this.children=children,this.size=size}return _createClass(InternalNode,[{key:"selfSize",get:function get(){return this.keys.length}},{key:"iter",value:function iter(){return new BTreeIterator(this)}},{key:"toOwned",value:function toOwned(owner){return this.owner===owner?this:new InternalNode(owner,this.keys.slice(),this.values.slice(),this.children.slice(),this.size)}},{key:"getKey",value:function getKey(index){return this.keys[index]}},{key:"getValue",value:function getValue(index){return this.values[index]}},{key:"getChild",value:function getChild(index){return this.children[index]}},{key:"get",value:function get(key){var size=this.selfSize,index=binaryFind(this.keys,key);if(index!==size&&this.getKey(index)===key)return this.getValue(index);return this.getChild(index).get(key)}},{key:"contains",value:function contains(key){var size=this.selfSize,index=binaryFind(this.keys,key);if(index!==size&&this.getKey(index)===key)return!0;return this.getChild(index).contains(key)}},{key:"insert",value:function insert(owner,key,value){var size=this.selfSize,index=binaryFind(this.keys,key),key0=this.getKey(index),value0=this.getValue(index);if(key0===key){if(Object(_utils__WEBPACK_IMPORTED_MODULE_14__.b)(value0,value))return[this];var next=this.toOwned(owner);return next.values[index]=value,[next]}var child0=this.getChild(index),_insert=child0.insert(owner,key,value);if(1===_insert.length){var child=_insert[0];if(child===child0)return[this];var _next=this.toOwned(owner);return _next.children[index]=child,[_next]}if(31===size)return this.updateWithSplit(owner,_insert[0],_insert[1],_insert[2],_insert[3],index);var _next2=this.toOwned(owner);return _next2.keys.splice(index,0,_insert[2]),_next2.values.splice(index,0,_insert[3]),_next2.children.splice(index,1,_insert[0],_insert[1]),_next2.size+=1,[_next2]}},{key:"update",value:function update(owner,key,updater){var index=binaryFind(this.keys,key),key0=this.getKey(index),value0=this.getValue(index);if(key0===key){var _value=updater(value0);if(Object(_utils__WEBPACK_IMPORTED_MODULE_14__.b)(value0,_value))return this;var next=this.toOwned(owner);return next.values[index]=_value,next}var child0=this.getChild(index),child=child0.update(owner,key,updater);if(child===child0)return this;var _next3=this.toOwned(owner);return _next3.children[index]=child,_next3}},{key:"remove",value:function remove(owner,key){var index=binaryFind(this.keys,key),size=this.selfSize,child0=this.getChild(index),originalSize=child0.size,key0=this.getKey(index);if(key0===key){var _child0$removeMostRig2=_slicedToArray(child0.removeMostRight(owner),3),removedKey=_child0$removeMostRig2[0],_value2=_child0$removeMostRig2[1],child=_child0$removeMostRig2[2],next=this.toOwned(owner);return next.size-=1,next.keys[index]=removedKey,next.values[index]=_value2,next.children[index]=child,next.balanceChild(owner,child,removedKey,_value2,index)}var _child=child0.remove(owner,key);if(_child.size===originalSize)return this;var _next4=this.toOwned(owner);if(_next4.size-=1,_next4.children[index]=_child,_child.selfSize>=15)return _next4;if(index===size)return _next4.balanceTail(_child),_next4;var value0=this.getValue(index);return _next4.balanceChild(owner,_child,key0,value0,index)}},{key:"removeMostRight",value:function removeMostRight(owner){var size=this.selfSize,_this$getChild$remove2=_slicedToArray(this.getChild(size).removeMostRight(owner),3),key=_this$getChild$remove2[0],value=_this$getChild$remove2[1],child=_this$getChild$remove2[2],next=this.toOwned(owner);return next.size-=1,next.children[size]=child,child.selfSize<15&&next.balanceTail(child),[key,value,next]}},{key:"map",value:function map(owner,f){for(var values=[],children=[],same=!0,i=0;i<this.keys.length;i+=1){var _key=this.getKey(i),value0=this.getValue(i),_value3=f(value0,_key);values.push(_value3),same=same&&Object(_utils__WEBPACK_IMPORTED_MODULE_14__.b)(value0,_value3)}for(var _i2=0;_i2<this.children.length;_i2+=1){var child0=this.getChild(_i2),child=child0.map(owner,f);children.push(child),same=same&&child0===child}return same?this:new InternalNode(owner,this.keys,values,children,this.size)}},{key:"forEach",value:function forEach(f){for(var i=0;i<this.keys.length;i+=1){var _key2=this.getKey(i);f(this.getValue(i),_key2)}for(var _i3=0;_i3<this.children.length;_i3+=1){this.getChild(_i3).forEach(f)}}},{key:"find",value:function find(predicate){for(var i=0;i<this.keys.length;i+=1){var _value5=this.getValue(i);if(predicate(_value5))return _value5}for(var _i4=0;_i4<this.children.length;_i4+=1){var found=this.getChild(_i4).find(predicate);if(found)return found}}},{key:"balanceChild",value:function balanceChild(owner,child,key0,value0,index){if(0===index)return this.balanceHead(child),this;var isChildInternal=child.type===NodeType.Internal,left0=this.getChild(index-1),right0=this.getChild(index+1);if(left0.selfSize>15)this.rotateRight(child,left0,index,isChildInternal);else if(right0.selfSize>15)this.rotateLeft(child,right0,index,isChildInternal);else{var _left$keys,_left$values,_right$keys,_right$values,_children,_children2,left=left0.toOwned(owner),right=right0.toOwned(owner),_key3=child.getKey(7),_value6=child.getValue(7);if(left.keys.push(this.getKey(index-1)),left.values.push(this.getValue(index-1)),(_left$keys=left.keys).push.apply(_left$keys,_toConsumableArray(child.keys.slice(0,7))),(_left$values=left.values).push.apply(_left$values,_toConsumableArray(child.values.slice(0,7))),right.keys.unshift(key0),right.values.unshift(value0),(_right$keys=right.keys).unshift.apply(_right$keys,_toConsumableArray(child.keys.slice(8,15))),(_right$values=right.values).unshift.apply(_right$values,_toConsumableArray(child.values.slice(8,15))),this.keys.splice(index-1,2,_key3),this.values.splice(index-1,2,_value6),this.children.splice(index-1,3,left,right),isChildInternal)(_children=left.children).push.apply(_children,_toConsumableArray(child.children.slice(0,8))),(_children2=right.children).unshift.apply(_children2,_toConsumableArray(child.children.slice(8,16))),left.updateSize(),right.updateSize()}return this}},{key:"rotateLeft",value:function rotateLeft(child,right0,index,isChildInternal){var right=right0.toOwned(this.owner),newKey=right.keys.shift(),newValue=right.values.shift(),key0=this.getKey(index),value0=this.getValue(index);if(child.keys.push(key0),child.values.push(value0),this.keys[index]=newKey,this.values[index]=newValue,this.children[index+1]=right,isChildInternal){var grandChild=right.children.shift();child.children.push(grandChild);var delta=grandChild.size+1;child.size+=delta,right.size-=delta}}},{key:"rotateRight",value:function rotateRight(child,left0,index,isChildInternal){var left=left0.toOwned(this.owner),newKey=left.keys.pop(),newValue=left.values.pop(),key0=this.getKey(index-1),value0=this.getValue(index-1);if(child.keys.unshift(key0),child.values.unshift(value0),this.keys[index-1]=newKey,this.values[index-1]=newValue,this.children[index-1]=left,isChildInternal){var grandChild=left.children.pop();child.children.unshift(grandChild);var delta=grandChild.size+1;child.size+=delta,left.size-=delta}}},{key:"balanceTail",value:function balanceTail(child){var _child$keys,_child$values,_child$children,index=this.selfSize,left0=this.getChild(index-1),isChildInternal=child.type===NodeType.Internal;15===left0.selfSize?(child.keys.unshift(this.getKey(index-1)),child.values.unshift(this.getValue(index-1)),(_child$keys=child.keys).unshift.apply(_child$keys,_toConsumableArray(left0.keys)),(_child$values=child.values).unshift.apply(_child$values,_toConsumableArray(left0.values)),this.keys.splice(index-1,1),this.values.splice(index-1,1),this.children.splice(index-1,1),isChildInternal&&((_child$children=child.children).unshift.apply(_child$children,_toConsumableArray(left0.children)),child.size+=left0.size+1)):this.rotateRight(child,left0,index,isChildInternal)}},{key:"balanceHead",value:function balanceHead(child){var _child$keys2,_child$values2,_child$children2,right0=this.getChild(1),isChildInternal=child.type===NodeType.Internal;15===right0.selfSize?(child.keys.push(this.getKey(0)),child.values.push(this.getValue(0)),(_child$keys2=child.keys).push.apply(_child$keys2,_toConsumableArray(right0.keys)),(_child$values2=child.values).push.apply(_child$values2,_toConsumableArray(right0.values)),this.keys.splice(0,1),this.values.splice(0,1),this.children.splice(1,1),isChildInternal&&((_child$children2=child.children).push.apply(_child$children2,_toConsumableArray(right0.children)),child.size+=right0.size+1)):this.rotateLeft(child,right0,0,isChildInternal)}},{key:"updateWithSplit",value:function updateWithSplit(owner,child1,child2,key,value,index){var next1=this.toOwned(owner);next1.keys.splice(index,0,key),next1.values.splice(index,0,value),next1.children.splice(index,1,child1,child2);var next2=new InternalNode(owner,next1.keys.splice(16,16),next1.values.splice(16,16),next1.children.splice(16,17),0),nextKey=next1.keys.pop(),nextValue=next1.values.pop();return next1.updateSize(),next2.updateSize(),[next1,next2,nextKey,nextValue]}},{key:"updateSize",value:function updateSize(){for(var sum=this.selfSize,len=this.children.length,i=0;i<len;i+=1)sum+=this.children[i].size;this.size=sum}}]),InternalNode}(),LeafNode=function(){function LeafNode(owner,keys,values){_classCallCheck(this,LeafNode),this.type=NodeType.Leaf,this.keys=void 0,this.values=void 0,this.owner=void 0,this.owner=owner,this.keys=keys,this.values=values}return _createClass(LeafNode,[{key:"size",get:function get(){return this.keys.length}},{key:"selfSize",get:function get(){return this.size}},{key:"toOwned",value:function toOwned(owner){return this.owner===owner?this:new LeafNode(owner,this.keys.slice(),this.values.slice())}},{key:"getKey",value:function getKey(index){return this.keys[index]}},{key:"getValue",value:function getValue(index){return this.values[index]}},{key:"get",value:function get(key){var size=this.selfSize,index=binaryFind(this.keys,key);if(index!==size)return this.getKey(index)===key?this.getValue(index):void 0}},{key:"contains",value:function contains(key){var size=this.selfSize,index=binaryFind(this.keys,key);return index!==size&&this.getKey(index)===key}},{key:"insert",value:function insert(owner,key,value){var size=this.selfSize,index=binaryFind(this.keys,key);if((index===size?void 0:this.getKey(index))===key){var value0=this.getValue(index);if(Object(_utils__WEBPACK_IMPORTED_MODULE_14__.b)(value,value0))return[this];var next=this.toOwned(owner);return next.values[index]=value,[next]}if(31===size)return this.updateWithSplit(owner,key,value,index);var _next5=this.toOwned(owner);return _next5.keys.splice(index,0,key),_next5.values.splice(index,0,value),[_next5]}},{key:"update",value:function update(owner,key,updater){var size=this.selfSize,index=binaryFind(this.keys,key);if((index===size?void 0:this.getKey(index))===key){var value0=this.getValue(index),_value7=updater(value0);if(Object(_utils__WEBPACK_IMPORTED_MODULE_14__.b)(_value7,value0))return this;var next=this.toOwned(owner);return next.values[index]=_value7,next}return this}},{key:"remove",value:function remove(owner,key){var index=binaryFind(this.keys,key);return index===this.selfSize?this:this.removeIndex(owner,index)}},{key:"removeMostRight",value:function removeMostRight(owner){var index=this.selfSize-1;return[this.getKey(index),this.getValue(index),this.removeIndex(owner,index)]}},{key:"map",value:function map(owner,f){for(var values=[],same=!0,i=0;i<this.keys.length;i+=1){var _key4=this.getKey(i),value0=this.getValue(i),_value8=f(value0,_key4);values.push(_value8),same=same&&Object(_utils__WEBPACK_IMPORTED_MODULE_14__.b)(value0,_value8)}return same?this:new LeafNode(owner,this.keys,values)}},{key:"forEach",value:function forEach(f){for(var i=0;i<this.keys.length;i+=1){var _key5=this.getKey(i);f(this.getValue(i),_key5)}}},{key:"find",value:function find(predicate){return this.values.find(predicate)}},{key:"updateWithSplit",value:function updateWithSplit(owner,key,value,index){var next1=this.toOwned(owner);next1.keys.splice(index,0,key),next1.values.splice(index,0,value);var next2=new LeafNode(owner,next1.keys.splice(16,16),next1.values.splice(16,16)),nextKey=next1.keys.pop(),nextValue=next1.values.pop();return[next1,next2,nextKey,nextValue]}},{key:"removeIndex",value:function removeIndex(owner,index){var next=this.toOwned(owner);return next.keys.splice(index,1),next.values.splice(index,1),next}}]),LeafNode}();function emptyRoot(owner){return new LeafNode(owner,[],[])}function rootInsert(owner,root,key,value){if(0===root.selfSize)return new LeafNode(owner,[key],[value]);var insert=root.insert(owner,key,value);if(1===insert.length)return insert[0];var _insert2=_slicedToArray(insert,4),next1=_insert2[0],next2=_insert2[1],newKey=_insert2[2],newValue=_insert2[3];return new InternalNode(owner,[newKey],[newValue],[next1,next2],next1.size+next2.size+1)}function rootRemove(owner,root,key){var newRoot=root.remove(owner,key);return newRoot.type===NodeType.Internal&&0===newRoot.selfSize?newRoot.getChild(0):newRoot}var BTreeIterator=function(_Symbol$iterator2){function BTreeIterator(node){_classCallCheck(this,BTreeIterator),this.delegate=null,this.index=0,this.done=!1,this.node=void 0,this.node=node,this.setDelegate(this.index)}return _createClass(BTreeIterator,[{key:_Symbol$iterator2,value:function value(){return this.clone()}},{key:"next",value:function next(){if(null===this.delegate)return this.yieldValue();var next=this.delegate.next();if(!next.done)return{done:!1,value:next.value};var y=this.yieldValue();return this.index<=this.node.selfSize?this.setDelegate(this.index):(this.done=!0,this.delegate=null),y}},{key:"clone",value:function clone(){var iter=new BTreeIterator(this.node);return iter.delegate=this.delegate,iter.index=this.index,iter.done=this.done,iter}},{key:"setDelegate",value:function setDelegate(index){if(this.node.type===NodeType.Internal){var child=this.node.getChild(index);this.delegate=new BTreeIterator(child)}}},{key:"yieldValue",value:function yieldValue(){if(!this.done&&this.index<this.node.selfSize){var _key6=this.node.getKey(this.index),_value10=this.node.getValue(this.index);return this.index+=1,{done:!1,value:[_key6,_value10]}}return this.done=!0,{done:!0,value:void 0}}}]),BTreeIterator}(Symbol.iterator)},72:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return transformPoint})),__webpack_require__.d(__webpack_exports__,"e",(function(){return reverseTransformPoint})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getPointDeltaByClientDelta})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getClientDeltaByPointDelta})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getRealPointFromClientPoint})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getContainerClientPoint}));__webpack_require__(7),__webpack_require__(14),__webpack_require__(6),__webpack_require__(16),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(15),__webpack_require__(11),__webpack_require__(19);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var transformPoint=function transformPoint(x,y,transformMatrix){return{x:transformMatrix[0]*x+transformMatrix[2]*y+transformMatrix[4],y:transformMatrix[1]*x+transformMatrix[3]*y+transformMatrix[5]}},reverseTransformPoint=function reverseTransformPoint(x,y,transformMatrix){var _transformMatrix=_slicedToArray(transformMatrix,6),t0=_transformMatrix[0],t1=_transformMatrix[1],t2=_transformMatrix[2],t3=_transformMatrix[3],t4=_transformMatrix[4],t5=_transformMatrix[5];return{x:((x-t4)*t3-(y-t5)*t2)/(t0*t3-t1*t2),y:((x-t4)*t1-(y-t5)*t0)/(t1*t2-t0*t3)}},getPointDeltaByClientDelta=function getPointDeltaByClientDelta(x,y,transformMatrix){var _transformMatrix2=_slicedToArray(transformMatrix,4),a=_transformMatrix2[0],b=_transformMatrix2[1],c=_transformMatrix2[2],d=_transformMatrix2[3];return{x:d*x/(a*d-b*c)+c*y/(b*c-a*d),y:b*x/(b*c-a*d)+a*y/(a*d-b*c)}},getClientDeltaByPointDelta=function getClientDeltaByPointDelta(x,y,transformMatrix){if(!transformMatrix)return{x:x,y:y};var _transformMatrix3=_slicedToArray(transformMatrix,4),a=_transformMatrix3[0],b=_transformMatrix3[1],c=_transformMatrix3[2],d=_transformMatrix3[3];return transformPoint(x,y,[a,b,c,d,0,0])},getRealPointFromClientPoint=function getRealPointFromClientPoint(clientX,clientY,viewport){var rect=viewport.rect,x=clientX-rect.left,y=clientY-rect.top;return reverseTransformPoint(x,y,viewport.transformMatrix)},getContainerClientPoint=function getContainerClientPoint(realX,realY,viewport){var client=function getClientPointFromRealPoint(realX,realY,viewport){var _transformPoint=transformPoint(realX,realY,viewport.transformMatrix),x=_transformPoint.x,y=_transformPoint.y,rect=viewport.rect;return{x:x+rect.left,y:y+rect.top}}(realX,realY,viewport),rect=viewport.rect;return{x:client.x-rect.left,y:client.y-rect.top}}},729:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(414)},73:function(module,exports,__webpack_require__){var api=__webpack_require__(929),content=__webpack_require__(930);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},86:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return noop}));var noop=function noop(){}},87:function(module,__webpack_exports__,__webpack_require__){"use strict";var Direction;__webpack_require__.d(__webpack_exports__,"a",(function(){return Direction})),function(Direction){Direction[Direction.X=0]="X",Direction[Direction.Y=1]="Y",Direction[Direction.XY=2]="XY"}(Direction||(Direction={}))},919:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(414).configure)([__webpack_require__(920)],module,!1)}).call(this,__webpack_require__(250)(module))},920:function(module,exports,__webpack_require__){var map={"./index.stories.tsx":933};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=920},930:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(543),_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(544),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default.a);___CSS_LOADER_EXPORT___.push([module.i,".svg_1034369b{position:absolute;overflow:visible;top:0;left:0;width:100%;height:100%}.svg_1034369b:focus{outline:none}.node_a9f151f1{cursor:move}.container_b01cb13d{position:relative;width:100%;height:100%;overflow:hidden;touch-action:none}.button-a11y_d1d870a7{opacity:0;width:0;height:0;overflow:hidden}.adding-node-svg_ef88712a{z-index:1000000;position:fixed;left:0;top:0;width:100%;height:100%}.module-item_b1d09e51{user-select:none;cursor:pointer}.minimap_cf11a73a{height:320px;width:320px;user-select:none;touch-action:none}.minimap-svg_95b86ba4{position:absolute;top:0;left:0;width:100%;height:100%}","",{version:3,sources:["webpack://./src/components/Graph.styles.m.scss"],names:[],mappings:"AAIA,cACE,iBAAA,CACA,gBAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CAEA,oBACE,YAAA,CAIJ,eACE,WAAA,CAGF,oBACE,iBAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,iBAAA,CAGF,sBACE,SAAA,CACA,OAAA,CACA,QAAA,CACA,eAAA,CAGF,0BACE,eAAA,CACA,cAAA,CACA,MAAA,CACA,KAAA,CACA,UAAA,CACA,WAAA,CAGF,sBACE,gBAAA,CACA,cAAA,CAGF,kBACE,YAAA,CACA,WAAA,CACA,gBAAA,CACA,iBAAA,CAEA,sBACE,iBAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA",sourcesContent:["// use static css file here\n// if we use css-in-js, classNames are generated in Graph component\n// while node dragged out from module list can't get then className\n\n.svg {\n  position: absolute;\n  overflow: visible;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  &:focus {\n    outline: none;\n  }\n}\n\n.node {\n  cursor: move;\n}\n\n.container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  touch-action: none;\n}\n\n.button-a11y {\n  opacity: 0;\n  width: 0;\n  height: 0;\n  overflow: hidden;\n}\n\n.adding-node-svg {\n  z-index: 1000000;\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.module-item {\n  user-select: none;\n  cursor: pointer;\n}\n\n.minimap {\n  height: 320px;\n  width: 320px;\n  user-select: none;\n  touch-action: none;\n\n  &-svg {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={svg:"svg_1034369b",node:"node_a9f151f1",container:"container_b01cb13d","button-a11y":"button-a11y_d1d870a7",buttonA11Y:"button-a11y_d1d870a7","adding-node-svg":"adding-node-svg_ef88712a",addingNodeSvg:"adding-node-svg_ef88712a","module-item":"module-item_b1d09e51",moduleItem:"module-item_b1d09e51",minimap:"minimap_cf11a73a","minimap-svg":"minimap-svg_95b86ba4",minimapSvg:"minimap-svg_95b86ba4"},__webpack_exports__.default=___CSS_LOADER_EXPORT___},933:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Features",(function(){return index_stories_Features}));__webpack_require__(12),__webpack_require__(0),__webpack_require__(11),__webpack_require__(7),__webpack_require__(14),__webpack_require__(6),__webpack_require__(16),__webpack_require__(10),__webpack_require__(8),__webpack_require__(9),__webpack_require__(15),__webpack_require__(19);var src=__webpack_require__(44),useGraphReducer=__webpack_require__(275),sampleGraphData={nodes:[{id:"source",name:"source",ports:[{id:"source-port",position:[.5,1],name:"source port",isInputDisabled:!0,isOutputDisabled:!1}],data:{},x:100,y:100,shape:"source"},{id:"step-1",name:"the first step",ports:[{id:"input-top",position:[.5,0],name:"input top",isOutputDisabled:!0,shape:"myPort"},{id:"input-left",position:[0,.5],name:"input left",isOutputDisabled:!0,shape:"myPort"},{id:"output-bottom",position:[.5,1],name:"output bottom",isInputDisabled:!0,shape:"myPort"},{id:"output-right",position:[1,.5],name:"output right",isInputDisabled:!0,shape:"myPort"}],data:{},x:100,y:400,shape:"step"},{id:"step-2",name:"the second step",ports:[{id:"input-top",position:[.5,0],name:"input top",isOutputDisabled:!0,shape:"myPort"},{id:"input-left",position:[0,.5],name:"input left",isOutputDisabled:!0,shape:"myPort"},{id:"output-bottom",position:[.5,1],name:"output bottom",isInputDisabled:!0,shape:"myPort"},{id:"output-right",position:[1,.5],name:"output right",isInputDisabled:!0,shape:"myPort"}],data:{},x:600,y:400,shape:"step"}],edges:[]},jsx_runtime=__webpack_require__(2);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var stepNodeContainerStyles={flexGrow:1,height:"100%",backgroundColor:"yellow",opacity:.5},FeaturesDemo_StepNode=function StepNode(props){return Object(jsx_runtime.jsxs)("div",{style:stepNodeContainerStyles,children:[props.name,Object(jsx_runtime.jsx)("button",{onClick:function onClick(){console.log("this is node "+props.name)},children:"Click me"})]})};FeaturesDemo_StepNode.displayName="StepNode";var sourceNodeConfig={getMinHeight:function getMinHeight(){return 60},getMinWidth:function getMinWidth(){return 100},render:function render(args){var height=Object(src.getRectHeight)(sourceNodeConfig,args.model),width=Object(src.getRectWidth)(sourceNodeConfig,args.model),fill=Object(src.hasState)(src.GraphNodeState.activated)(args.model.state)?"red":"blue",stroke=Object(src.hasState)(src.GraphNodeState.selected)(args.model.state)?"green":"none";return Object(jsx_runtime.jsx)("ellipse",{rx:width/2,ry:height/2,cx:args.model.x+width/2,cy:args.model.y+height/2,stroke:stroke,strokeWidth:4,fill:fill,fillOpacity:.8})}},stepNodeConfig={getMinHeight:function getMinHeight(){return 64},getMinWidth:function getMinWidth(model){var _model$name$length,_model$name;return 120+12*(null!==(_model$name$length=null===(_model$name=model.name)||void 0===_model$name?void 0:_model$name.length)&&void 0!==_model$name$length?_model$name$length:0)},render:function render(args){var _args$model$name,height=Object(src.getRectHeight)(stepNodeConfig,args.model),width=Object(src.getRectWidth)(stepNodeConfig,args.model);return Object(jsx_runtime.jsx)("foreignObject",{transform:"translate("+args.model.x+", "+args.model.y+")",height:height,width:width,style:{display:"flex"},children:Object(jsx_runtime.jsx)(FeaturesDemo_StepNode,{name:null!==(_args$model$name=args.model.name)&&void 0!==_args$model$name?_args$model$name:""})})}},FeaturesDemo_Port=function Port(props){var port=props.port,x=props.x,y=props.y,parentNode=props.parentNode,style=props.style,isConnectable=props.isConnectable,renderCircle=function renderCircle(r,circleStyle){return Object(jsx_runtime.jsx)("circle",{r:r,cx:x,cy:y,style:circleStyle})},opacity=Object(src.hasState)(src.GraphNodeState.unconnectedToSelected)(parentNode.state)?"60%":"100%";return Object(jsx_runtime.jsxs)("g",{opacity:opacity,children:[void 0===isConnectable?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(src.hasState)(src.GraphPortState.activated)(port.state)?renderCircle(7,style):renderCircle(5,style)}):Object(src.hasState)(src.GraphPortState.connectingAsTarget)(port.state)?renderCircle(7,style):Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isConnectable&&renderCircle(18,{fill:"#0078ba",opacity:.2}),renderCircle(5,style)]}),Object(jsx_runtime.jsx)("circle",{r:18,fill:"transparent",cx:x,cy:y})]})};FeaturesDemo_Port.displayName="Port";var FeaturesDemo_MyPortConfig=function(){function MyPortConfig(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MyPortConfig)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(MyPortConfig,[{key:"getStyle",value:function getStyle(port,parentNode,data,isConnectable,connectedAsSource,connectedAsTarget){var stroke="#B3B0AD",strokeDasharray="",fill="#ffffff";if((connectedAsSource||connectedAsTarget)&&(fill="#B3B0AD"),Object(src.hasState)(src.GraphPortState.activated|src.GraphPortState.selected|src.GraphPortState.connecting)(port.state)&&(fill="#0078D4",stroke="#0078D4"),Object(src.hasState)(src.GraphPortState.connecting)(port.state))switch(isConnectable){case!0:fill="#ffffff",stroke="#0078D4",strokeDasharray="3,2";break;case!1:fill="#E1DFDD",Object(src.hasState)(src.GraphPortState.activated)(port.state)&&(stroke="#B3B0AD")}return{stroke:stroke,strokeWidth:1,strokeDasharray:strokeDasharray,fill:fill}}},{key:"getIsConnectable",value:function getIsConnectable(_ref){var anotherPort=_ref.anotherPort,model=_ref.model;if(anotherPort)return!anotherPort.isOutputDisabled&&!model.isInputDisabled||!anotherPort.isInputDisabled&&!model.isOutputDisabled}},{key:"render",value:function render(args){var port=args.model,data=args.data,x=args.x,y=args.y,parentNode=args.parentNode,isConnectable=this.getIsConnectable(args),connectedAsSource=data.isPortConnectedAsSource(parentNode.id,port.id),connectedAsTarget=data.isPortConnectedAsTarget(parentNode.id,port.id);return Object(jsx_runtime.jsx)(FeaturesDemo_Port,{data:data,port:port,parentNode:parentNode,x:x,y:y,style:this.getStyle(port,parentNode,data,isConnectable,connectedAsSource,connectedAsTarget),isConnectable:isConnectable})}},{key:"renderTooltips",value:function renderTooltips(args){var styles={position:"absolute",left:args.x+8,top:args.y+8,background:"#fff",height:30,border:"1px solid #ccc",minWidth:50,zIndex:1e3};return Object(jsx_runtime.jsxs)("div",{style:styles,children:[args.parentNode.name," ",args.model.name]})}}]),MyPortConfig}(),graphConfig=src.GraphConfigBuilder.default().registerNode("source",sourceNodeConfig).registerNode("step",stepNodeConfig).registerPort("myPort",new FeaturesDemo_MyPortConfig).build(),FeaturesDemo_FeaturesDemo=function FeaturesDemo(){var _useGraphReducer2=_slicedToArray(Object(useGraphReducer.a)({settings:{graphConfig:graphConfig},data:src.GraphModel.fromJSON(sampleGraphData)},void 0),2),state=_useGraphReducer2[0],dispatch=_useGraphReducer2[1];return Object(jsx_runtime.jsx)(src.ReactDagEditor,{style:{width:"900px",height:"600px"},state:state,dispatch:dispatch,children:Object(jsx_runtime.jsx)(src.Graph,{})})};FeaturesDemo_FeaturesDemo.displayName="FeaturesDemo";try{FeaturesDemo_Port.displayName="Port",FeaturesDemo_Port.__docgenInfo={description:"",displayName:"Port",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GraphModel<unknown, unknown, unknown>"}},port:{defaultValue:null,description:"",name:"port",required:!0,type:{name:"ICanvasPort<unknown>"}},parentNode:{defaultValue:null,description:"",name:"parentNode",required:!0,type:{name:"ICanvasNode<unknown, unknown>"}},x:{defaultValue:null,description:"",name:"x",required:!0,type:{name:"number"}},y:{defaultValue:null,description:"",name:"y",required:!0,type:{name:"number"}},style:{defaultValue:null,description:"",name:"style",required:!0,type:{name:"CSSProperties"}},isConnectable:{defaultValue:null,description:"",name:"isConnectable",required:!0,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/components/FeaturesDemo.tsx#Port"]={docgenInfo:FeaturesDemo_Port.__docgenInfo,name:"Port",path:"stories/components/FeaturesDemo.tsx#Port"})}catch(__react_docgen_typescript_loader_error){}try{FeaturesDemo_FeaturesDemo.displayName="FeaturesDemo",FeaturesDemo_FeaturesDemo.__docgenInfo={description:"",displayName:"FeaturesDemo",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/components/FeaturesDemo.tsx#FeaturesDemo"]={docgenInfo:FeaturesDemo_FeaturesDemo.__docgenInfo,name:"FeaturesDemo",path:"stories/components/FeaturesDemo.tsx#FeaturesDemo"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"react-dag-editor"};var index_stories_Features=function Features(){return Object(jsx_runtime.jsx)(FeaturesDemo_FeaturesDemo,{})};index_stories_Features.displayName="Features",index_stories_Features.storyName="features",index_stories_Features.parameters=Object.assign({storySource:{source:"() => <FeaturesDemo />"}},index_stories_Features.parameters)},98:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return animationFramed})),__webpack_require__.d(__webpack_exports__,"b",(function(){return throttle}));var _batchedUpdates__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(189);function makeScheduledCallback(callback,schedule,cancel){var currentArgs,task,scheduled=!1,scheduledCallback=function scheduledCallback(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];currentArgs=args,scheduled||(scheduled=!0,task=schedule((function(){scheduled=!1,Object(_batchedUpdates__WEBPACK_IMPORTED_MODULE_0__.a)((function(){callback.apply(null,currentArgs)}))})))};return scheduledCallback.cancel=function(){cancel(task)},scheduledCallback}var animationFramed=function animationFramed(callback){return makeScheduledCallback(callback,requestAnimationFrame,cancelAnimationFrame)},throttle=function throttle(callback,limit){return makeScheduledCallback(callback,(function(cb){return setTimeout(cb,limit)}),clearTimeout)}},99:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return metaControl})),__webpack_require__.d(__webpack_exports__,"a",(function(){return checkIsMultiSelect}));var _browsers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(269),metaControl=function metaControl(e){return _browsers__WEBPACK_IMPORTED_MODULE_0__.c?e.metaKey:e.ctrlKey},checkIsMultiSelect=function checkIsMultiSelect(e){return e.shiftKey||metaControl(e)}}},[[566,2,3]]]);